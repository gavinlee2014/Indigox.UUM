define("Indigox.Web.JsLib.Collection.Hashtable",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(b){var a=Namespace("Indigox.Web.JsLib.Collection").Class("Hashtable").Constructor(function(){this.elements=new b();this._keys=new b();this._values=new b()}).Members({clear:function(){this.elements.clear();this._keys.clear();this._values.clear()},containsKey:function(c){return this._keys.contains(c)},containsValue:function(c){return this._values.contains(c)},iterator:function(){return this.elements.iterator()},keys:function(){return this._keys.toArray()},values:function(){return this._values.toArray()},size:function(){return this.elements.size()},get:function(e){var h=null;var g=this.elements.toArray(),f=g.length,d=null;for(var c=0;c<f;c++){d=g[c];if(d.key===e){h=d.value;break}}return h},put:function(d,e){if(this.containsKey(d)){var c=this._keys.indexOf(d);this._values.set(c,e);this.elements.get(c).value=e}else{this._keys.add(d);this._values.add(e);this.elements.add({key:d,value:e})}},remove:function(e){var c=this._keys.indexOf(e);var d=this.elements.get(c);if(d.key!==e){throw new Error("The hashtable have invalid data members!")}var f=d.value;this._keys.removeAt(c);this._values.removeAt(c);this.elements.removeAt(c);return f}}).$()});define("Indigox.Web.JsLib.Collection.Iterator",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.Collection").Class("Iterator").Constructor(function(b){this.elements=b||[];this.offset=this.elements.length}).Members({current:function(){if(this.offset===this.elements.length){throw new Error("The Iterator is positioned before the first element of the collection")}return this.elements[this.elements.length-this.offset-1]},hasNext:function(b){return this.offset>0},index:function(){return this.elements.length-this.offset-1},next:function(){return this.elements[this.elements.length-this.offset--]},remove:function(){this.elements.splice(this.elements.length-this.offset-1,1)}}).$()});define("Indigox.Web.JsLib.Collection.List",["Indigox.Web.JsLib.Collection.Iterator","Indigox.Web.JsLib.Core"],function(b){var a=Namespace("Indigox.Web.JsLib.Collection").Class("List").Constructor(function(c){if(c){this.elements=c.slice(0)}else{this.elements=[]}}).Members({add:function(c){this.elements.push(c)},addRange:function(f){if(f instanceof a){f=f.toArray()}var e=f.length,d;for(var c=0;c<e;c++){d=f[c];this.elements.push(d)}},clear:function(){while(this.elements[0]){this.elements.shift()}},clone:function(){var c=new this.constructor();c.elements=this.toArray();return c},contains:function(d){var c=this.indexOf(d);if(c<0){return false}return true},forEach:function(e){var g=this.elements,f=g.length,d=null;for(var c=0;c<f;c++){d=g[c];if(e.call(this,d,c,this)===false){return d}}},equals:function(h){var f=true;if(h.size()!==this.size()){f=false}var g=h.elements,e=g.length,d=null;for(var c=0;c<e;c++){d=g[c];if(d!==this.get(c)){return false}}return true},get:function(c){if(-1<c&&c<this.size()){return this.elements[c]}return null},indexOf:function(d){var f=this.elements,e=f.length;for(var c=0;c<e;c++){if(f[c]===d){return c}}return -1},insert:function(c,d){this.elements.splice(c,0,d)},insertRange:function(c,g){if(g instanceof a){g=g.toArray()}var f=g.length,e=null;for(var d=0;d<f;d++){e=g[d];this.elements.splice(c+d,0,e)}},iterator:function(){return new b(this.elements)},remove:function(d){var c=this.indexOf(d);this.removeAt(c)},removeAt:function(c){if(c>=0){this.elements.splice(c,1)}},removeRange:function(c,d){if(c>=0){this.elements.splice(c,d)}},set:function(d,e){var c=this.get(d);this.elements.splice(d,1,e);return c},toArray:function(){return this.elements.slice(0)},size:function(){return this.elements.length}}).$()});define("Indigox.Web.JsLib.Collection.Queue",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Collection").Class("Queue").Extend(c).Constructor(function(d){c.constructor.apply(this,arguments)}).Members({offer:function(d){this.elements.push(d)},poll:function(){return this.elements.shift()},peek:function(){return this.get(0)}}).$()});define("Indigox.Web.JsLib.Collection.Stack",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Collection").Class("Stack").Extend(c).Constructor(function(d){c.constructor.apply(this,arguments)}).Members({push:function(d){this.elements.push(d)},pop:function(){return this.elements.pop()},peek:function(){return this.get(this.size()-1)}}).$()});define("Indigox.Web.JsLib.Configuration.ControlUIsConfiguration",["Indigox.Web.JsLib.UI.ControlUIs","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.Utils.Browser","Indigox.Web.JsLib.WebContexts.Context"],function(c,b,d,a){b.getInstance().registerUI("autocompletebox",c.AutoCompleteBoxUI);b.getInstance().registerUI("autocompleteitem",c.AutoCompleteItemUI);b.getInstance().registerUI("badgelinkmenuitem",c.BadgeLinkMenuItemUI);b.getInstance().registerUI("checkboxitem",c.CheckBoxItemUI);b.getInstance().registerUI("combobox",c.ComboBoxUI);b.getInstance().registerUI("contact",function(){return !(d.isMobile()||d.isTablet())&&a.getInstance().getSetting("JsLib.IntegrateLync")=="true"},c.LyncContactUI);b.getInstance().registerUI("content",c.ContentUI);b.getInstance().registerUI("control",c.SimpleControlUI);b.getInstance().registerUI("dataitem",c.DataItemUI);b.getInstance().registerUI("datalist",c.DataListUI);b.getInstance().registerUI("datepicker",c.DatePickerUI);b.getInstance().registerUI("dialog",c.DialogUI);b.getInstance().registerUI("dialog",function(){return d.isMobile()||d.isTablet()},c.DialogUI);b.getInstance().registerUI("dropdownmenuitem",c.DropDownMenuItemUI);b.getInstance().registerUI("editablecell",c.EditableCellUI);b.getInstance().registerUI("editablerow",c.EditableRowUI);b.getInstance().registerUI("fileupload",c.FileUploadUI);b.getInstance().registerUI("fileuploaditem",c.FileUploadItemUI);b.getInstance().registerUI("gridrow",c.GridRowUI);b.getInstance().registerUI("gridview",c.GridViewUI);b.getInstance().registerUI("hierarchycontrol",c.HierarchyControlUI);b.getInstance().registerUI("listcontrol",c.ListControlUI);b.getInstance().registerUI("literal",c.LiteralUI);b.getInstance().registerUI("loadmask",c.LoadMaskUI);b.getInstance().registerUI("menu",c.MenuUI);b.getInstance().registerUI("nodecontrol",c.NodeControlUI);b.getInstance().registerUI("page",c.PageUI);b.getInstance().registerUI("paging",c.PagingUI);b.getInstance().registerUI("paging",function(){return d.isMobile()||d.isTablet()},c.PagingMobileUI);b.getInstance().registerUI("panel",c.PanelUI);b.getInstance().registerUI("radioboxitem",c.RadioBoxItemUI);b.getInstance().registerUI("richtextbox",c.TinyMceUI);b.getInstance().registerUI("richtextview",c.RichTextViewUI);b.getInstance().registerUI("template",c.TemplateUI);b.getInstance().registerUI("tooltip",c.TooltipUI);b.getInstance().registerUI("userselect",c.UUMUserSelectUI);b.getInstance().registerUI("userselect",function(){return !(d.isMobile()||d.isTablet())&&a.getInstance().getSetting("JsLib.IntegrateUUV")=="true"},c.UUVUserSelectUI);b.getInstance().registerUI("userselect",function(){return d.isMobile()||d.isTablet()},c.UserSelectMobileUI);b.getInstance().registerUI("validator",c.ValidatorUI);b.getInstance().registerUI("widget",c.WidgetUI);b.getInstance().registerUI("widgetzone",c.WidgetZoneUI)});define("Indigox.Web.JsLib.Configuration.MappingsConfiguration",["Indigox.Web.JsLib.Mappings.MappingFactory","Indigox.Web.JsLib.Mappings.DefaultMapping","Indigox.Web.JsLib.Mappings.FormatMapping"],function(b,c,a){b.getInstance().setDefaultMapping(c.getInstance());b.getInstance().register("icon",new a("url({0})"));b.getInstance().register("enable",new c([true,false],[false,true]));b.getInstance().register("visible",new c([true,false],[false,true]));b.getInstance().register("editHMS",new c([true,false],[false,true]));b.getInstance().register("editSecond",new c([true,false],[false,true]));b.getInstance().register("orientation",new c([0,"horizontal"],[1,"vertical"]));b.getInstance().register("mode",new c(["plaintext","plaintext"],["simplehtml","simplehtml"],["advancehtml","advancehtml"],["simplehtml",false]));b.getInstance().register("popout",new c([true,"block"],[false,"none"]));b.getInstance().register("collapsed",new c([true,"collapsed"],[false,"expanded"],[true,false]));b.getInstance().register("hasChildNodes()",new c([true,false],[false,true]));b.getInstance().register("showItems",new c([true,false],[false,true]));b.getInstance().register("cellType",new c([0,"normal"],[1,"update"],[2,"cancel"]))});define("Indigox.Web.JsLib.Configuration.MediatorConfiguration",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.UI.MediatorRegistry","Indigox.Web.JsLib.UI.Mediators","Indigox.Web.JsLib.Utils.Browser","Indigox.Web.JsLib.WebContexts.Context"],function(e,c,a,d,b){c.getInstance().register("accordionitem",a.AccordionItemMediator);c.getInstance().register("autocompletebox",a.AutoCompleteBoxMediator);c.getInstance().register("autocompleteitem",a.AutoCompleteItemMediator);c.getInstance().register("badgelinkmenuitem",a.MenuItemMediator);c.getInstance().register("badgelinkmenuitem",function(){return d.isMobile()||d.isTablet()},a.MenuItemMobileMediator);c.getInstance().register("button",a.ButtonMediator);c.getInstance().register("button",function(){return d.isMobile()||d.isTablet()},a.ButtonMobileMediator);c.getInstance().register("buttonmenuitem",a.ButtonMenuItemMediator);c.getInstance().register("buttonmenuitem",function(){return d.isMobile()||d.isTablet()},a.ButtonMenuItemMobileMediator);c.getInstance().register("checkbox",a.CheckBoxMediator);c.getInstance().register("completeitem",a.CompleteItemMediator);c.getInstance().register("checktreenode",a.TreeNodeMediator);c.getInstance().register("contact",function(){return !(d.isMobile()||d.isTablet())&&b.getInstance().getSetting("JsLib.IntegrateLync")=="true"},a.LyncContactMediator);c.getInstance().register("currency",a.CurrencyMediator);c.getInstance().register("dataitem",a.DataItemMediator);c.getInstance().register("datepicker",a.DatePickerMediator);c.getInstance().register("dialog",a.DialogMediator);c.getInstance().register("dropdownlist",a.DropDownlistMediator);c.getInstance().register("dropdownmenuitem",a.DropDownMenuItemMediator);c.getInstance().register("fileupload",a.FileUploadMediator);c.getInstance().register("fileupload",function(){return !(d.isMobile()||d.isTablet())&&b.getInstance().getSetting("JsLib.IntegrateSharePoint")=="true"},a.SPFileUploadMediator);c.getInstance().register("fieldcontainer",a.FieldContainerMediator);c.getInstance().register("gridrow",a.GridRowMediator);c.getInstance().register("gridview",a.GridViewMediator);c.getInstance().register("linkmenuitem",a.MenuItemMediator);c.getInstance().register("linkmenuitem",function(){return d.isMobile()||d.isTablet()},a.MenuItemMobileMediator);c.getInstance().register("linktreenode",a.TreeNodeMediator);c.getInstance().register("menu",a.MenuMediator);c.getInstance().register("menuitem",a.MenuItemMediator);c.getInstance().register("menuitem",function(){return d.isMobile()||d.isTablet()},a.MenuItemMobileMediator);c.getInstance().register("paging",a.PagingMediator);c.getInstance().register("paging",function(){return d.isMobile()||d.isTablet()},a.PagingMobileMediator);c.getInstance().register("panel",a.PanelMediator);c.getInstance().register("radiobox",a.RadioBoxMediator);c.getInstance().register("richtextbox",a.RichTextBoxMediator);c.getInstance().register("richtextview",a.RichTextViewMediator);c.getInstance().register("textbox",a.TextBoxMediator);c.getInstance().register("toolbar",a.ToolbarMediator);c.getInstance().register("tooltip",a.TooltipMediator);c.getInstance().register("treenode",a.TreeNodeMediator);c.getInstance().register("userselect",a.UserSelectMediator);c.getInstance().register("validator",a.ValidatorMediator);c.getInstance().register("comboitem",a.ComboItemMediator);c.getInstance().register("combobox",a.ComboBoxMediator);c.getInstance().register("combonode",a.ComboNodeMediator);c.getInstance().register("hyperlink",a.HyperLinkMediator);c.getInstance().register(e)});define("Indigox.Web.JsLib.Configuration.PluginConfiguration",["Indigox.Web.JsLib.Controls.Plugins.PluginFactory","Indigox.Web.JsLib.Controls.Plugins"],function(a,c){var b=a.getInstance();b.registerPlugin("summary",c.SummaryFieldPlugin);b.registerPlugin("calculate",c.CalculatePlugin);b.registerPlugin("timespan",c.TimeSpanPlugin);b.registerPlugin("badge",c.BadgePlugin);b.registerPlugin("permission",c.PermissionPlugin);b.registerPlugin("valuedialog",c.ValueDialogPlugin);b.registerPlugin("visible",c.VisiblePlugin)});define("Indigox.Web.JsLib.Configuration.SchemasConfiguration",["Indigox.Web.JsLib.UI.SchemaRegistry","Indigox.Web.JsLib.UI.Schema","Indigox.Web.JsLib.Utils.Browser","Indigox.Web.JsLib.WebContexts.Context"],function(d,c,e,a){var b=d.getInstance();b.builtinAttribute([c.ATTR("id","${id}"),c.STYLE("height","${height}"),c.STYLE("width","${width}"),c.CSS("invisible","${visible}"),c.CSS("control","${defaultName}"),c.CSS("readonly","${readonly}"),c.CSS("disable","${enable}")]);b.register("page",c.BODY([c.CSS("masked","${masked}")],[c.DIV([],[c.EACH("${children}",true)]),c.CTRL("${loadMask}")]));b.register("loadmask",c.DIV([],[c.DIV([c.CSS("mask","true")],[]),c.SPAN([],[c.IMG([c.ATTR("src","/res/css/img/loading.gif")],[]),c.LABEL([],[c.TEXT("${value}")])])]));b.register("literal",c.DIV([],[]));b.register("richtextview",c.DIV([],[c.DIV([c.CSS("toolbar-container",true)],[]),c.DIV([c.CSS("richtextview-content",true)],[])]));b.register("richtextview",function(){return e.isMobile()},c.DIV([c.EVENT("click","${onClick}"),c.EVENT("touchstart","${onTouchStart}"),c.EVENT("touchend","${onTouchEnd}")],[c.DIV([c.CSS("toolbar-container",true)],[c.INPUT([c.ATTR("type","button"),c.ATTR("value","查看原文"),c.CSS("toolbar-enterfullview",true)],[]),c.INPUT([c.ATTR("type","button"),c.ATTR("value","返回"),c.CSS("toolbar-leavefullview",true)],[])]),c.DIV([c.CSS("richtextview-content",true)],[])]));b.register("content",c.DIV([],[c.EACH("${children}",true)]));b.register("label",c.LABEL([],[c.TEXT("${value}")]));b.register("datepicker",c.DIV([c.CSS("dateonly","${editHMS}"),c.EVENT("change","${onChange}"),c.EVENT("click","${onClick}")],[c.DIV([c.CSS("dateinputarea",true)],[c.INPUT([c.CSS("dateinput",true),c.ATTR("type","text"),c.ATTR("value","${date}")]),c.INPUT([c.CSS("selectdatebutton",true),c.ATTR("type","button"),c.ATTR("value","...")])]),c.DIV([c.CSS("timeinputarea",true)],[c.SELECT([c.CSS("hoursinput",true),c.ATTR("value","${hours}")]),c.SPAN([],[c.TEXT(":")]),c.SELECT([c.CSS("minutesinput",true),c.ATTR("value","${minutes}")])])]));b.register("button",c.INPUT([c.ATTR("type","button"),c.ATTR("value","${value}"),c.ATTR("disabled","${enable}"),c.STYLE("background-image","${icon}"),c.EVENT("click","${onClick}")],[]));b.register("button",function(){return e.isMobile()||e.isTablet()},c.INPUT([c.ATTR("type","button"),c.ATTR("value","${value}"),c.ATTR("disabled","${enable}"),c.STYLE("background-image","${icon}"),c.EVENT("click","${onClick}"),c.EVENT("touchstart","${onTouchStart}"),c.EVENT("touchend","${onTouchEnd}")],[]));b.register("textbox",c.INPUT([c.ATTR("type","text"),c.ATTR("value","${value}"),c.ATTR("readOnly","${readonly}"),c.EVENT("change","${onChange}"),c.EVENT("click","${onClicked}")]));b.register("currency",c.DIV([c.EVENT("change","${onChange}")],[c.DIV([],[c.TEXT("小写："),c.INPUT([c.ATTR("type","text"),c.ATTR("value","${value}"),c.ATTR("readOnly","${readonly}")])]),c.DIV([],[c.TEXT("大写："),c.SPAN([],[c.TEXT("${amountInWords}")])])]));b.register("richtextbox",c.TEXTAREA([c.CSS("richtextboxmode","${mode}"),c.ATTR("readOnly","${readonly}"),c.EVENT("change","${onChange}")],[c.TEXT("${value}")]));b.register("hyperlink",c.A([c.ATTR("href","${href}"),c.ATTR("target","${target}"),c.STYLE("background-image","${icon}"),c.EVENT("click","${onClick}")],[c.TEXT("${text}")]));b.register("checkbox",c.DIV([c.EVENT("click","${onClick}")],[c.INPUT([c.ATTR("type","checkbox"),c.ATTR("value","${rawValue}"),c.ATTR("checked","${checked}"),c.ATTR("disabled","${enable}")]),c.LABEL([],[c.TEXT("${text}")])]));b.register("radiobox",c.DIV([c.EVENT("click","${onClick}")],[c.INPUT([c.ATTR("type","radio"),c.ATTR("value","${rawValue}"),c.ATTR("checked","${checked}"),c.ATTR("disabled","${enable}")]),c.LABEL([c.ATTR("htmlFor","${name}")],[c.TEXT("${text}")])]));b.register("paging",c.DIV([c.EVENT("click","${onClick}"),c.EVENT("change","${onChange}")],[c.A([c.CSS("firstpage",true)],[c.TEXT("第一页")]),c.A([c.CSS("prevpage",true)],[c.TEXT("上一页")]),c.LABEL([],[c.TEXT("第")]),c.INPUT([c.ATTR("value","${currentPage}")],[]),c.LABEL([],[c.TEXT("页，共")]),c.LABEL([c.CSS("pagecount",true)],[c.TEXT("${pageCount}")]),c.LABEL([],[c.TEXT("页")]),c.A([c.CSS("nextpage",true)],[c.TEXT("下一页")]),c.A([c.CSS("lastpage",true)],[c.TEXT("最后一页")])]));b.register("paging",function(){return e.isMobile()||e.isTablet()},c.DIV([c.CSS("paging-modelloading","${modelLoading}"),c.EVENT("touchstart","${onTouchStart}"),c.EVENT("touchend","${onTouchEnd}"),c.EVENT("click","${onClick}")],[c.IMG([c.ATTR("src","/res/css/img/loading.gif")],[]),c.A([c.CSS("nextpage",true)],[c.TEXT("更多")])]));b.register("datalist",c.UL([],[c.EACH("${items}")]));b.register("animatedlist",c.MARQUEE([],[c.EACH("${items}")]));b.register("fieldset",c.UL([],[c.EACH("${items}")]));b.register("fieldcontainer",c.LI([c.EVENT("click","${onClick}"),c.CSS("fieldcontainer","${collapsed}"),c.CSS("required","${required}"),c.CSS("vertical","${vertical}")],[c.DL([],[c.DT([],[c.LABEL([],[c.TEXT("${text}")])]),c.DD([],[c.DIV([c.CSS("fieldcontent",true)],[c.EACH("${children}")])])])]));b.register("userselect",c.DIV([c.EVENT("click","${onClick}")],[c.UL([c.CSS("multi","${multi}")],[c.EACH("${children}")]),c.DIV([],[c.INPUT([c.ATTR("type","button"),c.ATTR("value","..."),c.CSS("userselect-selectbutton",true)],[])])]));b.register("usernode",c.LI([],[c.LABEL([],[c.TEXT("${text}")]),c.INPUT([c.ATTR("type","hidden"),c.ATTR("value","${value}")],[])]));b.register("contact",c.LABEL([c.CSS("presence","${presence}"),c.EVENT("mouseover","${onMouseover}"),c.EVENT("mouseout","${onMouseout}")],[c.TEXT("${text}")]));b.register("checkboxlist",c.UL([],[c.EACH("${items}")]));b.register("checkboxitem",c.LI([],[c.CTRL("${checkBox}")]));b.register("radioboxlist",c.UL([],[c.EACH("${items}")]));b.register("radioboxitem",c.LI([],[c.CTRL("${radioBox}")]));b.register("autocompletebox",c.DIV([c.EVENT("blur","${onBlur}"),c.EVENT("keyup","${onKeyUp}"),c.EVENT("keydown","${onKeyDown}"),c.EVENT("click","${onClicked}"),c.CSS("readonly","${readonly}")],[c.DIV([],[c.UL([c.CSS("complete-items",true)],[c.EACH("${completeItems}")]),c.SPAN([c.ATTR("contenteditable","true")],[c.TEXT("${text}")])]),c.UL([c.CSS("items",true),c.CSS("invisible","${showItems}")],[c.EACH("${items}")])]));b.register("autocompleteitem",c.LI([c.CSS("active-item","${isActive}"),c.ATTR("value","${value}"),c.EVENT("click","${onClicked}")],[c.TEXT("${text}")]));b.register("completeitem",c.LI([c.ATTR("value","${value}"),c.EVENT("click","${onClicked}")],[c.LABEL([],[c.TEXT("${text}")]),c.BUTTON([c.ATTR("type","button"),c.CSS("complete-item","remove")],[])]));b.register("combobox",c.DIV([c.EVENT("keyup","${onKeyUp}")],[c.DIV([],[c.EACH("${nodes}")]),c.DIV([][c.INPUT([],[])]),c.UL([],[c.EACH("${items}")])]));b.register("combonode",c.DIV([c.EVENT("click","${onClicked}")],[c.LABEL([],[c.TEXT("${text}")]),c.INPUT([c.ATTR("type","hidden"),c.ATTR("value","${value}")],[]),c.INPUT([c.ATTR("type","button"),c.CSS("combo-node","remove"),c.CSS("readonly","${readonly}")],[])]));b.register("comboitem",c.LI([c.ATTR("value","${value}"),c.EVENT("click","${onClicked}")],[c.TEXT("${text}")]));b.register("dropdownlist",c.SELECT([c.EVENT("change","${onChange}"),c.ATTR("disabled","${readonly}")],[c.EACH("${items}")]));b.register("dropdownitem",c.OPTION([c.ATTR("value","${value}"),c.ATTR("selected","${selected}")],[c.TEXT("${text}")]));b.register("blankdropdownitem",c.OPTION([c.ATTR("value","${value}"),c.ATTR("selected","${selected}")],[c.TEXT("${text}")]));b.register("panel",c.DIV([c.CSS("panel","${collapsed}"),c.EVENT("click","${onClick}")],[c.H1([],[c.SPAN([],[c.TEXT("${title}")]),c.INPUT([c.ATTR("type","button")],[])]),c.DIV([c.CSS("body",true)],[c.EACH("${children}")])]));b.register("dialog",c.DIV([c.EVENT("click","${onClick}"),c.EVENT("resize","${onResize}")],[c.H1([],[c.SPAN([],[c.TEXT("${title}")]),c.INPUT([c.ATTR("type","button")],[])]),c.DIV([c.CSS("body",true)],[c.EACH("${children}")])]));b.register("validator",c.DIV([c.EVENT("click","${onClick}")],[c.INPUT([c.ATTR("type","button")]),c.DIV([],[c.TEXT("${errorMessage}")])]));b.register("tooltip",c.DIV([],[c.EACH("${children}")]));b.register("fileuploadlist",c.UL([c.CSS("multi","${multi}")],[c.EACH("${items}")]));b.register("fileuploaditem",c.LI([],[c.CTRL("${fileUpload}")]));b.register("fileupload",c.DIV([c.CSS("state","${uploadState}"),c.EVENT("click","${onClick}"),c.EVENT("focus","${onFocus}"),c.EVENT("mousedown","${onMousedown}"),c.EVENT("change","${onChange}")],[c.FORM([],[c.INPUT([c.CSS("fileupload","fileselect"),c.ATTR("type","file"),c.ATTR("name","${name}")]),c.SPAN([],[c.TEXT("选择上传文件")])]),c.A([c.CSS("fileupload","filelink"),c.ATTR("href","${href}"),c.ATTR("target","_blank")],[c.TEXT("${text}")]),c.INPUT([c.CSS("fileupload","removebutton"),c.ATTR("type","button"),c.ATTR("title","删除附件"),c.ATTR("value","Remove"),c.CSS("readonly","${readonly}")],[]),c.INPUT([c.CSS("fileupload","cancelbutton"),c.ATTR("type","button"),c.ATTR("title","取消上传"),c.ATTR("value","Cancel")],[]),c.DIV([c.CSS("fileupload","progressbar")],[c.CTRL("${progressBar}")])]));b.register("fileupload",function(){return !(e.isMobile()||e.isTablet())&&a.getInstance().getSetting("JsLib.IntegrateSharePoint")=="true"},c.DIV([c.CSS("state","${uploadState}"),c.EVENT("click","${onClick}"),c.EVENT("focus","${onFocus}"),c.EVENT("mousedown","${onMousedown}"),c.EVENT("change","${onChange}")],[c.FORM([],[c.INPUT([c.CSS("fileupload","fileselect"),c.ATTR("type","file"),c.ATTR("name","${name}")]),c.SPAN([],[c.TEXT("选择上传文件")])]),c.A([c.CSS("fileupload","filelink"),c.ATTR("href","${href}"),c.ATTR("target","_blank")],[c.TEXT("${text}")]),c.INPUT([c.CSS("fileupload","removebutton"),c.ATTR("type","button"),c.ATTR("title","删除附件"),c.ATTR("value","Remove"),c.CSS("readonly","${readonly}")],[]),c.INPUT([c.CSS("fileupload","cancelbutton"),c.ATTR("type","button"),c.ATTR("title","取消上传"),c.ATTR("value","Cancel")],[]),c.INPUT([c.CSS("fileupload","viewbutton"),c.ATTR("type","button"),c.ATTR("title","查看"),c.ATTR("value","View"),c.CSS("readonly","${readonly}")],[]),c.INPUT([c.CSS("fileupload","permissionbutton"),c.ATTR("type","button"),c.ATTR("title","设置权限"),c.ATTR("value","SetPermission"),c.CSS("readonly","${readonly}")],[]),c.DIV([c.CSS("fileupload","progressbar")],[c.CTRL("${progressBar}")])]));b.register("progressbar",c.SPAN([],[c.SPAN([],[c.TEXT("${text}")])]));b.register("tree",c.UL([],[c.EACH("${childNodes}")]));b.register("treenode",c.LI([c.CSS("leafnode","${hasChildNodes()}"),c.CSS("lastchild","${isLastChild()}"),c.EVENT("click","${onClick}")],[c.DIV([c.CSS("treenode","${collapsed}"),c.CSS("treenode-selected","${selected}")],[c.INPUT([c.ATTR("type","button"),c.CSS("hitarea",true)],[]),c.LABEL([],[c.TEXT("${text}")])]),c.UL([c.CSS("treenode","${collapsed}")],[c.EACH("${childNodes}")])]));b.register("checktreenode",c.LI([c.CSS("leafnode","${hasChildNodes()}"),c.CSS("lastchild","${isLastChild()}"),c.EVENT("click","${onClick}")],[c.DIV([c.CSS("treenode","${collapsed}"),c.CSS("treenode-selected","${selected}")],[c.INPUT([c.ATTR("type","button"),c.CSS("hitarea",true)],[]),c.INPUT([c.ATTR("type","checkbox"),c.CSS("clickarea",true),c.ATTR("value","${Value}"),c.ATTR("checked","${checked}")]),c.LABEL([],[c.TEXT("${text}")])]),c.UL([c.CSS("treenode","${collapsed}")],[c.EACH("${childNodes}")])]));b.register("linktreenode",c.LI([c.CSS("leafnode","${hasChildNodes()}"),c.CSS("lastchild","${isLastChild()}"),c.EVENT("click","${onClick}")],[c.DIV([c.CSS("treenode","${collapsed}"),c.CSS("treenode-selected","${selected}")],[c.INPUT([c.ATTR("type","button"),c.CSS("hitarea",true)],[]),c.A([c.ATTR("href","${href}"),c.CSS("clickarea",true),c.ATTR("target","${target}"),c.STYLE("background-image","${icon}")],[c.TEXT("${text}")])]),c.UL([c.CSS("treenode","${collapsed}")],[c.EACH("${childNodes}")])]));b.register("menu",function(){return e.isMobile()||e.isTablet()},c.DIV([c.EVENT("click","${onClick}"),c.EVENT("touchstart","${onTouchStart}"),c.EVENT("touchend","${onTouchEnd}")],[c.DIV([c.CSS("topmenu-actionbar",true)],[c.SPAN([],[c.TEXT("${selectedText}")]),c.INPUT([c.ATTR("type","button"),c.ATTR("value","显示"),c.CSS("menu-popout",true)],[]),c.INPUT([c.ATTR("type","button"),c.ATTR("value","返回"),c.CSS("menu-hide",true)],[])]),c.DIV([c.CSS("menu-body",true)],[c.UL([],[c.EACH("${childNodes}")])])]));b.register("menu",c.UL([c.CSS("orientation","${orientation}")],[c.EACH("${childNodes}")]));b.register("menuitem",function(){return e.isMobile()||e.isTablet()},c.LI([c.CSS("menuitem-selected","${selected}"),c.CSS("topmenu","${topMenu}"),c.EVENT("click","${onClick}")],[c.DL([],[c.DT([],[c.LABEL([],[c.TEXT("${value}")])]),c.DD([c.STYLE("display","${popout}")],[c.DIV([],[c.DIV([c.CSS("menuitem-actionbar",true)],[c.INPUT([c.ATTR("type","button"),c.ATTR("value","返回"),c.CSS("menu-hide",true)])]),c.UL([c.CSS("orientation","${orientation}")],[c.EACH("${childNodes}")])])])])]));b.register("menuitem",c.LI([c.CSS("menuitem-selected","${selected}"),c.CSS("topmenu","${topMenu}"),c.EVENT("mouseout","${onMouseout}"),c.EVENT("mouseover","${onMouseover}")],[c.DL([],[c.DT([],[c.LABEL([],[c.TEXT("${value}")])]),c.DD([c.STYLE("display","${popout}")],[c.UL([c.CSS("itmes",true),c.CSS("orientation","${orientation}")],[c.EACH("${childNodes}")])])])]));b.register("linkmenuitem",function(){return e.isMobile()||e.isTablet()},c.LI([c.CSS("menuitem-selected","${selected}"),c.CSS("topmenu","${topMenu}"),c.EVENT("click","${onClick}"),c.EVENT("touchstart","${onTouchStart}"),c.EVENT("touchend","${onTouchEnd}")],[c.DL([],[c.DT([],[c.A([c.ATTR("href","${href}"),c.ATTR("target","${target}"),c.STYLE("background-image","${icon}")],[c.TEXT("${text}")])]),c.DD([c.STYLE("display","${popout}")],[c.DIV([],[c.DIV([c.CSS("menuitem-actionbar",true)],[c.INPUT([c.ATTR("type","button"),c.ATTR("value","返回"),c.CSS("menu-hide",true)])]),c.DIV([],[c.UL([c.CSS("itmes",true),c.CSS("orientation","${orientation}")],[c.EACH("${childNodes}")])])])])])]));b.register("linkmenuitem",c.LI([c.CSS("menuitem-selected","${selected}"),c.CSS("topmenu","${topMenu}"),c.EVENT("click","${onClick}"),c.EVENT("mouseout","${onMouseout}"),c.EVENT("mouseover","${onMouseover}")],[c.DL([],[c.DT([],[c.A([c.ATTR("href","${href}"),c.ATTR("target","${target}"),c.STYLE("background-image","${icon}")],[c.TEXT("${text}")])]),c.DD([c.STYLE("display","${popout}")],[c.DIV([c.CSS("menuitem-actionbar",true)],[c.INPUT([c.ATTR("type","button"),c.ATTR("value","返回"),c.CSS("menu-hide",true)])]),c.UL([c.CSS("orientation","${orientation}")],[c.EACH("${childNodes}")])])])]));b.register("badgelinkmenuitem",c.LI([c.CSS("menuitem-selected","${selected}"),c.CSS("topmenu","${topMenu}"),c.EVENT("click","${onClick}"),c.EVENT("mouseout","${onMouseout}"),c.EVENT("mouseover","${onMouseover}")],[c.DL([],[c.DT([],[c.A([c.ATTR("href","${href}"),c.ATTR("target","${target}"),c.STYLE("background-image","${icon}")],[c.TEXT("${text}"),c.SPAN([c.CSS("badge",true)],[c.TEXT("${badge}")])])]),c.DD([c.STYLE("display","${popout}")],[c.DIV([c.CSS("menuitem-actionbar",true)],[c.INPUT([c.ATTR("type","button"),c.ATTR("value","返回"),c.CSS("menu-hide",true)])]),c.UL([c.CSS("orientation","${orientation}")],[c.EACH("${childNodes}")])])])]));b.register("badgelinkmenuitem",function(){return e.isMobile()||e.isTablet()},c.LI([c.CSS("menuitem-selected","${selected}"),c.CSS("topmenu","${topMenu}"),c.EVENT("click","${onClick}"),c.EVENT("touchstart","${onTouchStart}"),c.EVENT("touchend","${onTouchEnd}")],[c.DL([],[c.DT([],[c.A([c.ATTR("href","${href}"),c.ATTR("target","${target}"),c.STYLE("background-image","${icon}")],[c.TEXT("${text}")]),c.SPAN([c.CSS("badge",true)],[c.TEXT("${badge}")])]),c.DD([c.STYLE("display","${popout}")],[c.DIV([c.CSS("menuitem-actionbar",true)],[c.INPUT([c.ATTR("type","button"),c.ATTR("value","返回"),c.CSS("menu-hide",true)])]),c.UL([c.CSS("orientation","${orientation}")],[c.EACH("${childNodes}")])])])]));b.register("buttonmenuitem",function(){return e.isMobile()||e.isTablet()},c.LI([c.CSS("menuitem-selected","${selected}"),c.CSS("topmenu","${topMenu}"),c.EVENT("click","${onClick}"),c.EVENT("touchstart","${onTouchStart}"),c.EVENT("touchend","${onTouchEnd}")],[c.DL([],[c.DT([],[c.INPUT([c.ATTR("type","button"),c.ATTR("value","${value}"),c.ATTR("disabled","${enable}"),c.STYLE("background-image","${icon}")],[])]),c.DD([c.STYLE("display","${popout}")],[c.DIV([],[c.DIV([c.CSS("menuitem-actionbar",true)],[c.INPUT([c.ATTR("type","button"),c.ATTR("value","返回"),c.CSS("menu-hide",true)])]),c.DIV([],[c.UL([c.CSS("orientation","${orientation}")],[c.EACH("${childNodes}")])])])])])]));b.register("buttonmenuitem",c.LI([c.CSS("menuitem-selected","${selected}"),c.CSS("topmenu","${topMenu}"),c.EVENT("mouseout","${onMouseout}"),c.EVENT("click","${onClick}"),c.EVENT("mouseover","${onMouseover}")],[c.DL([],[c.DT([],[c.INPUT([c.ATTR("type","button"),c.CSS("actionbutton",true),c.ATTR("value","${value}"),c.ATTR("disabled","${enable}"),c.STYLE("background-image","${icon}")],[])]),c.DD([c.STYLE("display","${popout}")],[c.UL([c.CSS("orientation","${orientation}")],[c.EACH("${childNodes}")])])])]));b.register("dropdownmenuitem",c.LI([c.CSS("menuitem-selected","${selected}"),c.CSS("topmenu","${topMenu}"),c.EVENT("click","${onClick}")],[c.DL([],[c.DT([c.CSS("haschild","${hasChildMenus()}")],[c.INPUT([c.ATTR("type","button"),c.ATTR("value","${value}"),c.ATTR("disabled","${enable}"),c.CSS("actionbutton",true),c.STYLE("background-image","${icon}")],[]),c.INPUT([c.ATTR("type","button"),c.ATTR("value","..."),c.CSS("dropdownbutton",true)],[])]),c.DD([c.STYLE("display","${popout}")],[c.UL([c.CSS("orientation","${orientation}")],[c.EACH("${childNodes}")])])])]));b.register("accordion",c.UL([c.CSS("orientation","${orientation}")],[c.EACH("${items}")]));b.register("accordionitem",c.LI([c.CSS("accordionitem","${collapsed}"),c.EVENT("click","${onClick}")],[c.DL([],[c.DT([],[c.TEXT("${text}"),c.INPUT([c.ATTR("type","button"),c.ATTR("value","toggle")],[])]),c.DD([c.CSS("accordionbody",true)],[c.EACH("${children}")])])]));b.register("widgetzone",c.DIV([],[c.EACH("${widgets}")]));b.register("widget",c.DIV([],[c.EACH("${children}",true)]));b.register("gridview",function(){return e.isMobile()},c.DIV([c.EVENT("click","${onClick}"),c.EVENT("touchstart","${onTouchStart}"),c.EVENT("touchend","${onTouchEnd}")],[c.DIV([c.CSS("toolbar-container",true)],[c.INPUT([c.ATTR("type","button"),c.ATTR("value","查看表格"),c.CSS("toolbar-enterfullview",true)],[]),c.INPUT([c.ATTR("type","button"),c.ATTR("value","返回"),c.CSS("toolbar-leavefullview",true)],[])]),c.TABLE([],[c.THEAD([],[c.CTRL("${header}")]),c.TBODY([],[c.EACH("${rows}")]),c.TFOOT([],[c.EACH("${footers}")])])]));b.register("gridview",c.TABLE([],[c.THEAD([],[c.CTRL("${header}")]),c.TBODY([],[c.EACH("${rows}")]),c.TFOOT([],[c.EACH("${footers}")])]));b.register("gridrow",c.TR([c.EVENT("click","${onClick}"),c.CSS("selected","${selected}")],[c.EACH("${cells}")]));b.register("summaryrow",c.TR([],[c.EACH("${cells}")]));b.register("gridheader",c.TR([],[c.EACH("${cells}")]));b.register("gridfooter",c.TR([],[c.EACH("${children}")]));b.register("editablerow",c.TR([],[c.EACH("${cells}")]));b.register("toolbar",c.TR([c.EVENT("click","${onClick}")],[c.TD([],[c.INPUT([c.ATTR("type","button"),c.CSS("toolbar-add",true),c.ATTR("value","添加")],[])])]));b.register("gridcell",c.TD([],[c.TEXT("${value}")]));b.register("editablecell",c.TD([c.CSS("celltype","${cellType}")],[c.CTRL("${editingControl}")]))});define("Indigox.Web.JsLib.Configuration.ValidatorRuleConfiguration",["Indigox.Web.JsLib.Controls.Validation.ValidateRuleFactory","Indigox.Web.JsLib.Controls.Validation.Rules"],function(a,c){var b=a.getInstance();b.registerRule("qt",c.GreaterThanRule);b.registerRule("qe",c.GreaterOrEqualRule);b.registerRule("eq",c.EqualRule);b.registerRule("lt",c.LessThanRule);b.registerRule("le",c.LessOrEqualRule);b.registerRule("eq2c",c.EqualControlRule);b.registerRule("qe2c",c.GreaterOrEqualControlRule);b.registerRule("gt2c",c.GreaterThanControlRule);b.registerRule("le2c",c.LessOrEqualControlRule);b.registerRule("lt2c",c.LessThanControlRule);b.registerRule("notblank",c.NotBlankRule);b.registerRule("nb",c.NotBlankRule);b.registerRule("min",c.MinLengthRule);b.registerRule("minlength",c.MinLengthRule);b.registerRule("max",c.MaxLengthRule);b.registerRule("maxlength",c.MaxLengthRule);b.registerRule("rx",c.RegxRule);b.registerRule("regex",c.RegxRule);b.registerRule("ip",c.IPAddressRule);b.registerRule("mail",c.MailAddressRule);b.registerRule("phone",c.PhoneNumberRule);b.registerRule("num",c.NumberRule);b.registerRule("number",c.NumberRule);b.registerRule("str",c.StringRule);b.registerRule("string",c.StringRule)});define("Indigox.Web.JsLib.Connection.Ajax",["Indigox.Web.JsLib.Connection.Connection","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Utils.Delegate","Indigox.Web.JsLib.Utils.UrlUtil","Indigox.Web.JsLib.Utils.Browser","Indigox.Web.JsLib.Utils.AuthorizationHeaderUtil","jquery","Indigox.Web.JsLib.Core"],function(j,g,e,f,h,d,k){var h=h.getInstance();var c=j.prototype;var a=[];var b=Namespace("Indigox.Web.JsLib.Connection").Class("Ajax").Extend(c).Constructor(function(l){c.constructor.apply(this,arguments);this.dfd=null}).Members({send:function(){if(this.dfd!=null){return}this.dfd=new g();var m=this.dfd.promise();var l=this;k.ajax({url:f.join(this.url),async:this.async,data:this.data,dataType:"text",type:this.method,timeout:300000,success:e.create(this.onSuccess,this),error:e.create(this.onError,this),cache:false,xhr:function(){try{return window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest()}catch(n){return new XMLHttpRequest()}},beforeSend:function(n){n.onreadystatechange=function(){var o={state:n.readyState};if(((n.readyState>1)&&(h.name!=="IE"))||(n.readyState===4)){if(n.readyState>1){o.responseLength=n.getResponseHeader("X-Content-Length")}}l.onProgress(o)};n.setRequestHeader("Cache-Control","no-cache");n.setRequestHeader("Pragma","no-cache");n.setRequestHeader("If-Modified-Since","0")}});return m},onProgress:function(l){if(this.dfd){this.dfd.notify(l)}},onSuccess:function(l,m){this.dfd.resolve(l);this.dfd=null;this.callback.apply(this,[l])},onError:function(m,p,n){if(p==="timeout"){var l="Ajax Request Timeout!";this.errorCallback.apply(this,[l]);this.dfd.reject(l);this.dfd=null;return}var o=m.status;var l="";if(o==401){this.redirectToLoginPage(m)}else{if(o==403){this.redirectToForbiddenPage(m)}else{if(o>=400){l=this.getErrorFromXMLHttpRequest(m);this.errorCallback.apply(this,[l]);this.dfd.reject(l);this.dfd=null}else{l="stateCode="+o;debug.error(l);this.dfd.reject(l);this.dfd=null}}}},redirectToLoginPage:function(l){var m=l.getResponseHeader("WWW-Authenticate");window.location.href=d.getParam(m,"loginUrl")},redirectToForbiddenPage:function(l){var m=l.getResponseHeader("WWW-Authenticate");window.location.href=d.getParam(m,"forbiddenUrl")},getErrorFromXMLHttpRequest:function(n){var m="[Code: "+n.status+"] ";var l=/^[\s\S]*<html/g;if(l.test(n.responseText)){return m+n.statusText}else{return m+n.responseText}}}).$()});define("Indigox.Web.JsLib.Connection.Connection",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Core"],function(b){var a=Namespace("Indigox.Web.JsLib.Connection").Class("Connection").Constructor(function(c){b.copy(this,b.copyExist({url:"",data:[],async:true,method:"GET",callback:function(d){},errorCallback:function(d){debug.error(d)}},c))}).Members({send:function(){}}).$()});define("Indigox.Web.JsLib.Controllers.Controller",["Indigox.Web.JsLib.Utils.Configurable","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Models.Model","Indigox.Web.JsLib.Models.RecordManager","Indigox.Web.JsLib.Core"],function(b,g,a,f,e){var c=b.prototype;var d=Namespace("Indigox.Web.JsLib.Controllers").Class("Controller").Extend(c).Constructor(function(h){c.constructor.apply(this,arguments);this.listenPaused=false;this.paramChanged=false;this.defaultParamName="";h=g.copyExist({params:null,model:null,view:null,relatedRecord:null,autoLoad:true,defaultParamName:null},h);this.configure(h)}).Members({setAutoLoad:function(h){this.autoLoad=h},getAutoLoad:function(){return this.autoLoad},setDefaultParamName:function(h){this.defaultParamName=h},setDefaultParamValue:function(h){this.setParam(this.defaultParamName,h)},setParam:function(h,j){if(this.params==null){this.params={}}if(this.params[h]===j){return}this.params[h]=j;this.paramChanged=true},getParam:function(h){return this.params[h]},setParams:function(h){if(this.params===h){return}this.params=h;this.paramChanged=true},getParams:function(){return this.params||{}},isParamChanged:function(){return this.paramChanged},setRelated:function(h){this.relatedRecord=h||{}},getRelated:function(){return this.relatedRecord},setModel:function(m){if((m)&&(!(m instanceof f))){var l=m;if(l.schema){e.getInstance().register(l.schemaName,l.schema)}m=e.getInstance().createRecordSet(l.schemaName,l)}if(this.model){var h=this.model.getRecords();for(var j=0,k=h.length;j<k;j++){h[j].removeListener(this)}this.model.removeListener(this)}this.model=m;if(this.model){this.model.addListener(this)}},getModel:function(){return this.model},setView:function(h){this.view=h},getView:function(){return this.view},load:function(h){},unload:function(){this.setModel(null)},clearModel:function(){if(this.model){this.model.clearRecord();this.model.setTransaction(null);this.model.beginTransaction()}},bindRecord:function(j,h){if(isNullOrUndefined(h)){h=j;j=this.view}j.getBinding().bind(j,h)},updateRecord:function(j,h){if(isNullOrUndefined(h)){h=this.model.getRecord(0)}if(isNullOrUndefined(j)){j=this.view}this.pauseListen();if(!isNullOrUndefined(h)){this.provideValues(j,h)}this.resumeListen()},insertRecord:function(h,j){if(isNullOrUndefined(j)){this.model.insertRecord(h,{})}else{this.model.insertRecord(h,j)}},removeRecord:function(h){this.model.removeRecord(h)},save:function(h){h=a.createInstance(h);this.model.commit({handler:this.doSave,scope:this,args:[h]})},doSave:function(h,j){if(j){j.invoke(h)}},provideValues:function(j,h){j.getBinding().provide(j,h)},pauseListen:function(){this.listenPaused=true},resumeListen:function(){this.listenPaused=false},onRecordAdded:function(k,j,h){h.addListener(this)},onRecordRemoved:function(k,j,h){h.removeListener(this)},onFieldChanged:function(k,h,j){}}).$()});define("Indigox.Web.JsLib.Controllers.FormController",["Indigox.Web.JsLib.Controllers.Controller","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Core"],function(d,a){var c=d.prototype;var b=Namespace("Indigox.Web.JsLib.Controllers").Class("FormController").Extend(c).Constructor(function(e){c.constructor.apply(this,arguments)}).Members({load:function(j){j=a.createInstance(j);var f=this.model;if(!this.isParamChanged()||!f){if(j){j.invoke()}return}if(f.size()){var e=f.getRecord(0);var g=this.view;this.bindRecord(g,e);if(j){j.invoke()}}else{var h=this.getParams();f.load(h,j)}},save:function(e){this.updateRecord();c.save.apply(this,arguments)},onRecordAdded:function(g,f,e){if(this.listenPaused){return}c.onRecordAdded.apply(this,arguments);if(this.listenPaused){return}var h=this.view;this.bindRecord(h,e)},onRecordRemoved:function(g,f,e){if(this.listenPaused){return}c.onRecordRemoved.apply(this,arguments)},onFieldChanged:function(g,e,f){if(this.listenPaused){return}c.onFieldChanged.apply(this,arguments);if(this.listenPaused){return}var h=this.view;this.bindRecord(h,g)}}).$()});define("Indigox.Web.JsLib.Controllers.HierarchyController",["Indigox.Web.JsLib.Controllers.Controller","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Models.Record","Indigox.Web.JsLib.Core"],function(e,f,b,a){var d=e.prototype;var c=Namespace("Indigox.Web.JsLib.Controllers").Class("HierarchyController").Extend(d).Constructor(function(g){d.constructor.apply(this,arguments);this.controlIndexer={};g=f.copyExist({rootValue:null,nodeOptions:{}},g);this.configure(g)}).Members({load:function(h){h=b.createInstance(h);if(!this.isParamChanged()){if(h){h.invoke()}return}var g=this.buildLoadParams();this.model.load(g,h)},getForeignKey:function(){var l=this.model.getSchema().getForeignKeys();var k=this.model.getSchema().name;for(var g=0,j=l.length;g<j;g++){var h=l[g];if(k==h.getReferencedSchema()){return h}}return null},buildLoadParams:function(){var h={};var g=this.getForeignKey().getColumns()[0].getName();if(this.relatedRecord!=null){if(this.relatedRecord instanceof a){h[g]=this.model.getIdentity(this.relatedRecord)}else{h[g]=this.relatedRecord}}else{if(this.params!=null){h=this.params}else{h[g]=this.rootValue}}return h},onRecordAdded:function(g,l,j){if(this.listenPaused){return}d.onRecordAdded.apply(this,arguments);var m=this.getForeignKey();var p=m.toIdentity(j);var h=this.model.getRecord(p);if(p&&!h&&p!=this.rootValue){this.setRelated(null);this.setParam(this.model.getSchema().getPrimaryKey().columns[0].getName(),p);this.load();h=this.model.getRecord(p);this.findControl(h).expand()}else{var n=this.view;var k=null;if(p&&p!=this.rootValue){k=this.findControl(h)}else{k=n}var o=this.newNode(n,j);this.addToIndexer(j,o);this.addChildNode(k,o,j)}},addChildNode:function(h,j,g){this.bindRecord(j,g);h.addChildNode(j)},findControl:function(g){if(g instanceof a){return this.controlIndexer[this.model.getIdentity(g)]}else{return this.controlIndexer[g]}},addToIndexer:function(g,h){if(g instanceof a){this.controlIndexer[this.model.getIdentity(g)]=h}else{this.controlIndexer[g]=h}},onRecordRemoved:function(g,o,m){if(this.listenPaused){return}d.onRecordRemoved.apply(this,arguments);var p=this.getForeignKey();var r=p.toIdentity(m);var h=this.model.getRecord(r);var k=this.findControl(m);var q=this.view;for(var l=0,j=k.getChildNodes().length;l<j;l++){this.model.removeRecord(k.getChildNodes()[l].getRecord())}var n=null;if(h){n=this.findControl(h)}else{n=q}n.removeChildNode(k)},getNodeOptions:function(){return this.nodeOptions},setNodeOptions:function(g){this.nodeOptions=g},getRootValue:function(){return this.rootValue},setRootValue:function(g){this.rootValue=g},newNode:function(j,g){var h=this.getNodeOptions();h.record=g;return j.newNode(h)},onFieldChanged:function(j,g,h){d.onFieldChanged.apply(this,arguments);if(this.listenPaused){return}var k=this.findControl(j);this.bindRecord(k,j)}}).$()});define("Indigox.Web.JsLib.Controllers.ListController",["Indigox.Web.JsLib.Controllers.Controller","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Models.Record","Indigox.Web.JsLib.Core"],function(e,f,b,a){var c=e.prototype;var d=Namespace("Indigox.Web.JsLib.Controllers").Class("ListController").Extend(c).Constructor(function(g){c.constructor.apply(this,arguments);this.controlIndexer={};g=f.copyExist({itemOptions:{}},g);this.configure(g)}).Members({load:function(h){h=b.createInstance(h);if(!this.isParamChanged()){if(h){h.invoke()}return}var g=this.getParams();this.model.load(g,h)},onRecordAdded:function(j,h,g){if(this.listenPaused){return}c.onRecordAdded.apply(this,arguments);var k=this.view;var l=this.newItem(k,g);this.bindRecord(l,g);this.addToIndexer(g,l);k.insertItem(h,l)},onRecordRemoved:function(k,h,g){if(this.listenPaused){return}var l=this.view;var j=l.getItems()[h];l.removeItem(j)},onFieldChanged:function(j,g,h){c.onFieldChanged.apply(this,arguments);if(this.listenPaused){return}var k=this.findControl(j);this.bindRecord(k,j)},findControl:function(g){if(g instanceof a){return this.controlIndexer[this.model.getIdentity(g)]}else{return this.controlIndexer[g]}},addToIndexer:function(g,h){if(g instanceof a){this.controlIndexer[this.model.getIdentity(g)]=h}else{this.controlIndexer[g]=h}},getItemOptions:function(){return this.itemOptions},setItemOptions:function(g){this.itemOptions=g},newItem:function(j,g){var h=this.getItemOptions();h.record=g;return j.newItem(h)}}).$()});define("Indigox.Web.JsLib.Controllers.PluginController",["Indigox.Web.JsLib.Controllers.Controller","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(e,f,a,c){var d=e.prototype;var b=Namespace("Indigox.Web.JsLib.Controllers").Class("PluginController").Extend(d).Constructor(function(g){d.constructor.apply(this,arguments);this.plugins=new c();g=f.copyExist({plugins:[]},g);this.configure(g)}).Members({load:function(j){j=a.createInstance(j);var g=this.model;if(g.size()===0){var h=this.getParams();g.load(h,j)}},onRecordAdded:function(j,h,g){if(this.listenPaused){return}d.onRecordAdded.apply(this,arguments);if(this.listenPaused){return}this.implementPlugins(g)},implementPlugins:function(h){var g=this.getPlugins();var j=null,k=g.length;for(j=0;j<k;j++){g[j].execute(h)}},addPlugin:function(g){if(isNullOrUndefined(g)||this.plugins.contains(g)){return}this.plugins.add(g)},removePlugin:function(g){this.plugins.remove(g)},getPlugins:function(){return this.plugins.toArray()},setPlugins:function(g){this.plugins=new c();this.plugins.addRange(g)},onRecordRemoved:function(j,h,g){if(this.listenPaused){return}d.onRecordRemoved.apply(this,arguments);if(this.listenPaused){return}},onFieldChanged:function(j,g,h){if(this.listenPaused){return}if(this.model.size()>0){this.implementPlugins(this.model.getRecord(0))}}}).$()});define("Indigox.Web.JsLib.Controls.Binding.Binding",["Indigox.Web.JsLib.Utils.Configurable","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Binding").Class("Binding").Extend(c).Constructor(function(){c.constructor.apply(this,arguments);this.referenceFields=[];this.mode="ReadAndWrite"}).Members({getReferenceFields:function(){return this.referenceFields},setReferenceFields:function(d){this.referenceFields=d},getMode:function(){return this.mode},setMode:function(d){this.mode=d},bind:function(f,d,e){},provide:function(f,d,e){}}).$()});define("Indigox.Web.JsLib.Controls.Binding.ChildControlBinding",["Indigox.Web.JsLib.Controls.Binding.Binding","Indigox.Web.JsLib.Expression.ExpressionEvaluator","Indigox.Web.JsLib.Core"],function(d,a){var c=d.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Binding").Class("ChildControlBinding").Extend(c).Constructor(function(){c.constructor.apply(this,arguments);this.childProperty="children"}).Members({getChildProperty:function(){return this.childProperty},setChildProperty:function(e){this.childProperty=e},bind:function(k,e){var l=new a("${"+this.getChildProperty()+"}");var g=l.getProperty(k);if(g){for(var f=0,h=g.length;f<h;f++){var j=g[f];j.getBinding().bind(j,e);this.bind(j,e)}}},provide:function(k,e){if(this.getMode()=="ReadOnly"){return}var l=new a("${"+this.getChildProperty()+"}");var g=l.getProperty(k);if(g){for(var f=0,h=g.length;f<h;f++){var j=g[f];j.getBinding().provide(j,e);this.provide(j,e)}}}}).$()});define("Indigox.Web.JsLib.Controls.Binding.PropertyBinding",["Indigox.Web.JsLib.Controls.Binding.Binding","Indigox.Web.JsLib.Expression.ExpressionEvaluator","Indigox.Web.JsLib.Formatters.Formatter","Indigox.Web.JsLib.Core"],function(e,c,b){var d=e.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Binding").Class("PropertyBinding").Extend(d).Constructor(function(){d.constructor.apply(this,arguments);this.mapping=null}).Members({getMapping:function(){return this.mapping},setMapping:function(f){this.mapping=f},bind:function(m,f,l){var g=this.mapping;if(typeof l==="undefined"){for(var k in g){if(k==="readValue"){g[k](m,f)}else{if(k==="writeValue"){}else{var n=new c("${"+k+"}");if(isFunction(g[k])){n.setProperty(m,g[k](f))}else{if(g[k] instanceof b){var h=g[k];var j=m.getName();if(f.contains(j)){n.setProperty(m,h.getText(f.get(j)))}}else{var j=g[k];if(f.contains(j)){n.setProperty(m,f.get(j))}}}}}}}else{if(!this.hasReference(l)){return}this.bind(m,f)}},provide:function(m,f,l){if(!m.isEditable()){return}if(this.getMode()=="ReadOnly"){return}var h=null,n=null,k=null;var g=this.mapping;for(var j in this.getMapping()){if(j==="readValue"){}else{if(j==="writeValue"){g[j](f,m);h=undefined}else{n=new c("${"+j+"}");if(isFunction(g[j])){}else{if(g[j] instanceof b){}else{h=g[j];k=n.getProperty(m)}}}}if(f.contains(h)){f.set(h,k)}}}}).$()});define("Indigox.Web.JsLib.Controls.Binding.ValueBinding",["Indigox.Web.JsLib.Controls.Binding.Binding","Indigox.Web.JsLib.Expression.ExpressionEvaluator","Indigox.Web.JsLib.Core"],function(d,a){var c=d.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Binding").Class("ValueBinding").Extend(c).Constructor(function(){c.constructor.apply(this,arguments)}).Members({bind:function(h,e,g){var j=new a("${value}");if(typeof g==="undefined"){var f=h.getName();if(isNullOrUndefined(e.get(f))){return}if(e.contains(f)){j.setProperty(h,e.get(f))}}else{if(!this.hasReference(g)){return}if(isNullOrUndefined(e.get(g))){return}if(e.contains(g)){j.setProperty(h,e.get(g))}}},provide:function(j,e,h){if(!j.isEditable()){return}if(this.getMode()=="ReadOnly"){return}var k=new a("${value}");var g=k.getProperty(j);var f=h;if(isNullOrUndefined(f)){f=j.getName()}if(e.contains(f)){e.set(f,g)}}}).$()});define("Indigox.Web.JsLib.Controls.Events.EventObject",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.Controls.Events").Class("EventObject").Constructor(function(){}).Members({}).$()});define("Indigox.Web.JsLib.Controls.Events.InputEvent",["Indigox.Web.JsLib.Controls.Events.EventObject","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Events").Class("InputEvent").Extend(c).Constructor(function(d){c.constructor.apply(this,arguments);this.alt=d.altKey;this.ctrl=d.ctrlKey;this.shift=d.shiftKey;this.modifiers=null}).Members({getAlt:function(){return this.alt},getCtrl:function(){return this.ctrl},getShift:function(){return this.shift},getModifiers:function(){return this.modifiers=null}}).$()});define("Indigox.Web.JsLib.Controls.Events.KeyEvent",["Indigox.Web.JsLib.Controls.Events.InputEvent","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Events").Class("KeyEvent").Extend(b).Constructor(function(d){b.constructor.apply(this,arguments);this.key=d.key}).Members({getKey:function(){return this.key}}).$()});define("Indigox.Web.JsLib.Controls.Events.MouseEvent",["Indigox.Web.JsLib.Controls.Events.InputEvent","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Events").Class("MouseEvent").Extend(c).Constructor(function(d){c.constructor.apply(this,arguments);this.button=d.button;this.clicks=d.detail;this.pageX=d.clientX;this.pageY=d.clientY}).Members({getButton:function(){return this.button},getClicks:function(){return this.clicks},getPageX:function(){return this.pageX},getPageY:function(){return this.pageY}}).$()});define("Indigox.Web.JsLib.Controls.Events.TextEvent",["Indigox.Web.JsLib.Controls.Events.EventObject","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Events").Class("TextEvent").Extend(b).Constructor(function(d){b.constructor.apply(this,arguments);this.text=d}).Members({getText:function(){return this.text}}).$()});define("Indigox.Web.JsLib.Controls.Events.WheelEvent",["Indigox.Web.JsLib.Controls.Events.MouseEvent","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Events").Class("WheelEvent").Extend(b).Constructor(function(d){b.constructor.apply(this,arguments);this.deltaX=d.deltaX;this.deltaY=d.deltaY;this.deltaZ=d.deltaZ}).Members({getDeltaX:function(){return this.deltaX},getDeltaY:function(){return this.deltaY},getDeltaZ:function(){return this.deltaZ}}).$()});define("Indigox.Web.JsLib.Controls.Grid.EditableCell",["Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Controls.Grid.GridCell","Indigox.Web.JsLib.Controls.Binding.ChildControlBinding","Indigox.Web.JsLib.Controls.Binding.Binding","Indigox.Web.JsLib.Core"],function(f,h,e,b){var g="PropertyChanging",d="PropertyChanged",j="Init";var a=h.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Grid").Class("EditableCell").Extend(a).Constructor(function(k){a.constructor.apply(this,arguments);this.editingControl=null;this.cellType=0}).Static({TYPE_NORMAL:0,TYPE_UPDATE:1,TYPE_CANCEL:2}).Members({isEditable:function(){return true},init:function(){if(this.isInited()){debug.warn(this.id+"("+this.defaultName+") init more than twice. current state is "+this.stateText)}this.initChildren();this.setInited();this.fireListener(j)},load:function(){this.preLoad();this.setLoading();this._checkLoadTimeout();return f.when(this.doLoad()).then({handler:this.loadChildren,scope:this}).done({handler:this.setLoaded,scope:this})},initChildren:function(){if(this.getEditingControl()){this.getEditingControl().init()}},preLoadChildren:function(){if(this.getEditingControl()){this.getEditingControl().preLoad()}},loadChildren:function(){var k=[];if(this.getEditingControl()){k.push(this.getEditingControl().load())}return f.when(k)},unloadChildren:function(){if(this.getEditingControl()){this.getEditingControl().unload()}},setID:function(k){a.setID.apply(this,arguments);this.setControlID()},setControlID:function(){var k=this.getEditingControl();if(!k){return}k.setID(this.id+"."+k.getName()+":0")},setCellType:function(l){var k=this.cellType;this.fireListener(g,["cellType",l,k]);this.cellType=l;this.fireListener(d,["cellType",l,k])},getCellType:function(){return this.cellType},setEditingControl:function(l){if(this.editingControl==l){return}var k=this.editingControl;this.fireListener(g,["editingControl",l,k]);if(k!=null){k.removeListener(this);k.unload();k.setParent(null)}this.editingControl=l;if(l!=null){l.addListener(this);l.setParent(this);this.setControlID();f.when(this.catchUpLoadChild(l)).done({handler:function(){this.fireListener(d,["editingControl",l,k])},scope:this}).fail({handler:function(){debug.error([this.id," set editingControl failed."].join(""))},scope:this})}else{this.fireListener(d,["editingControl",l,k])}},catchUpLoadChild:function(k){if(this.isInited()){k.init()}if(this.isLoaded()){return k.load()}},getEditingControl:function(){return this.editingControl},setValue:function(k){a.setValue.apply(this,arguments);if((this.getEditingControl())&&(this.getEditingControl().getValue()!==k)){this.getEditingControl().setValue(k)}},getValue:function(){if(this.getEditingControl()){return this.getEditingControl().getValue()}else{return this.value}},getChildren:function(){if(this.editingControl){return[this.editingControl]}else{return[]}},getColumn:function(){return this.column},setColumn:function(k){if(this.column==k){return}this.column=k;if(this.column.getDefaultValue()){this.setValue(this.column.getDefaultValue())}if(this.column.getWidth()){this.setWidth(this.column.getWidth())}if(this.column.getValidateRules().length!==0){this.setValidateRules(this.column.getValidateRules())}if(this.column.getBinding()){this.setBinding(this.column.getBinding())}},setBinding:function(k){if(k instanceof b){this.binding=k}else{this.binding=new e();this.binding.configure(k)}},onPropertyChanging:function(n,m,l,k){this.fireListener(g,[m,l,k])},onPropertyChanged:function(n,m,l,k){this.fireListener(d,[m,l,k])}}).$()});define("Indigox.Web.JsLib.Controls.Grid.EditableRow",["Indigox.Web.JsLib.Utils.AsyncUtil","Indigox.Web.JsLib.Models.RecordManager","Indigox.Web.JsLib.Controls.Html.Button","Indigox.Web.JsLib.Controls.Html.TextBox","Indigox.Web.JsLib.Controllers.Controller","Indigox.Web.JsLib.Controllers.FormController","Indigox.Web.JsLib.Controls.Grid.EditableCell","Indigox.Web.JsLib.Controls.Grid.GridRow","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Core"],function(c,p,l,k,g,h,j,d,b){var n="edit",f="update";var q="Edit",o="Update";var a=d.prototype;var e=b.el;var m=Namespace("Indigox.Web.JsLib.Controls.Grid").Class("EditableRow").Extend(a).Constructor(function(){a.constructor.apply(this,arguments);this.cellConfigs={};this.editingRow=null;this.updateBtnCell=null;this.cancelBtnCell=null;this.cellMapping={};this.controller=new h()}).Members({registerEvents:function(){a.registerEvents.call(this);this.events.registerEvents(n,f)},registerListeners:function(){a.registerListeners.call(this);this.listeners.registerListeners(q,o)},setController:function(s){if(!(s instanceof g)){var r=s;s=Type.forAlias(r.controllerType).createInstance();s.configure(r)}if(this.controller){this.controller.setView(null)}this.controller=s;if(this.controller){this.controller.setView(this)}},getController:function(){return this.controller},setParent:function(r){a.setParent.apply(this,arguments);r.addListener(this)},load:function(){var s=a.load.apply(this,arguments);this.resetEdit();var r=document.body;e(r).addListener("mousedown",this.onMouseDown,document,[this]);return s},unload:function(){a.unload.apply(this,arguments);if(this.getController()){this.getController().unload()}},onMouseDown:function(s,u,t){var v=t.getVisible();if(v===true){var r=document.getElementById(t.id);if(!t.isParent(s,r)){c.invokeAsync(function(){t.update()})}}},isParent:function(s,r){while(!isNullOrUndefined(s)&&s.tagName.toUpperCase()!="BODY"){if(s==r||s.id.toUpperCase()=="UI-DATEPICKER-DIV"){return true}s=s.parentNode}return false},newCell:function(u){var s=new j();if(u){s.configure(u)}if(s.getEditingControl()==null){var v="textbox";var r={};if(u&&u.column&&this.cellConfigs[u.column.getField()]){v=this.cellConfigs[u.column.getField()].type;r=this.cellConfigs[u.column.getField()].config}var t=Type.forAlias(v).createInstance();t.configure(r);s.setEditingControl(t)}return s},buildCells:function(){var t=this.getParent().getColumns();var s,u;for(s=0,u=t.length;s<u;s++){var v=t[s].getField();var r=this.newCell({column:t[s],name:t[s].getField()});this.addCell(r);this.cellMapping[v]=r}},setCellConfigs:function(s){for(var r in s){this.setCellConfig(r,s[r])}},setCellConfig:function(u,t){this.cellConfigs[u]=t;if(this.cellMapping[u]){var r=this.cellMapping[u];if(t.type){var s=Type.forAlias(t.type).createInstance();s.configure(t.config);r.setEditingControl(s)}}},setCells:function(v){for(var t=0,u=v.length;t<u;t++){var s=v[t];var r=this.cellMapping[s.name];if(s.editingControl.controlType){var w=Type.forAlias(s.editingControl.controlType).createInstance();w.configure(s.editingControl);r.setEditingControl(w)}}},onRowClicked:function(r,s){if(this.editingRow!=s){this.edit(s)}},onRowRemoved:function(s,r,t){this.resetEdit()},edit:function(A){if(this.getVisible()===true){var s=this;setTimeout(function(){s.edit(A)},100);return}this.resetEdit();var v=A.getRecord();if(isNullOrUndefined(v)){return}this.editingRow=A;this.setVisible(true);var x=A.getCells();var u,r,z=[];for(u=0,r=x.length;u<r;u++){var t=x[u];if(!(t instanceof j)){var w=t.getColumn().getField();var y=this.cellMapping[w];if(!y){y=this.newCell({column:t.getColumn()});this.insertCell(u,y)}}}this.controller.bindRecord(this,v);this.fireListener(q,[A,z]);this.fireEvent(n,[A,z])},update:function(){var r=this.editingRow.getRecord();this.controller.updateRecord(this,r);this.resetEdit()},resetEdit:function(){this.editingRow=null;this.setVisible(false);this.clearValue()},getCells:function(){var r=[];for(var s in this.cellMapping){r.push(this.cellMapping[s])}return r},clearValue:function(){for(var r in this.cellMapping){this.cellMapping[r].setValue(null)}}}).$()});define("Indigox.Web.JsLib.Controls.Grid.GridCell",["Indigox.Web.JsLib.Controls.Control","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Grid").Class("GridCell").Extend(b).Constructor(function(){b.constructor.apply(this,arguments)}).Members({isEditable:function(){return false},getColumn:function(){return this.column},setColumn:function(d){if(this.column==d){return}this.column=d;if(this.column.getDefaultValue()){this.setValue(this.column.getDefaultValue())}if(this.column.getWidth()){this.setWidth(this.column.getWidth())}if(this.column.getValidateRules().length!==0){this.setValidateRules(this.column.getValidateRules())}if(this.column.getBinding()){this.setBinding(this.column.getBinding())}}}).$()});define("Indigox.Web.JsLib.Controls.Grid.GridColumn",["Indigox.Web.JsLib.Controls.Component","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(a,e,b){var d=a.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Grid").Class("GridColumn").Extend(d).Constructor(function(){this.caption="";this.hidden=false;this.field="";this.fieldType="string";this.controlType="lable";this.defaultValue="";this.width=null;this.binding=null;this.validateRules=new b()}).Members({getBinding:function(){return this.binding},setBinding:function(f){this.binding=f},getCaption:function(){return this.caption},setCaption:function(f){this.caption=f},getHidden:function(){return this.hidden},setHidden:function(f){this.hidden=f},getField:function(){return this.field},setField:function(f){this.field=f},getFiledType:function(){return this.fieldType},setFiledType:function(f){this.fieldType=f},getWidth:function(){return this.width},setWidth:function(f){this.width=f},getDefaultValue:function(){return this.defaultValue},setDefaultValue:function(f){this.defaultValue=f},getValidateRules:function(){return this.validateRules.toArray()},setValidateRules:function(f){if(isNullOrUndefined(f)){return}this.validateRules.clear();this.validateRules.addRange(f)}}).$()});define("Indigox.Web.JsLib.Controls.Grid.GridFooter",["Indigox.Web.JsLib.Controls.Grid.GridRow","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Grid").Class("GridFooter").Extend(c).Constructor(function(){c.constructor.apply(this,arguments)}).Members({}).$()});define("Indigox.Web.JsLib.Controls.Grid.GridHeader",["Indigox.Web.JsLib.Controls.Grid.GridRow","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Grid").Class("GridHeader").Extend(c).Constructor(function(){c.constructor.apply(this,arguments)}).Members({}).$()});define("Indigox.Web.JsLib.Controls.Grid.GridRow",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Controls.Grid.GridCell","Indigox.Web.JsLib.Controls.Binding.ChildControlBinding","Indigox.Web.JsLib.Controls.Container","Indigox.Web.JsLib.Core"],function(c,n,a,w,f,o){var l="cellAdded",x="cellAdded",h="cellRemoving",r="cellRemoved",s="clicked",u="selectedChanged";var p="CellAdding",v="CellAdded",b="CellRemoving",m="CellRemoved",q="Clicked",k="PropertyChanging",g="PropertyChanged",t="SelectedChanged",j="ValueChanged";var e=o.prototype;var d=Namespace("Indigox.Web.JsLib.Controls.Grid").Class("GridRow").Extend(e).Constructor(function(){e.constructor.apply(this,arguments);this.cells=new c();this.selected=false}).Members({registerEvents:function(){e.registerEvents.call(this);this.events.registerEvents(l,x,h,r,u,s)},registerListeners:function(){e.registerListeners.call(this);this.listeners.registerListeners(p,v,b,m,t,j,g,q)},preLoadChildren:function(){var z=this.getCells();for(var y=0,A=z.length;y<A;y++){z[y].preLoad()}},initChildren:function(){var z=this.getCells();for(var y=0,A=z.length;y<A;y++){z[y].init()}},loadChildren:function(){var z=this.getCells();var B=[];for(var y=0,A=z.length;y<A;y++){B.push(z[y].load())}return a.when(B)},unloadChildren:function(){var z=this.getCells();for(var y=0,A=z.length;y<A;y++){z[y].unload()}},newCell:function(z){var y=new w();if(z){y.configure(z)}return y},insertCell:function(z,y){if(!(y instanceof w)){y=this.newCell(y)}this.cells.insert(z,y);y.addListener(this);this.updateChildrenID(this.cells.toArray(),z);y.setParent(this);this.fireListener(p,[z,y]);this.fireEvent(l,[z,y]);a.when(this.catchUpLoadChild(y)).done({handler:function(){this.fireListener(v,[z,y]);this.fireEvent(x,[z,y])},scope:this}).fail({handler:function(){debug.error([this.id,"insertCell ",y.id," failed."].join(""))},scope:this})},addCell:function(y){var z=this.getCells();this.insertCell(z.length,y)},removeCell:function(y){var A=this.getCells();var z=n.indexOf(A,y);this.cells.remove(y);this.fireEvent(r,[z,y]);this.fireListener(m,[z,y])},clearCells:function(){var y=this.getCells();var z=null,A=null;for(z=0,A=y.length;z<A;z++){this.removeCell(y[z])}},setCells:function(y){this.clearCells();var z,A;for(z=0,A=y.length;z<A;z++){this.addCell(y[z])}},getCells:function(){return this.cells.toArray()},getCell:function(A){var z=this.getCells();if(isInt(A)){return z[A]}else{for(var B=0,C=z.length;B<C;B++){var y=z[B];if(y.getColumn().getField()==A){return y}}}},setSelected:function(z){if(isNullOrUndefined(z)||z===this.selected){return}var y=this.selected;this.fireListener(k,["selected",z,y]);this.selected=z;this.fireListener(g,["selected",z,y]);this.fireListener(t,[z]);this.fireEvent(u,[z])},getSelected:function(){return this.selected},setID:function(y){e.setID.call(this,y);this.updateAllChildrenID(this.getCells())},onPropertyChanged:function(B,A,z,y){if(A==="value"){this.fireListener(j,[B,z])}},onRemove:function(){var y=this.getParent();y.getController().removeRecord(this.getRecord());this.setRecord(null)},click:function(){this.setSelected(true);this.fireListener(q,[this])},find:function(z){var D=new c();var y=this.getCells();var C=this.getCells();var B,E;for(B=0,E=y.length;B<E;B++){if(y[B].name==z){D.add(y[B])}}for(B=0,E=C.length;B<E;B++){if(C[B].find){var A=C[B].find(z);if(A){D.addRange(A)}}}if(D.size()){return D.toArray()}return null},getBinding:function(){if(!this.binding){this.binding=new f();this.binding.setChildProperty("cells")}return this.binding},setBinding:function(){throw new Error("Can't set DataItem's binding property.")}}).$()});define("Indigox.Web.JsLib.Controls.Grid.GridView",["Indigox.Web.JsLib.Controllers.Controller","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Controls.Html.Button","Indigox.Web.JsLib.Controls.Grid.GridCell","Indigox.Web.JsLib.Controls.Grid.GridColumn","Indigox.Web.JsLib.Controls.Grid.GridFooter","Indigox.Web.JsLib.Controls.Grid.GridHeader","Indigox.Web.JsLib.Controls.Grid.GridRow","Indigox.Web.JsLib.Controls.Grid.EditableRow","Indigox.Web.JsLib.Controls.Grid.EditableCell","Indigox.Web.JsLib.Controls.Grid.SummaryRow","Indigox.Web.JsLib.Controls.Grid.Toolbar","Indigox.Web.JsLib.Controls.Selection.RowMode","Indigox.Web.JsLib.Controls.Container","Indigox.Web.JsLib.Core"],function(l,p,L,j,G,g,e,A,t,s,z,w,x,n,S,b){var C="rowAdding",h="rowAdded",y="rowRemoving",K="rowRemoved",d="rowSelectedChanged",r="footerAdding",P="footerAdded",Q="footerRemoving",H="footerRemoved",m="summaryValueChanged";var k="PropertyChanging",o="PropertyChanged",a="RowAdding",f="RowAdded",N="RowRemoving",M="RowRemoved",B="RowSelectedChanged",O="RowClicked",E="FooterAdding",v="FooterAdded",c="FooterRemoving",q="FooterRemoved",J="ValueChanged",F="SummaryValueChanged",R="EnterFullView",I="LeaveFullView";var u=b.prototype;var D=Namespace("Indigox.Web.JsLib.Controls.Grid").Class("GridView").Extend(u).Constructor(function(){u.constructor.apply(this,arguments);this.columns=new p();this.rows=new p();this.footers=new p();this.header=new t();this.controller=null;this.allowDeselect=false;this.summary=null;this.editable=false;this.editCellConfigs=null}).Members({registerEvents:function(){u.registerEvents.call(this);this.events.registerEvents(C,h,y,K,r,P,Q,H,d,m)},registerListeners:function(){u.registerListeners.call(this);this.listeners.registerListeners(a,f,N,M,B,E,v,c,q,J,O,F,R,I)},init:function(){this.preInit();u.init.apply(this,arguments)},preInit:function(){if(!this.getHeader()){this.setHeader(this.newHeader())}},load:function(){this.setSelMode(this.createSelectionMode());return u.load.apply(this,arguments)},doLoad:function(U){var T=new j();if(this.getController()&&this.getController().getAutoLoad()==true){this.getController().load(function(){T.resolve()})}else{T.resolve()}return T.promise()},unload:function(){u.unload.apply(this,arguments);if(this.getController()){this.getController().unload()}},initChildren:function(){this.getHeader().init();var U=this.getRows();for(var T=0,V=U.length;T<V;T++){U[T].init()}U=this.getFooters();for(T=0,V=U.length;T<V;T++){U[T].init()}},preLoadChildren:function(){this.getHeader().preLoad();var U=this.getRows();for(var T=0,V=U.length;T<V;T++){U[T].preLoad()}U=this.getFooters();for(T=0,V=U.length;T<V;T++){U[T].preLoad()}},loadChildren:function(){var V=[];V.push(this.getHeader().load());var U=this.getRows();for(var T=0,W=U.length;T<W;T++){V.push(U[T].load())}U=this.getFooters();for(T=0,W=U.length;T<W;T++){V.push(U[T].load())}return j.when(V)},unloadChildren:function(){this.getHeader().unload();var U=this.getRows();for(var T=0,V=U.length;T<V;T++){U[T].unload()}U=this.getFooters();for(T=0,V=U.length;T<V;T++){U[T].unload()}},setController:function(U){if(!(U instanceof l)){var T=U;U=Type.forAlias(T.controllerType).createInstance();U.configure(T)}if(this.controller){this.controller.setView(null)}this.controller=U;if(this.controller){this.controller.setView(this)}if(this.isLoaded()&&this.controller.autoLoad===true){this.controller.load()}},getController:function(){return this.controller},newHeader:function(){var Y=new t();var V=this.getColumns();var U=null,X=null,W=null;for(U=0,X=V.length;U<X;U++){W=V[U];if(!W.getHidden()){var T=new g();T.setValue(W.getCaption());T.setColumn(W);Y.addCell(T)}}return Y},setHeader:function(U){if(this.getHeader()==U){return}if(!(U instanceof t)){return}var T=this.getHeader();this.fireListener(k,["header",U,T]);if(T){T.removeListener(this);T.unload();T.setParent(null)}this.header=U;if(U){U.addListener(this);U.setID(this.id+".header:0");U.setParent(this);j.when(this.catchUpLoadChild(U)).done({handler:function(){this.fireListener(o,["header",U,T])},scope:this}).fail({handler:function(){debug.error([this.id," set header failed."].join(""))},scope:this})}else{this.fireListener(o,["header",U,T])}},getHeader:function(){return this.header},newSummaryRow:function(Y){var Z=new x();Z.setSummaryColumn(Y);var V=this.getColumns();var U=null,X=V.length,W=null;if(X<=0){throw new Error("Can not create new GridRow without any columns!")}for(U=0;U<X;U++){W=V[U];if(!W.getHidden()){var T=new g(W.getField());T.setColumn(W);Z.addCell(T)}}return Z},setSummary:function(V){if(this.getSummary()==V){return}this.summary=V;var T=this.newSummaryRow(V);var U=this.getFooters();if(U.length>0&&U[0] instanceof x){this.removeFooter(U[0])}this.insertFooter(0,T)},getSummary:function(){return this.summary},onSummaryValueChanged:function(U,V,T){this.fireListener(F,[V,T])},getEditCellConfigs:function(){return this.editCellConfigs},setEditCellConfigs:function(W){this.editCellConfigs=W;var V=this.getFooters();var T=null,U=null;for(T=0,U=V.length;T<U;T++){var X=V[T];if(X instanceof z){X.configure({cellConfigs:W})}}},getEditableCells:function(){return this.editableCells},setEditableCells:function(U){if(U.length===0){return}this.editableCells=U;var T=this.getEditableRow();if(!T){T=new z();this.addFooter(T);T.buildCells()}T.configure({cells:U})},getEditableRow:function(){var V=this.getFooters();for(var T=0,U=V.length;T<U;T++){var W=V[T];if(W instanceof z){return W}}return null},setEditable:function(Y){if(isNullOrUndefined(Y)){return}if(this.editable===Y){return}this.editable=Y;var X=this.getFooters();var U=null,W=null,Z=false,T=false;for(U=0,W=X.length;U<W;U++){var aa=X[U];if(aa instanceof z){Z=true;if(Y===false){this.removeFooter(aa)}}if(aa instanceof n){T=true;if(Y===false){this.removeFooter(aa)}}}if(Z===false&&Y===true){var V=new z();this.addFooter(V);V.buildCells()}if(T===false&&Y===true){this.addFooter(new n())}this.fireListener(o,["editable",Y])},getEditable:function(){return this.editable},addColumn:function(V){var T=this.getColumns();if(!(V instanceof e)){var U=new e();U.configure(V);V=U}this.columns.insert(T.length,V)},setColumns:function(V){var T=null,U=null;for(T=0,U=V.length;T<U;T++){this.addColumn(V[T])}this.setHeader(this.newHeader())},getColumns:function(){return this.columns.toArray()},newItem:function(T){return this.newRow(T)},insertItem:function(T,U){this.insertRow(T,U)},getItems:function(){return this.getRows()},removeItem:function(T){this.removeRow(T)},newRow:function(U){var ab=new s();var W=this.getColumns();var X=null,T=W.length,V=null;if(T<=0){throw new Error("Can not create new GridRow without any columns!")}for(X=0;X<T;X++){V=W[X];if(!V.getHidden()){var aa=new g(V.getField());aa.setColumn(V);ab.addCell(aa)}}if(U){ab.configure(U)}if(this.editable){var Y=new G();var Z=new w();Z.setEditingControl(Y);Z.setCellType(w.TYPE_CANCEL);ab.addCell(Z);Y.addListener(ab,{onClicked:ab.onRemove})}return ab},addRow:function(U){var T=this.getRows();this.insertRow(T.length,U)},addRows:function(T){var U=null,V=null;for(U=0,V=T.length;U<V;U++){this.addRow(T[U])}},insertRow:function(T,V){var U=this.getRows();if(T>U.length){throw new Error("out of range")}if(!(V instanceof s)){V=this.GridRow(V)}V.setParent(this);this.rows.insert(T,V);this.updateChildrenID(this.rows.toArray(),T);V.addListener(this,{onSelectedChanged:this.onRowSelectedChanged,onClicked:this.onRowClicked,onValueChanged:this.onValueChanged});this.fireListener(a,[T,V]);this.fireEvent(C,[T,V]);j.when(this.catchUpLoadChild(V)).done({handler:function(){this.fireListener(f,[T,V]);this.fireEvent(h,[T,V])},scope:this}).fail({handler:function(){debug.error("insertRow "+V.id+" failed.")},scope:this})},removeRow:function(V){var U=this.getRows();var T=L.indexOf(U,V);this.rows.removeAt(T);this.updateChildrenID(this.rows.toArray(),T);V.removeListener(this);this.fireEvent(K,[T,V]);this.fireListener(M,[T,V])},clearRows:function(){var V=this.getRows();var T=null,U=null;for(T=0,U=V.length;T<U;T++){this.removeRow(V[T])}},setRows:function(T){this.clearRows();this.addRows(T)},getRows:function(){return this.rows.toArray()},getFooters:function(){return this.footers.toArray()},clearFooters:function(){var V=this.getFooters();var T=null,U=null;for(T=0,U=V.length;T<U;T++){this.removeFooter(V[T])}},removeFooter:function(V){var U=this.getFooters();var T=L.indexOf(U,V);this.footers.removeAt(T);this.fireEvent(H,[T,V]);this.fireListener(q,[T,V])},setFooters:function(T){this.clearRows();this.addFooters(T)},addFooters:function(T){var U=null,V=null;for(U=0,V=T.length;U<V;U++){this.addFooter(T[U])}},addFooter:function(U){var T=this.getFooters();this.insertFooter(T.length,U)},insertFooter:function(T,V){var U=this.getFooters();if(T>U.length){throw new Error("out of range when insert footer")}V.setParent(this);this.footers.insert(T,V);this.updateChildrenID(this.footers.toArray(),T);V.addListener(this);this.fireListener(E,[T,V]);this.fireEvent(r,[T,V]);j.when(this.catchUpLoadChild(V)).done({handler:function(){this.fireListener(v,[T,V]);this.fireEvent(P,[T,V])},scope:this}).fail({handler:function(){debug.error("insertFooter "+V.id+" failed.")},scope:this});this.addListener(V)},setValue:function(T){return},getValue:function(){var W=this.getRows();var T=[];var U=null,V=null;for(U=0,V=W.length;U<V;U++){T.push(W[U].getRecord().data)}return T},setID:function(T){u.setID.call(this,T);this.updateAllChildrenID(this.getRows());this.updateAllChildrenID(this.getFooters());if(this.getHeader()){this.getHeader().setID(T+".header:0")}},getCellsByField:function(X){var T=[];var W=this.getRows();for(var U=0,V=W.length;U<V;U++){T.push(W[U].getCell(X))}return T},onRowSelectedChanged:function(U,T){this.fireListener(B,[U,T]);this.fireEvent(d,[U,T])},onRowClicked:function(T){this.fireListener(O,[T])},onValueChanged:function(V,T,U){this.fireListener(J,[V,T,U])},createSelectionMode:function(){var U=this.mode?this.mode:"SINGLE";var T=isNullOrUndefined(this.allowDeselect)?"true":this.allowDeselect;var V=new S({mode:U,allowDeselect:T});return V},getSelMode:function(){return this.selMode},setSelMode:function(T){this.selMode=T;if(this.selMode){this.selMode.bindControl(this)}},getMode:function(){return this.mode},setMode:function(T){this.mode=T;this.getSelMode().setSelectionMode(T)},getAllowDeselect:function(){return this.allowDeselect},setAllowDeselect:function(T){this.allowDeselect=T;this.getMode().setAllowDeselect(T)},deselectRow:function(U){var W=this.getRows();var T=0,V=W.length;for(;T<V;T++){if(W[T].getRecord()===U){W[T].setSelected(false)}}},selectRow:function(U){var W=this.getRows();var T=0,V=W.length;for(;T<V;T++){if(W[T].getRecord()===U){W[T].setSelected(true)}}},enterFullView:function(){this.fireListener(R)},leaveFullView:function(){this.fireListener(I)}}).$()});define("Indigox.Web.JsLib.Controls.Grid",["Indigox.Web.JsLib.Controls.Grid.EditableCell","Indigox.Web.JsLib.Controls.Grid.EditableRow","Indigox.Web.JsLib.Controls.Grid.GridCell","Indigox.Web.JsLib.Controls.Grid.GridColumn","Indigox.Web.JsLib.Controls.Grid.GridFooter","Indigox.Web.JsLib.Controls.Grid.GridHeader","Indigox.Web.JsLib.Controls.Grid.GridRow","Indigox.Web.JsLib.Controls.Grid.GridView","Indigox.Web.JsLib.Controls.Grid.SummaryRow","Indigox.Web.JsLib.Controls.Grid.Toolbar"],function(b,g,j,c,k,f,a,h,e,d){return{EditableCell:b,EditableRow:g,GridCell:j,GridColumn:c,GridFooter:k,GridHeader:f,GridRow:a,GridView:h,SummaryRow:e,Toolbar:d}});define("Indigox.Web.JsLib.Controls.Grid.SummaryRow",["Indigox.Web.JsLib.Controls.Grid.GridRow","Indigox.Web.JsLib.Utils.NumberUtil","Indigox.Web.JsLib.Core"],function(d,f){var c="summaryValueChanged";var b="SummaryValueChanged";var e=d.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Grid").Class("SummaryRow").Extend(e).Constructor(function(){e.constructor.apply(this,arguments);this.summaryColumn=null}).Members({registerEvents:function(){e.registerEvents.call(this);this.events.registerEvents(c)},registerListeners:function(){e.registerListeners.call(this);this.listeners.registerListeners(b)},load:function(){e.load.apply(this,arguments);this.addUp()},setSummaryColumn:function(g){this.summaryColumn=g},getSummaryColumn:function(){return this.summaryColumn},onRowRemoved:function(h,g,j){this.addUp()},onRowAdded:function(h,g,j){this.addUp()},onValueChanged:function(j,k,g,h){if(g.getColumn().getField() in this.summaryColumn){this.addUp(g.getColumn().getField())}},addUp:function(j){var h;if(isNullOrUndefined(j)){for(var g in this.summaryColumn){if(g===undefined){continue}h=this.summaryColumn[g];this.setSummaryValue(g,h)}}else{if(j in this.summaryColumn){h=this.summaryColumn[j];this.setSummaryValue(j,h)}}},setSummaryValue:function(k,j){var h=this.getCell(k).getValue();var g=this.getSummaryValue(k,j);if(isNullOrUndefined(g)){g=""}if(h==g){return}this.getCell(k).setValue(g);this.fireListener(b,[k,g]);this.fireEvent(c,[k,g])},getSummaryValue:function(h,g){if(g){if(isFunction(g)){return null}switch(g){case"count":return this.getCount(h);case"min":return this.getMin(h);case"max":return this.getMax(h);case"sum":return this.getSum(h);case"average":return this.getAverage(h);default:return""}}},getCount:function(j){var g=this.getParent();var h=g.getRows().length;return h},getMin:function(n){var l=this.getParent();var h=l.getCellsByField(n);var k=null;var j=0,m=h.length;for(;j<m;j++){var g=h[j];if(k==null||k>g.getValue()){k=g.getValue()}}return k},getMax:function(n){var l=this.getParent();var j=l.getCellsByField(n);var h=null,g=null;var k=0,m=j.length;for(;k<m;k++){g=j[k];if(h==null||h<g.getValue()){h=g.getValue()}}return h},getSum:function(n){var h=this.getParent().getCellsByField(n);var k=parseFloat("0"),g=null;var j=0,l=h.length;for(;j<l;j++){var m=h[j].getValue();if(m===""){m=0}if(!isNullOrUndefined(m)&&!isNaN(m)){k=f.add(k,m)}}return k},getAverage:function(j){var g=this.getSum(j);var h=this.getCount(j);return g/h},onPropertyChanged:function(k,j,h,g){}}).$()});define("Indigox.Web.JsLib.Controls.Grid.Toolbar",["Indigox.Web.JsLib.Controls.Container","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Grid").Class("Toolbar").Extend(c).Constructor(function(){c.constructor.apply(this,arguments)}).Members({addRow:function(){var d=this.getParent();d.getController().insertRecord(d.getRows().length);var f=d.getRows();var e=f.length;f[e-1].click()},setParent:function(d){c.setParent.apply(this,arguments);if(this.getParent()){if(this.getParent().isInited()){this.init()}if(this.getParent().isLoaded()){this.load()}}}}).$()});define("Indigox.Web.JsLib.Controls.Html.Accordion",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Controls.Html.Button","Indigox.Web.JsLib.Controls.Html.AccordionItem","Indigox.Web.JsLib.Controls.Html.ListControl","Indigox.Web.JsLib.Core"],function(j,f,k,d,c,b){var a=b.prototype;var h="PropertyChanging",e="PropertyChanged";var g=Namespace("Indigox.Web.JsLib.Controls.Html").Class("Accordion").Extend(a).Constructor(function(){a.constructor.apply(this,arguments);this.controller=null;this.orientation=g.ORIENTATION_VERTICAL;this.autoCollapse=true}).Static({ORIENTATION_HORIZONTAL:0,ORIENTATION_VERTICAL:1}).Members({setAutoCollapse:function(m){var l=this.autoCollapse;this.fireListener(h,["autoCollapse",m,l]);this.autoCollapse=m;this.fireListener(e,["autoCollapse",m,l])},getAutoCollapse:function(){return this.autoCollapse},setOrientation:function(m){var l=this.orientation;this.fireListener(h,["orientation",m,l]);this.orientation=m;this.fireListener(e,["orientation",m,l])},getOrientation:function(){return this.orientation},expandItem:function(o){if(this.getAutoCollapse()){var l=this.getItems();var m,n;for(m=0,n=l.length;m<n;m++){if(l[m]!==o){l[m].collapse()}}}o.expand()},newItem:function(l){var m=new c();if(l){m.configure(l)}return m},onPropertyChanged:function(o,n,m,l){if((n==="collapsed")&&(!m)){this.expandItem(o)}}}).$()});define("Indigox.Web.JsLib.Controls.Html.AccordionItem",["Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Controls.Html.Label","Indigox.Web.JsLib.Controls.Html.CheckBox","Indigox.Web.JsLib.Controls.Html.Button","Indigox.Web.JsLib.Controls.Html.DataList","Indigox.Web.JsLib.Controls.Html.ItemControl","Indigox.Web.JsLib.Core"],function(j,n,h,d,f,e,k){var b=k.prototype;var a="collapsed",l="expanded";var m="PropertyChanging",g="PropertyChanged";var c=Namespace("Indigox.Web.JsLib.Controls.Html").Class("AccordionItem").Extend(b).Constructor(function(){b.constructor.apply(this,arguments);this.text=null;this.collapsed=true}).Members({registerEvents:function(){b.registerEvents.call(this);this.events.registerEvents(a,l)},setParent:function(p){var o=this.getParent();b.setParent.apply(this,arguments);if(isNullOrUndefined(p)){this.removeListener(o)}else{this.addListener(this.getParent())}},setText:function(p){var o=this.text;this.fireListener(m,["text",p,o]);this.text=p;this.fireListener(g,["text",p,o])},getText:function(){return this.text},setCollapsed:function(p){if(this.collapsed===p){return}var o=this.collapsed;this.fireListener(m,["collapsed",p,o]);this.collapsed=p;this.fireListener(g,["collapsed",p,o])},getCollapsed:function(){return this.collapsed},collapse:function(){this.setCollapsed(true);this.fireEvent(a,[this.getCollapsed()])},expand:function(){this.setCollapsed(false);this.fireEvent(l,[this.getCollapsed()])},toggleCollapse:function(){if(this.getCollapsed()){this.expand()}else{this.collapse()}}}).$()});define("Indigox.Web.JsLib.Controls.Html.AnimatedList",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Controls.Template","Indigox.Web.JsLib.Controls.Html.DataItem","Indigox.Web.JsLib.Controls.Html.DataList","Indigox.Web.JsLib.Core"],function(c,e,b,d){var f=d.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Html").Class("AnimatedList").Extend(f).Constructor(function(){f.constructor.apply(this,arguments)}).Members({}).$()});define("Indigox.Web.JsLib.Controls.Html.AutoCompleteBox",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Utils.DelayedTask","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Controls.Html.ListControl","Indigox.Web.JsLib.Controls.Html.AutoCompleteItem","Indigox.Web.JsLib.Controls.Html.CompleteItem","Indigox.Web.JsLib.Core"],function(h,d,s,j,w,b,r,n,q){var g=r.prototype;var e="completeItemAdding",y="completeItemAdded",k="completeItemRemoving",p="completeItemRemoved",v="itemSelectedChanged";var t="CompleteItemAdding",m="CompleteItemAdded",f="CompleteItemRemoving",u="CompleteItemRemoved",a="ItemSelectedChanged",c="IndexReset",o="PropertyChanging",l="PropertyChanged";var x=Namespace("Indigox.Web.JsLib.Controls.Html").Class("AutoCompleteBox").Extend(g).Constructor(function(){this.completeItems=new d();this.delayedTask=null;this.multi=false;this.itemIndex=-1;this.showItems=false;g.constructor.apply(this,arguments)}).Members({registerEvents:function(){g.registerEvents.call(this);this.events.registerEvents(e,y,k,p,v)},registerListeners:function(){g.registerListeners.call(this);this.listeners.registerListeners(t,m,f,u,a,c)},clearItems:function(){g.clearItems.apply(this,arguments)},getText:function(){return this.text},setText:function(A){if(isNullOrUndefined(A)){return}var z=this.text;this.fireListener(o,["text",A,z]);this.text=A;this.fireListener(l,["text",A,z])},getShowItems:function(){return this.showItems},setShowItems:function(A){if(isNullOrUndefined(A)){return}var z=this.showItems;this.fireListener(o,["showItems",A,z]);this.showItems=A;this.fireListener(l,["showItems",A,z])},getValue:function(){var A=this.getCompleteItems();var z=[],C;for(var B in A){C=A[B];z.push({value:C.getValue(),text:C.getText()})}return z},setValue:function(C){this.clearCompleteItem();if(isNullOrUndefined(C)){return}if(Object.prototype.toString.call(C)!="[object Array]"){C=[C]}var B=0;for(var A in C){var z=this.newCompleteItem(C[A].text,C[A].value);this.insertCompleteItem(B,z);B=B+1}},getMulti:function(){return this.multi},setMulti:function(A){var z=this.multi;this.fireListener(o,["multi",A,z]);this.multi=A;this.fireListener(l,["multi",A,z])},newItem:function(z){var A=new n();A.configure(z);return A},newCompleteItem:function(B,A){var z=new q();z.setText(B);z.setValue(A);return z},getCompleteItems:function(){return this.completeItems.toArray()},insertCompleteItem:function(A,B){var z=this.getCompleteItems();if(A>z.length){throw new Error("out of range")}this.completeItems.insert(A,B);B.setParent(this);B.addListener(this);this.updateChildrenID(this.completeItems.toArray(),A);this.fireListener(t,[A,B]);this.fireEvent(e,[A,B]);b.when(this.catchUpLoadChild(B)).done({handler:function(){this.fireListener(m,[A,B]);this.fireEvent(y,[A,B])},scope:this}).fail({handler:function(){debug.error([this.id,"insertNode ",B.id," failed."].join(""))},scope:this})},removeCompleteItem:function(B){var z=this.getCompleteItems();var A=s.indexOf(z,B);this.fireListener(f,[A,B]);this.fireEvent(p,[A,B]);this.completeItems.remove(B);B.unload();B.setParent(null);this.updateChildrenID(this.completeItems.toArray(),A);this.fireEvent(p,[A,B]);this.fireListener(u,[A,B])},clearCompleteItem:function(){var z=this.getCompleteItems();var A=null,B=null;for(A=0,B=z.length;A<B;A++){this.removeCompleteItem(z[A])}},search:function(A,z){if(this.delayedTask){this.delayedTask.cancel()}this.delayedTask=new w(function(B){this.doSearch(B,z);this.delayedTask=null},this,[A,z]);this.delayedTask.delay(500)},doSearch:function(C,z){this.fireListener(c);this.setShowItems(true);var A=this.getController();A.clearModel();if(C==""){this.setShowItems(false);return false}var B=new j(this.afterLoadItems,this,[C,z]);A.setDefaultParamValue(C);A.load(B)},afterLoadItems:function(B,z){var A=this.getItems();if(A.length>0){if(z==true){this.onSelectedChanged(A[0])}}else{if(z==true){var C=this.newItem({text:B,value:""});this.onSelectedChanged(C)}this.setShowItems(false)}},deactiveItem:function(A){if(A<0){return}var z=this.getItems();if(A>z.length){return}z[A].mark(false)},activeItem:function(A){if(A<0){return}var z=this.getItems();if(A>z.length){return}z[A].mark(true)},onSelectedChanged:function(A){if(this.getMulti()==false){this.clearCompleteItem()}var z=this.newCompleteItem(A.getText(),A.getValue());this.insertCompleteItem(this.completeItems.size(),z);this.getController().clearModel();this.setText("");this.setShowItems(false);this.fireListener(a,[A,true]);this.fireEvent(v,[A,true])}}).$()});define("Indigox.Web.JsLib.Controls.Html.AutoCompleteItem",["Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Controls.Html.ItemControl","Indigox.Web.JsLib.Core"],function(e,b){var h="selectedChanged";var c="PropertyChanging",d="PropertyChanged",g="SelectedChanged";var f=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Html").Class("AutoCompleteItem").Extend(f).Constructor(function(){this.isActive=false;f.constructor.apply(this,arguments)}).Members({registerListeners:function(){f.registerListeners.call(this);this.listeners.registerListeners(d)},getIsActive:function(){return this.isActive},setIsActive:function(k){if(isNullOrUndefined(k)){return}var j=this.isActive;this.fireListener(c,["isActive",k,j]);this.isActive=k;this.fireListener(d,["isActive",k,j])},getText:function(){return this.text},setText:function(k){if(isNullOrUndefined(k)){return}var j=this.text;this.fireListener(c,["text",k,j]);this.text=k;this.fireListener(d,["text",k,j])},select:function(){this.fireListener(g,[])},mark:function(j){this.isActive=true;this.fireListener(d,["isActive",j,!j])}}).$()});define("Indigox.Web.JsLib.Controls.Html.BadgeLinkMenuItem",["Indigox.Web.JsLib.Controls.Html.LinkMenuItem","Indigox.Web.JsLib.Core"],function(c){var e=c.prototype;var a="PropertyChanging",b="PropertyChanged";var d=Namespace("Indigox.Web.JsLib.Controls.Html").Class("BadgeLinkMenuItem").Extend(e).Constructor(function(){e.constructor.apply(this,arguments);this.badge=null}).Members({getBadge:function(){return this.badge},setBadge:function(g){if(isNullOrUndefined(g)){return}var f=this.badge;this.fireListener(a,["badge",g,f]);this.badge=g;this.fireListener(b,["badge",g,f])}}).$()});define("Indigox.Web.JsLib.Controls.Html.BlankDropDownItem",["Indigox.Web.JsLib.Controls.Html.DropDownItem","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Html").Class("BlankDropDownItem").Extend(c).Constructor(function(){c.constructor.apply(this,arguments);this.text=""}).$()});define("Indigox.Web.JsLib.Controls.Html.Button",["Indigox.Web.JsLib.Controls.Control","Indigox.Web.JsLib.Core"],function(d){var f="clicked";var b="PropertyChanging",c="PropertyChanged",g="Clicked";var e=d.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Html").Class("Button").Extend(e).Constructor(function(){e.constructor.apply(this,arguments);this.displayMode=a.DISPLAYMODE_TEXT_AND_ICON;this.icon=null}).Static({DISPLAYMODE_TEXT_AND_ICON:0,DISPLAYMODE_TEXT_ONLY:1,DISPLAYMODE_ICON_ONLY:2}).Members({registerEvents:function(){e.registerEvents.call(this);this.events.registerEvents(f)},registerListeners:function(){e.registerListeners.call(this);this.listeners.registerListeners(g)},setDisplayMode:function(j){var h=this.displayMode;this.fireListener(b,["displayMode",j,h]);this.displayMode=j;this.fireListener(c,["displayMode",j,h])},getDisplayMode:function(){return this.displayMode},setIcon:function(j){var h=this.icon;this.fireListener(b,["icon",j,h]);this.icon=j;this.fireListener(c,["icon",j,h])},getIcon:function(){return this.icon},click:function(){this.fireListener(g);this.fireEvent(f)}}).$()});define("Indigox.Web.JsLib.Controls.Html.ButtonMenuItem",["Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Controls.Html.Label","Indigox.Web.JsLib.Controls.Html.CheckBox","Indigox.Web.JsLib.Controls.Html.Button","Indigox.Web.JsLib.Controls.Html.Menu","Indigox.Web.JsLib.Controls.Html.MenuItem","Indigox.Web.JsLib.Core"],function(h,n,g,c,d,f,l){var b="clicked";var k="PropertyChanging",e="PropertyChanged",m="Clicked";var a=l.prototype;var j=Namespace("Indigox.Web.JsLib.Controls.Html").Class("ButtonMenuItem").Extend(a).Constructor(function(){a.constructor.apply(this,arguments);this.displayMode=d.DISPLAYMODE_TEXT_AND_ICON;this.icon=null}).Static({DISPLAYMODE_TEXT_AND_ICON:0,DISPLAYMODE_TEXT_ONLY:1,DISPLAYMODE_ICON_ONLY:2}).Members({registerEvents:function(){a.registerEvents.call(this);this.events.registerEvents(b)},registerListeners:function(){a.registerListeners.call(this);this.listeners.registerListeners(m)},setDisplayMode:function(p){var o=this.displayMode;this.fireListener(k,["displayMode",p,o]);this.displayMode=p;this.fireListener(e,["displayMode",p,o])},getDisplayMode:function(){return this.displayMode},setIcon:function(p){var o=this.icon;this.fireListener(k,["icon",p,o]);this.icon=p;this.fireListener(e,["icon",p,o])},getIcon:function(){return this.icon},click:function(){this.fireListener(m);this.fireEvent(b)}}).$()});define("Indigox.Web.JsLib.Controls.Html.CheckBox",["Indigox.Web.JsLib.Controls.Html.FieldControl","Indigox.Web.JsLib.Core"],function(h){var c="clicked",g="checkChanged",k="textChanged";var j="PropertyChanging",f="PropertyChanged",e="CheckChanged";function a(l){if(l==="1"||l===1||l==="true"||l===true){return true}else{if(l==="0"||l===0||l==="false"||l===false){return false}else{return !!l}}}var b=h.prototype;var d=Namespace("Indigox.Web.JsLib.Controls.Html").Class("CheckBox").Extend(b).Constructor(function(){b.constructor.apply(this,arguments);this.checked=false;this.text="";this.rawValue=""}).Members({registerEvents:function(){b.registerEvents.call(this);this.events.registerEvents(c,g,k)},registerListeners:function(){b.registerListeners.call(this);this.listeners.registerListeners(e)},setReadonly:function(l){b.setReadonly.apply(this,arguments);this.setEnable(!l)},setRawValue:function(l){if(isNullOrUndefined(l)){return}this.rawValue=l},getRawValue:function(){return this.rawValue},setValue:function(m){m=a(m);var l=this.getChecked();this.fireListener(j,["value",m,l]);this.setChecked(m);this.fireListener(f,["value",m,l])},getValue:function(){return this.getChecked()},getChecked:function(){return this.checked},setChecked:function(m){if(isNullOrUndefined(m)||m===this.checked){return}var l=this.checked;this.fireListener(j,["checked",m,l]);this.checked=m;this.fireListener(f,["checked",m,l]);this.fireListener(e,[this.checked]);this.fireEvent(g,[this.checked])},toggleChecked:function(){this.setChecked(!this.getChecked())},getText:function(){return this.text},setText:function(m){if(isNullOrUndefined(m)){return}var l=this.text;this.fireListener(j,["text",m,l]);this.text=m;this.fireListener(f,["text",m,l]);this.fireEvent(k,[this.text])},click:function(){if(this.enable){this.toggleChecked();this.fireEvent(c)}}}).$()});define("Indigox.Web.JsLib.Controls.Html.CheckBoxItem",["Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Controls.Html.ItemControl","Indigox.Web.JsLib.Core"],function(e,b){var h="selectedChanged";var c="PropertyChanging",d="PropertyChanged",g="SelectedChanged";var f=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Html").Class("CheckBoxItem").Extend(f).Constructor(function(){f.constructor.apply(this,arguments);this.checkBox=null}).Members({registerEvents:function(){f.registerEvents.call(this);this.events.registerEvents(h)},registerListeners:function(){f.registerListeners.call(this);this.listeners.registerListeners(g)},initChildren:function(){if(this.getCheckBox()){this.getCheckBox().init()}},preLoadChildren:function(){if(this.getCheckBox()){this.getCheckBox().preLoad()}},loadChildren:function(){if(this.getCheckBox()){return this.getCheckBox().load()}return null},unloadChildren:function(){if(this.getCheckBox()){this.getCheckBox().unload()}},setValue:function(k){var j=this.getCheckBox().getRawValue();this.fireListener(c,["value",k,j]);this.getCheckBox().setRawValue(k);k=this.getCheckBox().getRawValue();this.fireListener(d,["value",k,j])},getValue:function(){return this.getCheckBox().getRawValue()},setText:function(j){return this.getCheckBox().setText(j)},getText:function(){return this.getCheckBox().getText()},getCheckBox:function(){return this.checkBox},setCheckBox:function(k){var j=this.checkBox;this.fireListener(c,["checkBox",k,j]);this.checkBox=k;this.checkBox.addListener(this);e.when(this.catchUpLoadChild(k)).done({handler:function(){this.fireListener(d,["checkBox",k,j])},scope:this}).fail({handler:function(){debug.error([this.id," set checkBox failed."].join(""))},scope:this})},setID:function(j){f.setID.call(this,j);if(this.getCheckBox()){this.getCheckBox().setID(j+".checkBox:0")}},getSelected:function(){return this.getCheckBox().getChecked()},setSelected:function(k){if(isNullOrUndefined(k)||k===this.selected){return}var j=this.selected;this.fireListener(c,["selected",k,j]);this.selected=k;this.getCheckBox().setChecked(k);this.fireListener(d,["selected",k,j]);this.fireListener(g,[k]);this.fireEvent(h,[k])},onCheckChanged:function(k,j){if(!isNullOrUndefined(j)&&j!=this.selected){this.setSelected(j)}}}).$()});define("Indigox.Web.JsLib.Controls.Html.CheckBoxList",["Indigox.Web.JsLib.Controls.Html.CheckBox","Indigox.Web.JsLib.Controls.Html.CheckBoxItem","Indigox.Web.JsLib.Controls.Selection.ItemMode","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Controls.Html.ListControl","Indigox.Web.JsLib.Core"],function(e,a,d,g,c){var f=c.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Html").Class("CheckBoxList").Extend(f).Constructor(function(){this.mode="MULTI";this.allowDeselect=true;f.constructor.apply(this,arguments)}).Members({setReadonly:function(j){f.setReadonly.apply(this,arguments);var h=this.getItems();var k,l=null;for(k=0,l=h.length;k<l;k++){h[k].getCheckBox().setEnable(!j)}},newItem:function(j){var k=new a();var h=new e();k.setCheckBox(h);if(j){k.configure(j)}return k},createSelectionMode:function(){var j=this.mode?this.mode:"SINGLE";var h=isNullOrUndefined(this.allowDeselect)?"true":this.allowDeselect;var k=new d({mode:j,allowDeselect:h});return k}}).$()});define("Indigox.Web.JsLib.Controls.Html.CheckTreeNode",["Indigox.Web.JsLib.Controls.Html.TreeNode","Indigox.Web.JsLib.Core"],function(f){var e=f.prototype;var d="clicked";var b="PropertyChanging",c="PropertyChanged";var a=Namespace("Indigox.Web.JsLib.Controls.Html").Class("CheckTreeNode").Extend(e).Constructor(function(){e.constructor.apply(this,arguments);this.checked=false}).Members({registerEvents:function(){e.registerEvents.call(this);this.events.registerEvents(d)},getText:function(){return this.text},setText:function(h){if(isNullOrUndefined(h)){return}var g=this.text;this.fireListener(b,["text",h,g]);this.text=h;this.fireListener(c,["text",h,g])},getChecked:function(){return this.checked},setChecked:function(h){if(isNullOrUndefined(h)||h===this.checked){return}var g=this.checked;this.fireListener(b,["checked",h,g]);this.checked=h;this.fireListener(c,["checked",h,g])},setSelected:function(h){if(isNullOrUndefined(h)||h===this.selected){return}this.setChecked(h);e.setSelected.call(this,h);var g=1},toggleChecked:function(){this.setSelected(!this.getChecked())},click:function(){if(this.enable){this.toggleChecked();this.fireEvent(d)}}}).$()});define("Indigox.Web.JsLib.Controls.Html.ComboBox",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Utils.DelayedTask","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Controls.Html.ListControl","Indigox.Web.JsLib.Controls.Html.ComboItem","Indigox.Web.JsLib.Controls.Html.ComboNode","Indigox.Web.JsLib.Core"],function(e,b,k,r,a,j,m,g){var d=j.prototype;var o="nodeAdding",c="nodeAdded",n="nodeRemoving",f="nodeRemoved";var q="NodeAdding",l="NodeAdded",p="NodeRemoving",h="NodeRemoved";var s=Namespace("Indigox.Web.JsLib.Controls.Html").Class("ComboBox").Extend(d).Constructor(function(){this.nodes=new b();this.delayedTask=null;d.constructor.apply(this,arguments)}).Members({registerEvents:function(){d.registerEvents.call(this);this.events.registerEvents(o,c,n,f)},registerListeners:function(){d.registerListeners.call(this);this.listeners.registerListeners(q,l,p,h)},getValue:function(){var u=this.getNodes();var t=[],w;for(var v in u){w=u[v];t.push({value:w.getValue(),text:w.getText()})}return t},setValue:function(w){if(Object.prototype.toString.call(w)!="[object Array]"){w=[w]}var v=this.getNodes().length();for(var u in w){var t=this.newNode(w[u].getText(),w[u].getValue());this.insertNode(v,t);v=v+1}},newItem:function(t){var u=new m();u.configure(t);return u},newNode:function(v,u){var t=new g();t.setText(v);t.setValue(u);return t},getNodes:function(){return this.nodes.toArray()},insertNode:function(u,v){var t=this.getNodes();if(u>t.length){throw new Error("out of range")}this.nodes.insert(u,v);v.setParent(this);v.addListener(this);this.updateChildrenID(this.nodes.toArray(),u);this.fireListener(q,[u,v]);this.fireEvent(o,[u,v]);a.when(this.catchUpLoadChild(v)).done({handler:function(){this.fireListener(l,[u,v]);this.fireEvent(c,[u,v])},scope:this}).fail({handler:function(){debug.error([this.id,"insertNode ",v.id," failed."].join(""))},scope:this})},removeNode:function(v){var t=this.getNodes();var u=k.indexOf(t,v);this.fireListener(p,[u,v]);this.fireEvent(f,[u,v]);this.nodes.remove(v);v.unload();v.setParent(null);this.updateChildrenID(this.nodes.toArray(),u);this.fireEvent(f,[u,v]);this.fireListener(h,[u,v])},search:function(t){if(this.delayedTask){this.delayedTask.cancel()}this.delayedTask=new r(function(u){this.doSearch(u);this.delayedTask=null},this,[t]);this.delayedTask.delay(50)},doSearch:function(u){var t=this.getController();t.setDefaultParamValue(u);t.load()},onSelectedChanged:function(u){var t=this.newNode(u.getText(),u.getValue());this.insertNode(this.nodes.size(),t);this.getController().clearModel()}}).$()});define("Indigox.Web.JsLib.Controls.Html.ComboItem",["Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Controls.Html.ItemControl","Indigox.Web.JsLib.Core"],function(e,a){var h="selectedChanged";var c="PropertyChanging",d="PropertyChanged",g="SelectedChanged";var f=a.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Html").Class("ComboItem").Extend(f).Constructor(function(){f.constructor.apply(this,arguments)}).Members({registerListeners:function(){f.registerListeners.call(this);this.listeners.registerListeners(d)},getText:function(){return this.text},setText:function(k){if(isNullOrUndefined(k)){return}var j=this.text;this.fireListener(c,["text",k,j]);this.text=k;this.fireListener(d,["text",k,j])},select:function(){this.fireListener(g,[])}}).$()});define("Indigox.Web.JsLib.Controls.Html.ComboNode",["Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Controls.Html.ItemControl","Indigox.Web.JsLib.Core"],function(e,a){var h="selectedChanged";var c="PropertyChanging",d="PropertyChanged",g="SelectedChanged";var f=a.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Html").Class("ComboNode").Extend(f).Constructor(function(){f.constructor.apply(this,arguments)}).Members({getText:function(){return this.text},setText:function(k){if(isNullOrUndefined(k)){return}var j=this.text;this.fireListener(c,["text",k,j]);this.text=k;this.fireListener(d,["text",k,j])},remove:function(){this.getParent().removeNode(this)}}).$()});define("Indigox.Web.JsLib.Controls.Html.CompleteItem",["Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Controls.Html.ItemControl","Indigox.Web.JsLib.Core"],function(e,b){var c="PropertyChanging",d="PropertyChanged";var f=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Html").Class("CompleteItem").Extend(f).Constructor(function(){f.constructor.apply(this,arguments)}).Members({getText:function(){return this.text},setText:function(h){if(isNullOrUndefined(h)){return}var g=this.text;this.fireListener(c,["text",h,g]);this.text=h;this.fireListener(d,["text",h,g])},remove:function(){this.getParent().removeCompleteItem(this)}}).$()});define("Indigox.Web.JsLib.Controls.Html.Contact",["Indigox.Web.JsLib.Controls.Control","Indigox.Web.JsLib.Core"],function(c){var d=c.prototype;var a="PropertyChanging",b="PropertyChanged";var e=Namespace("Indigox.Web.JsLib.Controls.Html").Class("Contact").Extend(d).Constructor(function(){d.constructor.apply(this,arguments);this.text="";this.presence=""}).Static({PRESENCE_ONLINE:"online",PRESENCE_OFFLINE:"offline",PRESENCE_AWAY:"away",PRESENCE_BUSY:"busy",PRESENCE_NOTDISTURB:"notdisturb",PRESENCE_UNKNOWN:"unknown"}).Members({getText:function(){if(!isNullOrUndefined(this.value)){return this.value.Name}else{return""}},setValue:function(h){var f=this.getText();d.setValue.apply(this,arguments);var g=this.getText();this.fireListener(a,["text",g,f]);this.fireListener(b,["text",g,f])},getPresence:function(){return this.presence},setPresence:function(g){if(g==this.getPresence()){return}var f=this.presence;this.fireListener(a,["presence",g,f]);this.presence=g;this.fireListener(b,["presence",g,f])}}).$()});define("Indigox.Web.JsLib.Controls.Html.Content",["Indigox.Web.JsLib.Utils.AsyncUtil","Indigox.Web.JsLib.Controls.Html.FieldSet","Indigox.Web.JsLib.Controls.Binding.ChildControlBinding","Indigox.Web.JsLib.Controls.Html.FieldContainer","Indigox.Web.JsLib.Controls.FormControl","Indigox.Web.JsLib.Core"],function(b,g,e,c,a){var f=a.prototype;var d=Namespace("Indigox.Web.JsLib.Controls.Html").Class("Content").Extend(f).Constructor(function(){f.constructor.apply(this,arguments)}).Members({setControls:function(m){if(m.length<=0){return}this.clearChildren();for(var j=0,k=m.length;j<k;j++){var h=m[j];if(isNullOrUndefined(h.controlType)){throw new Error("the contorl's type can not be null!")}var l=Type.forAlias(h.controlType).createInstance();l.configure(h);this.addChild(l)}},getBinding:function(){if(!this.binding){this.binding=new e()}return this.binding},setBinding:function(){throw new Error("Can't set DataItem's binding property.")}}).$()});define("Indigox.Web.JsLib.Controls.Html.Currency",["Indigox.Web.JsLib.Controls.Html.FieldControl","Indigox.Web.JsLib.Core"],function(g){var e;var c="PropertyChanging",d="PropertyChanged",a="ValueChanged";var f=g.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Html").Class("Currency").Extend(f).Constructor(function(){f.constructor.apply(this,arguments)}).Members({getValue:function(){return this.value||"0"},setValue:function(h){f.setValue.apply(this,arguments);this.setAmountInWords(e.getAmountInWords(this.value))},getAmountInWords:function(){return this.amountInWords||e.getAmountInWords("0")},setAmountInWords:function(j){var h=this.amountInWords;this.fireListener(c,["amountInWords",j,h]);this.amountInWords=j;this.fireListener(d,["amountInWords",j,h])},init:function(){f.init.apply(this,arguments);this.setValue("0");this.setAmountInWords(e.getAmountInWords("0"))}}).$();e=(function(){var o=0;var p=999999999.99;var m="           ";var l="零壹贰叁肆伍陸柒捌玖";var k="亿仟佰拾萬仟佰拾元角分";var n="";function j(r,q){if(r.length<q.length){return q.substring(0,q.length-r.length)+r}return r}function h(r,q){return r.substring(q,q+1)}return{getAmountInWords:function(t){if(!t||isNaN(t)){return n}t=parseFloat(t);if(t===0){return n}if(t>p||t<o){throw Error("Currency value is overflow. ("+t+")")}var u=j(Math.floor(t*100).toString(),m);var q=[];for(var r=0,s=u.length-2;r<s;r++){if(h(u,r)==" "){}else{q.push(""+h(l,parseInt(h(u,r),10))+h(k,r))}}if(u.substring(u.length-2,u.length)==="00"){q.push("整")}else{q.push(""+h(l,parseInt(h(u,u.length-2),10))+h(k,u.length-2));q.push(""+h(l,parseInt(h(u,u.length-1),10))+h(k,u.length-1))}return q.join("")}}}())});define("Indigox.Web.JsLib.Controls.Html.DataItem",["Indigox.Web.JsLib.Controls.Binding.Binding","Indigox.Web.JsLib.Controls.Binding.ChildControlBinding","Indigox.Web.JsLib.Controls.Html.ItemControl","Indigox.Web.JsLib.Core"],function(c,e,f){var a=f.prototype;var b="clicked";var h="PropertyChanging",d="PropertyChanged",j="Clicked";var g=Namespace("Indigox.Web.JsLib.Controls.Html").Class("DataItem").Extend(a).Constructor(function(){a.constructor.apply(this,arguments);this.template=null}).Members({registerEvents:function(){a.registerEvents.call(this);this.listeners.registerListeners(b)},registerListeners:function(){a.registerListeners.call(this);this.listeners.registerListeners(j,d)},setValue:function(k){this.getBinding().bind(k)},getValue:function(){return this.getRecord()},setTemplate:function(k){this.template=k},getTemplate:function(){return this.template},getBinding:function(){if(!this.binding){this.binding=new e()}return this.binding},setBinding:function(){throw new Error("Can't set DataItem's binding property.")},click:function(){this.fireListener(j,[]);this.fireEvent(b,[])}}).$()});define("Indigox.Web.JsLib.Controls.Html.DataList",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Controls.Template","Indigox.Web.JsLib.Controls.Html.DataItem","Indigox.Web.JsLib.Controls.Html.ListControl","Indigox.Web.JsLib.Core"],function(c,e,b,a){var g="TemplateChanged";var f=a.prototype;var d=Namespace("Indigox.Web.JsLib.Controls.Html").Class("DataList").Extend(f).Constructor(function(){f.constructor.apply(this,arguments);this.itemTemplate=null}).Members({registerListeners:function(){f.registerListeners.call(this);this.listeners.registerListeners(g)},getItemTemplate:function(){return this.itemTemplate},setItemTemplate:function(j){var h=this.itemTemplate;if(h){h.setParent(null)}this.itemTemplate=j;if(j){j.setParent(this)}this.fireListener(g,[j]);if(this.isInited()){this.itemTemplate.init()}},newItem:function(h){var j=new b();this.getItemTemplate().applyTo(j);if(h){j.configure(h)}return j},insertChild:function(h,j){if(j instanceof e){this.setItemTemplate(j)}else{f.insertChild.apply(this,arguments)}},init:function(){f.init.call(this)}}).$()});define("Indigox.Web.JsLib.Controls.Html.DatePicker",["Indigox.Web.JsLib.Utils.DateTimeUtil","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Controls.Html.Button","Indigox.Web.JsLib.Controls.Html.TextBox","Indigox.Web.JsLib.Controls.Html.FieldControl","Indigox.Web.JsLib.Core"],function(f,j,c,d,b,k){var g="valueChanged";var l="PropertyChanging",e="PropertyChanged";var a=k.prototype;var h=Namespace("Indigox.Web.JsLib.Controls.Html").Class("DatePicker").Extend(a).Constructor(function(){this.dateTime=null;this.editHMS=true;this.maxDate=null;this.minDate=null;a.constructor.apply(this,arguments)}).Members({setYear:function(m){this.setDateTime(m,null,null,null,null,null,false)},getYear:function(){if(this.isEmpty()){return""}var m=this.dateTime.getFullYear();return m.toString()},setMonth:function(m){this.setDateTime(null,m,null,null,null,null,false)},getMonth:function(){if(this.isEmpty()){return""}var m=this.dateTime.getMonth()+1;return this.padLeft(m,2,"00")},setDay:function(m){this.setDateTime(null,null,m,null,null,null,false)},getDay:function(){if(this.isEmpty()){return""}var m=this.dateTime.getDate();return this.padLeft(m,2,"00")},setHours:function(m){this.setDateTime(null,null,null,m,null,null,false)},getHours:function(){if(this.isEmpty()){return""}var m=this.dateTime.getHours();return this.padLeft(m,2,"00")},setMinutes:function(m){this.setDateTime(null,null,null,null,m,null,false)},getMinutes:function(){if(this.isEmpty()){return""}var m=this.dateTime.getMinutes();return this.padLeft(m,2,"00")},setSeconds:function(m){this.setDateTime(null,null,null,null,null,m,false)},getSeconds:function(){if(this.isEmpty()){return""}var m=this.dateTime.getSeconds();return this.padLeft(m,2,"00")},setDate:function(n){if(isNullOrUndefined(n)||n===""){this.clear();return}var m=f.parse(n);this.setDateTime(m.getFullYear(),m.getMonth()+1,m.getDate(),null,null,null,false)},getDate:function(){if(this.isEmpty()){return""}return f.toShortString(this.dateTime.getFullYear(),this.dateTime.getMonth()+1,this.dateTime.getDate())},setTime:function(n){var m=f.parse("1900-01-01 "+n);this.setDateTime(null,null,null,m.getHours(),m.getMinutes(),m.getSeconds(),false)},getTime:function(){if(this.isEmpty()){return""}return f.toLongString(this.dateTime.getFullYear(),this.dateTime.getMonth()+1,this.dateTime.getDate(),this.dateTime.getHours(),this.dateTime.getMinutes(),this.dateTime.getSeconds()).substring(10)},setValue:function(n){if(isNullOrUndefined(n)||n===""){this.clear();return}var m=f.parse(n);this.setDateTime(m.getFullYear(),m.getMonth()+1,m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds(),false)},getValue:function(){if(this.isEmpty()){return""}else{if(this.getEditHMS()){return f.toLongString(this.dateTime.getFullYear(),this.dateTime.getMonth()+1,this.dateTime.getDate(),this.dateTime.getHours(),this.dateTime.getMinutes(),this.dateTime.getSeconds())}else{return f.toShortString(this.dateTime.getFullYear(),this.dateTime.getMonth()+1,this.dateTime.getDate())}}},setDateTime:function(z,R,J,L,I,B,w){var n=this.getEditHMS();var C=this.dateTime,T=!C,K="",G="",p="",N="",o="",Q="",A="",S="",q="";if(!T){K=this.padLeft(C.getFullYear(),2,"00");G=this.padLeft(C.getMonth()+1,2,"00");p=this.padLeft(C.getDate(),2,"00");N=this.padLeft(C.getHours(),2,"00");o=this.padLeft(C.getMinutes(),2,"00");Q=this.padLeft(C.getSeconds(),2,"00");A=f.toShortString(K,G,p);S=f.toLongString(K,G,p,N,o,Q).substring(10);q=(n)?f.toLongString(K,G,p,N,o,Q):f.toShortString(K,G,p)}var t=this.dateTime,v="",u="",O="",x="",F="",D="",P="",r="",E="";if(w){if(!T){this.fireListener(l,["year",v,K]);this.fireListener(e,["year",v,K]);this.fireListener(l,["month",u,G]);this.fireListener(e,["month",u,G]);this.fireListener(l,["day",O,p]);this.fireListener(e,["day",O,p]);this.fireListener(l,["hours",x,N]);this.fireListener(e,["hours",x,N]);this.fireListener(l,["minutes",F,o]);this.fireListener(e,["minutes",F,o]);this.fireListener(l,["seconds",D,Q]);this.fireListener(e,["seconds",D,Q]);this.fireListener(l,["date",P,A]);this.fireListener(e,["date",P,A]);this.fireListener(l,["time",r,S]);this.fireListener(e,["time",r,S]);this.fireListener(l,["value",E,q]);this.fireListener(e,["value",E,q]);this.fireEvent(g,[E]);this.dateTime=null}return}if(T){t=f.parse("1900-01-01 00:00:00");this.dateTime=t}v=this.padLeft(z||t.getFullYear(),2,"00");u=this.padLeft(R||t.getMonth()+1,2,"00");O=this.padLeft(J||t.getDate(),2,"00");x=this.padLeft(L||t.getHours(),2,"00");F=this.padLeft(I||t.getMinutes(),2,"00");D=this.padLeft(B||t.getSeconds(),2,"00");P=f.toShortString(v,u,O);r=f.toLongString(v,u,O,x,F,D).substring(10);E=(n)?f.toLongString(v,u,O,x,F,D):f.toShortString(v,u,O);if(v!=K){this.fireListener(l,["year",v,K]);t.setFullYear(v);this.fireListener(e,["year",v,K])}if(u!=G){this.fireListener(l,["month",u,G]);t.setMonth(u-1);this.fireListener(e,["month",u,G])}if(O!=p){this.fireListener(l,["day",O,p]);t.setDate(O);this.fireListener(e,["day",O,p])}if(x!=N){this.fireListener(l,["hours",x,N]);t.setHours(x);this.fireListener(e,["hours",x,N])}if(F!=o){this.fireListener(l,["minutes",F,o]);t.setMinutes(F);this.fireListener(e,["minutes",F,o])}if(D!=Q){this.fireListener(l,["seconds",D,Q]);t.setSeconds(D);this.fireListener(e,["seconds",D,Q])}if(P!=A){this.fireListener(l,["date",P,A]);this.fireListener(e,["date",P,A])}if(r!=S){this.fireListener(l,["time",r,S]);this.fireListener(e,["time",r,S])}if(E!=q){this.fireListener(l,["value",E,q]);this.fireListener(e,["value",E,q]);this.fireEvent(g,[E])}},padLeft:function(o,n,m){o=o.toString();if(o.length>=n){return o}return m.substring(n-o.length)+o},isEmpty:function(){return !this.dateTime},clear:function(){this.setDateTime(null,null,null,null,null,null,true)},setEditHMS:function(n){var m=this.getEditHMS();this.fireListener(l,["editHMS",n,m]);this.editHMS=n;this.fireListener(e,["editHMS",n,m])},getEditHMS:function(){return this.editHMS},setMaxDate:function(n){if(isNaN(n)){n=new Date(n)}var m=this.getMaxDate();this.fireListener(l,["maxDate",n,m]);this.maxDate=n;this.fireListener(e,["maxDate",n,m])},getMaxDate:function(){return this.maxDate},setMinDate:function(n){if(isNaN(n)){n=new Date(n)}var m=this.getMinDate();this.fireListener(l,["minDate",n,m]);this.minDate=n;this.fireListener(e,["minDate",n,m])},getMinDate:function(){return this.minDate}}).$()});define("Indigox.Web.JsLib.Controls.Html.Dialog",["Indigox.Web.JsLib.Controls.Html.Panel","Indigox.Web.JsLib.Core"],function(h){var c="closed",b="opened";var g="PropertyChanging",d="PropertyChanged",j="Closed",f="Opened";var a=h.prototype;var e=Namespace("Indigox.Web.JsLib.Controls.Html").Class("Dialog").Extend(a).Constructor(function(){a.constructor.apply(this,arguments);this.autoCenter=true;this.collapsible=true;this.collapsed=false;this.callback=null;this.dialogResult=null;this.params=null;Page().addListener(this,{onScrolling:this.onPageScrolling})}).Static({DIALOG_RESULT_OK:"ok",DIALOG_RESULT_CANCEL:"cancel"}).Members({registerEvents:function(){a.registerEvents.call(this);this.events.registerEvents(c,b)},registerListeners:function(){a.registerListeners.call(this);this.listeners.registerListeners(d,j,f)},setCollapsed:function(k){this.collapsed=false},getCollapsed:function(){return false},setValue:function(m){a.setValue.apply(this,arguments);for(var l=0,n;n=this.children[l];l++){var k=n.getName();if((this.value!=null)&&(k in this.value)){n.setValue(this.value[k])}}},setAutoCenter:function(l){if(isNullOrUndefined(l)){return}if(this.autoCenter===l){return}var k=this.autoCenter;this.fireListener(g,["autoCenter",l,k]);this.autoCenter=l;this.fireListener(d,["autoCenter",l,k])},getAutoCenter:function(){return this.autoCenter},init:function(){a.init.apply(this,arguments)},getParams:function(){return this.params},getParam:function(k){if(this.params){return this.params[k]}return undefined},open:function(k,l){this.callback=l;this.dialogResult=e.DIALOG_RESULT_CANCEL;this.params=k;this.setVisible(true);this.fireListener(f);this.fireEvent(b)},close:function(){if(this.callback){this.callback.invoke(this.dialogResult,this.returnValue)}this.callback=null;this.params=null;this.setVisible(false);this.fireListener(j);this.fireEvent(c)}}).$()});define("Indigox.Web.JsLib.Controls.Html.DropDownItem",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Controls.Html.CheckBox","Indigox.Web.JsLib.Controls.Html.ItemControl","Indigox.Web.JsLib.Core"],function(k,d,h){var a=h.prototype;var c="clicked",l="textChanged",b="selectedChanged";var j="PropertyChanging",e="PropertyChanged",g="SelectedChanged";var f=Namespace("Indigox.Web.JsLib.Controls.Html").Class("DropDownItem").Extend(a).Constructor(function(){a.constructor.apply(this,arguments);this.text=""}).Members({registerEvents:function(){a.registerEvents.call(this);this.events.registerEvents(c,l,b)},registerListeners:function(){a.registerListeners.call(this);this.listeners.registerListeners(e,g)},setText:function(n){if(isNullOrUndefined(n)){return}var m=this.text;this.fireListener(j,["text",n,m]);this.text=n;this.fireListener(e,["text",n,m]);this.fireEvent(l,[this.getText()])},getText:function(){return this.text},getSelected:function(){return this.selected},setSelected:function(n){if(isNullOrUndefined(n)||n===this.selected){return}var m=this.selected;this.fireListener(j,["selected",n,m]);this.selected=n;this.fireListener(e,["selected",n,m]);this.fireListener(g,[n]);this.fireEvent(b,[n])}}).$()});define("Indigox.Web.JsLib.Controls.Html.DropDownList",["Indigox.Web.JsLib.Controls.Html.DropDownItem","Indigox.Web.JsLib.Controls.Html.BlankDropDownItem","Indigox.Web.JsLib.Controls.Selection.ItemMode","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Controls.Html.ListControl","Indigox.Web.JsLib.Core"],function(g,e,b,k,h,d){var j="PropertyChanging",f="PropertyChanged";var a=d.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Html").Class("DropDownList").Extend(a).Constructor(function(){this.allowDeselect=false;this.allowBlank=false;this.blankText="请选择...";a.constructor.apply(this,arguments)}).Members({getReadonly:function(){return a.getReadonly.apply(this,arguments)},setReadonly:function(l){a.setReadonly.apply(this,arguments);this.setEnable(!l)},getAllowBlank:function(){return this.allowBlank},setAllowBlank:function(m){var l=this.allowBlank;this.fireListener(j,["allowBlank",m,l]);this.allowBlank=m;this.fireListener(f,["allowBlank",m,l]);if(this.allowBlank){a.insertItem.call(this,0,this.newBlankItem({text:this.getBlankText()}))}else{if((this.getItems().length>0)&&(this.getItems()[0] instanceof e)){a.removeItem.call(this,this.getItems()[0])}}},getBlankText:function(){return this.blankText},setBlankText:function(m){var l=this.blankText;this.fireListener(j,["blankText",m,l]);this.blankText=m;this.fireListener(f,["blankText",m,l]);if((this.getItems().length>0)&&(this.getItems()[0] instanceof e)){this.getItems()[0].setText(this.blankText)}},newItem:function(l){var m=new g();m.configure(l);return m},newBlankItem:function(l){var m=new e();m.configure(l);return m},removeItem:function(l){if(l instanceof e){return}a.removeItem.apply(this,arguments)},insertItem:function(l,m){if(m instanceof e){return}a.insertItem.call(this,l,m)},load:function(){var l=a.load.apply(this,arguments).done({handler:function(){if((isNullOrUndefined(this.value)||this.value.length===0)&&this.getItems().length>0){this.getItems()[0].setSelected(true)}},scope:this});return l},change:function(o){var l=this.getItems();var m=null,n=l.length;for(m=0;m<n;m++){if(l[m].getValue()==o){l[m].setSelected(true);break}}},createSelectionMode:function(){var m=this.mode?this.mode:"SINGLE";var l=isNullOrUndefined(this.allowDeselect)?"true":this.allowDeselect;var n=new b({mode:m,allowDeselect:l});return n}}).$()});define("Indigox.Web.JsLib.Controls.Html.DropDownMenuItem",["Indigox.Web.JsLib.Controls.Html.Button","Indigox.Web.JsLib.Controls.Html.MenuItem","Indigox.Web.JsLib.Core"],function(a,d){var f="clicked";var b="PropertyChanging",c="PropertyChanged",h="Clicked";var e=d.prototype;var g=Namespace("Indigox.Web.JsLib.Controls.Html").Class("DropDownMenuItem").Extend(e).Constructor(function(){e.constructor.apply(this,arguments);this.displayMode=a.DISPLAYMODE_TEXT_AND_ICON;this.icon=null}).Static({DISPLAYMODE_TEXT_AND_ICON:0,DISPLAYMODE_TEXT_ONLY:1,DISPLAYMODE_ICON_ONLY:2}).Members({registerEvents:function(){e.registerEvents.call(this);this.events.registerEvents(f)},registerListeners:function(){e.registerListeners.call(this);this.listeners.registerListeners(h)},setDisplayMode:function(j){this.displayMode=j;this.fireListener(c,["displayMode",this.getDisplayMode])},getDisplayMode:function(){return this.displayMode},setIcon:function(j){this.icon=j;this.fireListener(c,["icon",this.icon])},getIcon:function(){return this.icon},click:function(){this.fireListener(h);this.fireEvent(f)}}).$()});define("Indigox.Web.JsLib.Controls.Html.FieldContainer",["Indigox.Web.JsLib.Controls.Html.Label","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Controls.Container","Indigox.Web.JsLib.Core"],function(h,g,b){var c="PropertyChanging",e="PropertyChanged",a="ValueChanged";var f=b.prototype;var d=Namespace("Indigox.Web.JsLib.Controls.Html").Class("FieldContainer").Extend(f).Constructor(function(){f.constructor.apply(this,arguments);this.text="";this.required=false;this.vertical=false;this.collapsible=false;this.collapsed=false}).Members({getText:function(){return this.text},setText:function(j){this.text=j},getRequired:function(){return this.required},setRequired:function(j){this.required=j},setVertical:function(j){this.vertical=j},getVertical:function(){return this.vertical},setCollapsed:function(j){this.collapsed=j},getCollapsed:function(){return this.collapsed},setCollapsible:function(j){this.collapsible=j},getCollapsible:function(){return this.collapsible},collapse:function(){this.collpased=!this.collpased;this.fireListener(e,["collapsed",this.collpased,!this.collpased])},clearChildren:function(){var k=this.getChildren();for(var j=0,l=k.length;j<l;j++){this.removeChild(k[j])}},setChildren:function(n){if(n.length<=0){return}this.clearChildren();for(var k=0,l=n.length;k<l;k++){var j=n[k];if(isNullOrUndefined(j.controlType)){throw new Error("the contorl's type can not be null!")}var m=Type.forAlias(j.controlType).createInstance();m.configure(j);this.addChild(m)}},reset:function(){var k=this.getChildren();for(var j=0,l=k.length;j<l;j++){k[j].setValue(null)}}}).$()});define("Indigox.Web.JsLib.Controls.Html.FieldControl",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Controls.Control","Indigox.Web.JsLib.Core"],function(h,e){var c="nameChanged";var a="PropertyChanging",b="PropertyChanged",d="NameChanged";var f=e.prototype;var g=Namespace("Indigox.Web.JsLib.Controls.Html").Class("FieldControl").Extend(f).Constructor(function(j){f.constructor.apply(this,arguments)}).Members({registerEvents:function(){f.registerEvents.call(this);this.events.registerEvents(c)},registerListeners:function(){f.registerListeners.call(this);this.listeners.registerListeners(d)},isEditable:function(){return true}}).$()});define("Indigox.Web.JsLib.Controls.Html.FieldSet",["Indigox.Web.JsLib.Controls.Html.FieldContainer","Indigox.Web.JsLib.Controls.Html.ListControl","Indigox.Web.JsLib.Core"],function(b,a){var c=a.prototype;var d=Namespace("Indigox.Web.JsLib.Controls.Html").Class("FieldSet").Extend(c).Constructor(function(){c.constructor.apply(this,arguments);this.rowFields=1}).Members({getRowFields:function(){return this.rowFields},setRowFields:function(e){this.rowFields=e},getChildren:function(){return this.items.toArray()},newItem:function(e){var g=new b();var f=(1/this.getRowFields())*100+"%";g.setWidth(f);if(e){g.configure(e)}return g},reset:function(){var f=this.getChildren();for(var e=0,g=f.length;e<g;e++){f[e].reset()}}}).$()});define("Indigox.Web.JsLib.Controls.Html.FileUpload",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Online.OnlineViewer","Indigox.Web.JsLib.Controls.Html.Button","Indigox.Web.JsLib.Controls.Html.HyperLink","Indigox.Web.JsLib.Controls.Html.ProgressBar","Indigox.Web.JsLib.Controls.Container","Indigox.Web.JsLib.Core"],function(c,a,s,l,n,p,f,r){var q="stateChanged",o="uploadBegin",j="uploadCompleted",b="uploadErrorCompleted",d="canceled";var t="StateChanged",h="UploadBegin",g="UploadCompleted",w="UploadErrorCompleted",u="Canceled",m="PropertyChanging",k="PropertyChanged";var e=r.prototype;var v=Namespace("Indigox.Web.JsLib.Controls.Html").Class("FileUpload").Extend(e).Constructor(function(){e.constructor.apply(this,arguments);this.text="";this.href="javascript:void(0)";this.uploadState="inited";this.readonly=true;this.progress=0;this.progressBar=null;this.addDefaultChildren()}).Members({init:function(){e.init.apply(this,arguments);var x=this.owner;var y=x.owner;this.addListener(y,{onUploadBegin:y.onFileUploadBeginUpload})},initChildren:function(){if(this.getProgressBar()){this.getProgressBar().init()}},preLoadChildren:function(){if(this.getProgressBar()){this.getProgressBar().preLoad()}},loadChildren:function(){var x=[];if(this.getProgressBar()){x.push(this.getProgressBar().load())}return a.when(x)},unloadChildren:function(){if(this.getProgressBar()){this.getProgressBar().unload()}},text:null,href:null,state:null,progress:null,progressBar:null,getText:function(){return this.text},setText:function(y){var x=this.text;this.fireListener(m,["text",y,x]);this.text=y;this.fireListener(k,["text",y,x])},getHref:function(){return this.href},setHref:function(z){var y=this.href;var x=new l(z);if(x.isSupportOnlineView()){z=x.getOnlineViewUrl()}this.fireListener(m,["href",z,y]);this.href=z;this.fireListener(k,["href",z,y])},getReadonly:function(){return this.readonly},setReadonly:function(y){var x=this.readonly;this.fireListener(m,["readonly",y,x]);this.readonly=y;this.fireListener(k,["readonly",y,x])},getValue:function(){return this.value},setValue:function(y){var x=this.value;this.fireListener(m,["value",y,x]);this.value=y;this.fireListener(k,["value",y,x]);this.setText(y.fileName);this.setHref(y.fileUrl)},getProgress:function(){return this.progress},setProgress:function(y){var x=this.progress;this.fireListener(m,["progress",y,x]);this.progress=y;this.fireListener(k,["progress",y,x]);this.progressBar.setText(""+y+"%");this.progressBar.setValue(y)},getProgressBar:function(){return this.progressBar},setProgressBar:function(y){var x=this.progressBar;this.fireListener(m,["progressBar",y,x]);this.progressBar=y;a.when(this.catchUpLoadChild(y)).done({handler:function(){this.fireListener(k,["progressBar",y,x])},scope:this}).fail({handler:function(){debug.error([this.id," set progressBar failed."].join(""))},scope:this})},getUploadState:function(){return this.uploadState},setUploadState:function(y){var x=this.uploadState;this.fireListener(m,["uploadState",y,x]);this.uploadState=y;this.fireListener(k,["uploadState",y,x])},addDefaultChildren:function(){var x=new f("progressBar");x.setText("");x.setValue(0);this.setProgressBar(x)},setAsCompleted:function(){this.complete()},upload:function(){this.uploading=true;this.uniqueIdentifier=s.newGuid();this.setUploadState("uploading");this.fireListener(h)},cancel:function(){this.uploading=false;this.setUploadState("canceled");this.fireListener(u)},complete:function(){this.uploading=false;this.setUploadState("completed");this.fireListener(g)},error:function(x){this.uploading=false;this.fireListener(w);this.setUploadState("error");debug.error(x);alert(x)},isBusy:function(){return(this.uploading)},remove:function(){var x=this.owner;var y=x.owner;y.removeChild(x)},registerEvents:function(){e.registerEvents.call(this);this.events.registerEvents(q,o,j,b,d)},registerListeners:function(){e.registerListeners.call(this);this.listeners.registerListeners(t,h,g,w,u)}}).$()});define("Indigox.Web.JsLib.Controls.Html.FileUploadItem",["Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Controls.Html.FileUpload","Indigox.Web.JsLib.Controls.Html.ItemControl","Indigox.Web.JsLib.Core"],function(e,a,b){var c="PropertyChanging",d="PropertyChanged";var g=b.prototype;var f=Namespace("Indigox.Web.JsLib.Controls.Html").Class("FileUploadItem").Extend(g).Constructor(function(){g.constructor.apply(this,arguments);this.fileUpload=null;this.addDefaultChildren()}).Members({initChildren:function(){if(this.getFileUpload()){this.getFileUpload().init()}},preLoadChildren:function(){if(this.getFileUpload()){this.getFileUpload().preLoad()}},loadChildren:function(){if(this.getFileUpload()){this.getFileUpload().load()}},unloadChildren:function(){if(this.getFileUpload()){this.getFileUpload().unload()}},addDefaultChildren:function(){this.setFileUpload(new a("fileupload"))},getFileUpload:function(){return this.fileUpload},setFileUpload:function(j){var h=this.fileUpload;this.fireListener(c,["fileUpload",j,h]);this.fileUpload=j;this.fileUpload.owner=this;e.when(this.catchUpLoadChild(j)).done({handler:function(){this.fireListener(d,["fileUpload",this.fileUpload])},scope:this}).fail({handler:function(){debug.error([this.id," set fileUpload failed."].join(""))},scope:this})},getValue:function(){return this.fileUpload.getValue()},setValue:function(h){this.fileUpload.setValue(h)},getReadonly:function(){return g.getReadonly.call(this)},setReadonly:function(h){g.setReadonly.call(this,h);this.fileUpload.setReadonly(h)},setAsCompleted:function(){this.fileUpload.setAsCompleted()}}).$()});define("Indigox.Web.JsLib.Controls.Html.FileUploadList",["Indigox.Web.JsLib.Controls.Html.FileUploadItem","Indigox.Web.JsLib.Controls.Html.ListControl","Indigox.Web.JsLib.Core"],function(d,b){var f=b.prototype;var a="PropertyChanging",c="PropertyChanged";var e=Namespace("Indigox.Web.JsLib.Controls.Html").Class("FileUploadList").Extend(f).Constructor(function(){f.constructor.apply(this,arguments);this.multi=false;this.addFileUploadItem()}).Members({newItem:function(g){var h=new d();h.owner=this;if(g){h.configure(g)}return h},getValue:function(){var g=[];var h,j;for(h=0,j=this.items.size();h<j;h++){var k=this.items.get(h).getFileUpload();if(k.getUploadState()==="completed"){g.push(k.getValue())}}return g},setValue:function(g){g=g||[];this.setUploadedFiles(g)},getReadonly:function(){return f.getReadonly.call(this)},setReadonly:function(k){f.setReadonly.call(this,k);var g,j;for(g=0,j=this.items.size();g<j;g++){var h=this.items.get(g);h.setReadonly(k)}},getMulti:function(){return this.multi},setMulti:function(h){var g=this.multi;this.fireListener(a,["multi",h,g]);this.multi=h;this.fireListener(c,["multi",h,g])},isEditable:function(){return true},addFileUploadItem:function(){if(!this.getReadonly()){var g=this.newItem();this.addItem(g)}},addItem:function(g){if(!this.multi){if(this.items.size()>1){this.removeItem(this.items.get(0))}}f.addItem.apply(this,arguments)},setUploadedFiles:function(l){this.clearItems();for(var h=0,k=l.length;h<k;h++){var g=l[h];var j=this.newItem();j.setValue(g);j.setAsCompleted();j.setReadonly(this.getReadonly());this.addItem(j)}this.addFileUploadItem()},onFileUploadBeginUpload:function(g,h){this.addFileUploadItem()}}).$()});define("Indigox.Web.JsLib.Controls.Html.HierarchyControl",["Indigox.Web.JsLib.Controllers.Controller","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Controls.Selection.NodeMode","Indigox.Web.JsLib.Controls.Html.NodeControl","Indigox.Web.JsLib.Core"],function(c,m,g,l,d){var b=d.prototype;var k="nodeSelectedChanged",f="valueChanged";var j="PropertyChanging",e="PropertyChanged",a="NodeSelectedChanged";var h=Namespace("Indigox.Web.JsLib.Controls.Html").Class("HierarchyControl").Extend(b).Constructor(function(){b.constructor.apply(this,arguments);this.controller=null;this.nodes=new m()}).Members({registerListeners:function(){b.registerListeners.call(this);this.listeners.registerListeners(a)},registerEvents:function(){b.registerEvents.call(this);this.events.registerEvents(f,k)},setController:function(o){if(!(o instanceof c)){var n=o;o=Type.forAlias(n.controllerType).createInstance();o.configure(n)}if(this.controller){this.controller.setView(null)}this.controller=o;if(this.controller){this.controller.setView(this)}if(this.isLoaded()&&this.controller.autoLoad===true){this.controller.load()}},getController:function(){return this.controller},setRoot:function(n){},getRoot:function(){return this},getNodes:function(){return this.nodes.toArray()},addNode:function(n){this.nodes.add(n)},load:function(){return b.load.apply(this,arguments)},doLoad:function(){var n=new g();if(this.getController()&&this.getController().getAutoLoad()==true){this.getController().load(function(){n.resolve()})}else{n.resolve()}return n.promise()},loadChildren:function(){return b.loadChildren.apply(this,arguments)},unload:function(){b.unload.apply(this,arguments);if(this.getController()){this.getController().unload()}},getSelMode:function(){return this.selMode},setSelMode:function(n){this.selMode=n;if(this.selMode){this.selMode.bindControl(this)}},createSelectionMode:function(){var o=this.mode?this.mode:"SINGLE";var n=isNullOrUndefined(this.allowDeselect)?"true":this.allowDeselect;var p=new l({mode:o,allowDeselect:n});return p},selectNode:function(p){var n=this.getNodes();var o=null,q=null;for(o=0,q=n.length;o<q;o++){if(n[o].getValue()==p){n[o].setSelected(true)}}},deselectNode:function(p){var n=this.getNodes();var o=null,q=null;for(o=0,q=n.length;o<q;o++){if(n[o].getValue()==p){n[o].setSelected(false)}}},onSelectedChanged:function(o,n){this.fireListener(a,[o,n]);this.fireEvent(k,[o,n])},setValue:function(o){if(this.getSelMode()){if(isNullOrUndefined(o)||!this.getSelMode().isValueChanged(this.value,o)){return}var n=this.value;this.fireListener(j,["value",o,n]);this.value=o;this.getSelMode().select(o,false);this.fireListener(e,["value",o,n]);this.fireEvent(f,[this.value])}},getValue:function(){if(this.getSelMode()){return this.value}else{var o=[],n=this.getNodes();for(var p=0,q=n.length;p<q;p++){o.push(n[p].getValue())}return o}}}).$()});define("Indigox.Web.JsLib.Controls.Html.HyperLink",["Indigox.Web.JsLib.Controls.Html.FieldControl","Indigox.Web.JsLib.Core"],function(e){var d=e.prototype;var a="PropertyChanging",b="PropertyChanged";var c=Namespace("Indigox.Web.JsLib.Controls.Html").Class("HyperLink").Extend(d).Constructor(function(f){d.constructor.apply(this,arguments);this.icon=null;this.text=null;this.href=null;this.target=null}).Members({getHref:function(){return this.href},setHref:function(g){if(isNullOrUndefined(g)){return}var f=this.href;this.fireListener(a,["href",g,f]);this.href=g;this.fireListener(b,["href",g,f])},getText:function(){return this.text},setText:function(g){if(isNullOrUndefined(g)){return}var f=this.text;this.fireListener(a,["text",g,f]);this.text=g;this.fireListener(b,["text",g,f])},getTarget:function(){return this.target},setTarget:function(g){if(isNullOrUndefined(g)){return}var f=this.target;this.fireListener(a,["target",g,f]);this.target=g;this.fireListener(b,["target",g,f])},setIcon:function(g){var f=this.icon;this.fireListener(a,["icon",g,f]);this.icon=g;this.fireListener(b,["icon",g,f])},getIcon:function(){return this.icon}}).$()});define("Indigox.Web.JsLib.Controls.Html.ItemControl",["Indigox.Web.JsLib.Controls.Container","Indigox.Web.JsLib.Core"],function(d){var a=d.prototype;var c="clicked",b="selectedChanged";var j="Clicked",g="SelectedChanged",h="PropertyChanging",e="PropertyChanged";var f=Namespace("Indigox.Web.JsLib.Controls.Html").Class("ItemControl").Extend(a).Constructor(function(){a.constructor.apply(this,arguments);this.selected=false}).Members({registerEvents:function(){a.registerEvents.call(this);this.events.registerEvents(b,c)},registerListeners:function(){a.registerListeners.call(this);this.listeners.registerListeners(g,j)},setValue:function(l){if(isUndefined(l)){return}var k=this.value;this.fireListener(h,["value",l,k]);this.value=l;this.fireListener(e,["value",l,k])},getValue:function(){return this.value},setSelected:function(l){if(isNullOrUndefined(l)||l===this.selected){return}var k=this.selected;this.fireListener(h,["selected",l,k]);this.selected=l;this.fireListener(e,["selected",l,k]);this.fireListener(g,[l]);this.fireEvent(b,[l])},getSelected:function(){return this.selected},toggleSelected:function(){this.setSelected(!this.getSelected())}}).$()});define("Indigox.Web.JsLib.Controls.Html.Label",["Indigox.Web.JsLib.Controls.Control","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Html").Class("Label").Extend(b).Constructor(function(){b.constructor.apply(this,arguments)}).Members({isEditable:function(){return false},getValue:function(){if(isNullOrUndefined(this.value)){return""}return this.value}}).$()});define("Indigox.Web.JsLib.Controls.Html.LinkMenuItem",["Indigox.Web.JsLib.Controls.Html.MenuItem","Indigox.Web.JsLib.Core"],function(d){var e=d.prototype;var a="PropertyChanging",b="PropertyChanged";var c=Namespace("Indigox.Web.JsLib.Controls.Html").Class("LinkMenuItem").Extend(e).Constructor(function(){e.constructor.apply(this,arguments);this.icon=null;this.text=null;this.href=null;this.target=null}).Members({getHref:function(){return this.href},setHref:function(g){if(isNullOrUndefined(g)){return}var f=this.href;this.fireListener(a,["href",g,f]);this.href=g;this.fireListener(b,["href",g,f])},getText:function(){return this.text},setText:function(g){if(isNullOrUndefined(g)){return}var f=this.text;this.fireListener(a,["text",g,f]);this.text=g;this.fireListener(b,["text",g,f])},getTarget:function(){return this.target},setTarget:function(g){if(isNullOrUndefined(g)){return}var f=this.target;this.fireListener(a,["target",g,f]);this.target=g;this.fireListener(b,["target",g,f])},setIcon:function(g){var f=this.icon;this.fireListener(a,["icon",g,f]);this.icon=g;this.fireListener(b,["icon",g,f])},getIcon:function(){return this.icon},setBadge:function(f){}}).$()});define("Indigox.Web.JsLib.Controls.Html.LinkTreeNode",["Indigox.Web.JsLib.Controls.Html.TreeNode","Indigox.Web.JsLib.Core"],function(e){var d=e.prototype;var a="PropertyChanging",b="PropertyChanged";var c=Namespace("Indigox.Web.JsLib.Controls.Html").Class("LinkTreeNode").Extend(d).Constructor(function(){d.constructor.apply(this,arguments);this.icon=null;this.text=null;this.href=null;this.target=null}).Members({getHref:function(){return this.href},setHref:function(g){if(isNullOrUndefined(g)){return}var f=this.href;this.fireListener(a,["href",g,f]);this.href=g;this.fireListener(b,["href",g,f])},getText:function(){return this.text},setText:function(g){if(isNullOrUndefined(g)){return}var f=this.text;this.fireListener(a,["text",g,f]);this.text=g;this.fireListener(b,["text",g,f])},getTarget:function(){return this.target},setTarget:function(g){if(isNullOrUndefined(g)){return}var f=this.target;this.fireListener(a,["target",g,f]);this.target=g;this.fireListener(b,["target",g,f])},setIcon:function(g){var f=this.icon;this.fireListener(a,["icon",g,f]);this.icon=g;this.fireListener(b,["icon",g,f])},getIcon:function(){return this.icon}}).$()});define("Indigox.Web.JsLib.Controls.Html.ListControl",["Indigox.Web.JsLib.Controls.Container","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Controllers.Controller","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Controls.Selection.AllAsSelectedMode","Indigox.Web.JsLib.Controls.Template","Indigox.Web.JsLib.Controls.Html.ItemControl","Indigox.Web.JsLib.Core"],function(s,e,A,q,c,j,x,y,u){var h=s.prototype;var m="valueChanged",k="itemAdding",d="itemAdded",f="itemRemoving",r="itemRemoved",t="itemSelectedChanged",w="selectedChanged";var o="PropertyChanging",l="PropertyChanged",b="ItemAdding",z="ItemAdded",g="ItemRemoving",n="ItemRemoved",a="ItemSelectedChanged",v="SelectedChanged";var p=Namespace("Indigox.Web.JsLib.Controls.Html").Class("ListControl").Extend(h).Constructor(function(B){h.constructor.apply(this,arguments);this.controller=null;this.items=new e();this.setSelMode(this.createSelectionMode())}).Members({registerEvents:function(){h.registerEvents.call(this);this.events.registerEvents(k,d,f,r,t,w)},registerListeners:function(){h.registerListeners.call(this);this.listeners.registerListeners(b,z,g,n,a,v)},initChildren:function(){var C=this.getItems();for(var B=0,D=C.length;B<D;B++){C[B].init()}},load:function(){return h.load.apply(this,arguments)},doLoad:function(C){var B=new c();if(this.getController()&&this.getController().getAutoLoad()==true){this.getController().load(function(){B.resolve()})}else{B.resolve()}return B.promise()},preLoadChildren:function(){var C=this.getItems();for(var B=0,D=C.length;B<D;B++){C[B].preLoad()}},loadChildren:function(){var C=this.getItems();var E=[];for(var B=0,D=C.length;B<D;B++){E.push(C[B].load())}return c.when(E)},unload:function(){h.unload.apply(this,arguments);if(this.getController()){this.getController().unload()}},unloadChildren:function(){var C=this.getItems();for(var B=0,D=C.length;B<D;B++){C[B].unload()}},setID:function(B){h.setID.call(this,B);this.updateAllChildrenID(this.items.toArray())},setController:function(C){if(!(C instanceof A)){var B=C;C=Type.forAlias(B.controllerType).createInstance();C.configure(B)}if(this.controller){this.controller.setView(null)}this.controller=C;if(this.controller){this.controller.setView(this)}this.clearItems();if(this.isLoaded()&&this.controller.autoLoad===true){this.controller.load()}},getController:function(){return this.controller},setValue:function(C){if(isUndefined(C)||!this.getSelMode().isValueChanged(this.value,C)){return}var B=this.value;this.fireListener(o,["value",C,B]);this.value=C;this.getSelMode().select(C,false);this.fireListener(l,["value",C,B]);this.fireEvent(m,[C])},getValue:function(){return this.value},insertChild:function(B,C){this.insertItem(B,C)},removeChild:function(B){this.removeItem(B)},newItem:function(B){},addItem:function(C){var B=this.getItems();this.insertItem(B.length,C)},addItems:function(B){for(var C=0,D;D=B[C];C++){this.addItem(D)}},insertItem:function(C,D){var B=this.getItems();if(C>B.length){throw new Error("out of range")}if(D instanceof y){this.setItemTemplate(D);this.items.insert(C,D)}else{if(!(D instanceof u)){D=this.newItem(D)}this.items.insert(C,D);D.setParent(this);D.addListener(this);this.updateChildrenID(this.items.toArray(),C);this.fireListener(b,[C,D]);this.fireEvent(k,[C,D]);if(this.isInited()){D.init()}if(this.isLoaded()){c.when(D.load()).done({handler:function(){this.fireListener(z,[C,D]);this.fireEvent(d,[C,D])},scope:this}).fail({handler:function(){debug.error([this.id," insertItem ",D.id," failed."].join(""))},scope:this})}else{this.fireListener(z,[C,D]);this.fireEvent(d,[C,D])}}},insertItems:function(C,B){var D=null,E=null;for(D=B.length-1;D>=0;D--){E=B[D];this.insertItem(C,E)}},removeItem:function(D){var B=this.getItems();var C=q.indexOf(B,D);this.fireListener(g,[C,D]);this.fireEvent(r,[C,D]);this.items.remove(D);D.unload();D.setParent(null);this.updateChildrenID(this.items.toArray(),C);this.fireEvent(r,[C,D]);this.fireListener(n,[C,D])},removeItems:function(C){var B=this.getItems();var E=null,F=null;for(E=0,F=B.length;E<F;E++){var D=null,G=null;for(D=0,G=C.length;D<G;D++){if(B[E]===C[D]){this.removeItem(B[E]);break}}}},clearItems:function(){var B=this.getItems();var C=null,D=null;for(C=0,D=B.length;C<D;C++){this.removeItem(B[C])}},setItems:function(B){this.clearItems();this.addItems(B)},getItems:function(){return this.items.toArray()},deselectItem:function(D){var B=this.getItems();var C=0,E=B.length;for(;C<E;C++){if(B[C].getValue()==D){B[C].setSelected(false)}}},selectItem:function(D){var B=this.getItems();var C=0,E=B.length;for(;C<E;C++){if(B[C].getValue()==D){B[C].setSelected(true)}}},getSelMode:function(){return this.selMode},setSelMode:function(B){if(this.selMode){this.removeListener(this.selMode)}this.selMode=B;if(this.selMode){this.selMode.bindControl(this)}},createSelectionMode:function(){var B=new x({});return B},getAllowDeselect:function(){if(this.getSelMode()){return this.getSelMode().getAllowDeselect()}},setAllowDeselect:function(B){if(this.getSelMode()){return this.getSelMode().setAllowDeselect(B)}},getReturnValueType:function(B){if(this.getSelMode()){return this.getSelMode().returnValueType}return"ARRAY"},setReturnValueType:function(B){if(this.getSelMode()){this.getSelMode().returnValueType=B}},getMode:function(){if(this.getSelMode()){return this.getSelMode().getSelectionMode()}},setMode:function(B){if(this.getSelMode()){this.getSelMode().setSelectionMode(B)}},isEditable:function(){return true},getSelectedItems:function(){var E=[],B=this.getItems();var C=null,D=null;for(C=0,D=B.length;C<D;C++){if(B[C].getSelected()){E.push(B[C])}}return E},select:function(B){this.setValue(B)},selectAll:function(){var B=this.items;for(var C=0,D=B.length;C<D;C++){B[C].setSelected(true)}},unselectAll:function(){var B=this.items;for(var C=0,D=B.length;C<D;C++){B[C].setSelected(false)}},reverse:function(){var B=this.items;for(var C=0,D=B.length;C<D;C++){B[C].setSelected(B[C].getSelected())}},onSelectedChanged:function(C,B){this.fireListener(a,[C,B]);this.fireEvent(t,[C,B])}}).$()});define("Indigox.Web.JsLib.Controls.Html.Literal",["Indigox.Web.JsLib.Utils.EncodeUtil","Indigox.Web.JsLib.Controls.Control","Indigox.Web.JsLib.Core"],function(d,e){var f=e.prototype;var b="PropertyChanging",c="PropertyChanged";var g="valueChanged";var a=Namespace("Indigox.Web.JsLib.Controls.Html").Class("Literal").Extend(f).Constructor(function(){f.constructor.apply(this,arguments);this.mode=a.MODE_ENCODE;this.html=""}).Static({MODE_PASSTHROUGH:0,MODE_ENCODE:1}).Members({isEditable:function(){return false},setMode:function(j){if(this.mode===j){return}var h=this.mode;this.fireListener(b,["mode",j,h]);this.mode=j;this.fireListener(c,["mode",j,h]);this.setHtml(this.converteToHtml(j,this.getMode()))},getMode:function(){return this.mode},setValue:function(j){if(this.value===j){return}var h=this.value;this.fireListener(b,["value",j,h]);this.value=j;this.fireListener(c,["value",j,h]);this.setHtml(this.converteToHtml(j,this.getMode()))},getValue:function(){return this.value},setHtml:function(j){var h=this.html;this.fireListener(b,["html",j,h]);this.html=j;this.fireListener(c,["html",j,h])},getHtml:function(){return[this.html].join("")},converteToHtml:function(h){if(this.getMode()===a.MODE_PASSTHROUGH){return h}else{h=d.encodeHTML(this.value);h=h.replace(/\r?\n/g,"</br>").replace(/[ ]/g,"&nbsp;");return h}}}).$()});define("Indigox.Web.JsLib.Controls.Html.LoadMask",["Indigox.Web.JsLib.Controls.Control","Indigox.Web.JsLib.Core"],function(b){var a=b.prototype;var f="show",c="hide";var g="PropertyChanging",d="PropertyChanged",j="Show",e="Hide";var h=Namespace("Indigox.Web.JsLib.Controls.Html").Class("LoadMask").Extend(a).Constructor(function(){a.constructor.apply(this,arguments);this.mode=h.OPACITY;this.remain=0}).Static({NONE:null,OPACITY:"opacity",TRANSPARENT:"transparent"}).Members({registerEvents:function(){a.registerEvents.call(this);this.events.registerEvents(f,c)},registerListeners:function(){a.registerListeners.call(this);this.listeners.registerListeners(j,e)},setMode:function(l){var k=this.mode;this.fireListener(g,["mode",l,k]);this.mode=l;this.fireListener(d,["mode",l,k])},getMode:function(){return this.mode},show:function(){this.setVisible(true);this.getParent().setMasked(this.mode);this.fireListener(j);this.fireEvent(f)},hide:function(){this.setVisible(false);this.getParent().setMasked(h.NONE);this.fireListener(e);this.fireEvent(c)}}).$()});define("Indigox.Web.JsLib.Controls.Html.Menu",["Indigox.Web.JsLib.Controls.Selection.NodeMode","Indigox.Web.JsLib.Controls.Html.HierarchyControl","Indigox.Web.JsLib.Core"],function(e,c){var f=c.prototype;var a="PropertyChanging",b="PropertyChanged";var d=Namespace("Indigox.Web.JsLib.Controls.Html").Class("Menu").Extend(f).Constructor(function(){f.constructor.apply(this,arguments);this.controller=null;this.orientation=d.ORIENTATION_HORIZONTAL;this.staticDisplayLevels=1;this.menuItemType="menuitem";this.actionMode=d.ACTION_MODE_MOUSEOVER;this.setSelMode(new e({mode:"SINGLE",allowDeselect:false}))}).Static({ORIENTATION_HORIZONTAL:0,ORIENTATION_VERTICAL:1,ACTION_MODE_MOUSEOVER:0,ACTION_MODE_CLICK:1}).Members({setOrientation:function(h){var g=this.orientation;this.fireListener(a,["orientation",h,g]);this.orientation=h;this.fireListener(b,["orientation",h,g])},getOrientation:function(){return this.orientation},setStaticDisplayLevels:function(h){var g=this.staticDisplayLevels;this.fireListener(a,["staticDisplayLevels",h,g]);this.staticDisplayLevels=h;this.fireListener(b,["staticDisplayLevels",h,g])},getStaticDisplayLevels:function(){return this.staticDisplayLevels},setActionMode:function(h){var g=this.actionMode;this.fireListener(a,["actionMode",h,g]);this.actionMode=h;this.fireListener(b,["actionMode",h,g])},getActionMode:function(){return this.actionMode},getLevel:function(){return 0},getSelectedText:function(){var g=this.getNodes();for(var h=0,k=g.length;h<k;h++){var j=g[h];if(j.selected===true){return j.getText()}}return""},onSelectedChanged:function(h,g){f.onSelectedChanged.apply(this,arguments);this.fireListener(b,["selectedText",this.getSelectedText()])},expandNode:function(h){var g=this.getController();if(g){g.setRelated(h.getRecord());g.load()}h.childLoaded=true},newNode:function(g){var h=Type.forAlias(this.menuItemType).createInstance();h.setRoot(this);if(g){h.configure(g)}return h}}).$()});define("Indigox.Web.JsLib.Controls.Html.MenuItem",["Indigox.Web.JsLib.Controls.Html.NodeControl","Indigox.Web.JsLib.Controls.Html.Menu","Indigox.Web.JsLib.Core"],function(c,e){var a=c.prototype;var h="valueChanged",g="itemAdded",d="itemRemoved";var k="PropertyChanging",f="PropertyChanged",b="ItemAdded",l="ItemRemoved";var j=Namespace("Indigox.Web.JsLib.Controls.Html").Class("MenuItem").Extend(a).Constructor(function(){a.constructor.apply(this,arguments);this.topMenu=false;this.level=1;this.orientation=j.ORIENTATION_VERTICAL;this.displaySubMenu=j.DISPLAYSUBMENU_STATIC;this.popout=false;this.popDirection=j.POPDIRECTION_RIGHT_TO_LEFT;this.menu=null}).Static({ORIENTATION_HORIZONTAL:0,ORIENTATION_VERTICAL:1,DISPLAYSUBMENU_STATIC:0,DISPLAYSUBMENU_DYNAMIC:1,POPDIRECTION_RIGHT_TO_LEFT:0,POPDIRECTION_TOP_TO_DOWN:1}).Members({load:function(){var m=a.load.apply(this,arguments);this.computeDisplaySubMenu();return m},registerEvents:function(){a.registerEvents.call(this);this.events.registerEvents(g,d)},registerListeners:function(){a.registerListeners.call(this);this.listeners.registerListeners(b,l)},hasChildMenus:function(){return this.childNodes.size()>0},setParent:function(m){if(m instanceof e){this.setTopMenu(true)}else{this.setTopMenu(false)}a.setParent.apply(this,arguments)},setTopMenu:function(n){if(this.topMenu===n){return}var m=this.topMenu;this.fireListener(k,["topMenu",n,m]);this.topMenu=n;this.fireListener(f,["topMenu",n,m])},getTopMenu:function(){return this.topMenu},setLevel:function(m){if(this.level===m){return}this.level=m},getLevel:function(){return this.level},setOrientation:function(n){if(this.orientation===n){return}var m=this.orientation;this.fireListener(k,["orientation",n,m]);this.orientation=n;this.fireListener(f,["orientation",n,m])},getOrientation:function(){return this.orientation},setDisplaySubMenu:function(m){if(this.displaySubMenu===m){return}this.displaySubMenu=m},getDisplaySubMenu:function(){return this.displaySubMenu},setPopout:function(n){if(this.popout===n){return}var m=this.popout;this.fireListener(k,["popout",n,m]);this.popout=n;if(!this.childLoaded){this.getRoot().expandNode(this)}this.fireListener(f,["popout",n,m])},getPopout:function(){return this.popout},setPopDirection:function(n){var m=this.popDirection;this.fireListener(k,["popDirection",n,m]);this.popDirection=n;this.fireListener(f,["popDirection",n,m])},getPopDirection:function(){return this.popDirection},showChildMenu:function(){if(this.getDisplaySubMenu()===j.DISPLAYSUBMENU_DYNAMIC){this.setPopout(true)}},hideChildMenu:function(){if(this.getDisplaySubMenu()===j.DISPLAYSUBMENU_DYNAMIC){this.setPopout(false)}},toggleChildMenu:function(){if(this.getDisplaySubMenu()===j.DISPLAYSUBMENU_DYNAMIC){if(this.getPopout()){this.setPopout(false)}else{this.setPopout(true)}}},computeDisplaySubMenu:function(){if(this.getRoot()!=null){if(this.getRoot().getStaticDisplayLevels()>this.getLevel()){this.setDisplaySubMenu(j.DISPLAYSUBMENU_STATIC);this.setPopout(true)}else{this.setDisplaySubMenu(j.DISPLAYSUBMENU_DYNAMIC)}}},onPropertyChanged:function(p,o,n,m){if(o==="staticDisplayLevels"){this.computeDisplaySubMenu()}}}).$()});define("Indigox.Web.JsLib.Controls.Html.NodeControl",["Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Controls.Container","Indigox.Web.JsLib.Core"],function(k,b,a,l){var d=l.prototype;var p="nodeAdding",c="nodeAdded",o="nodeRemoving",e="nodeRemoved",t="selectedChanged",g="valueChanged";var h="PropertyChanging",f="PropertyChanged",s="NodeAdding",m="NodeAdded",q="NodeRemoving",j="NodeRemoved",r="SelectedChanged";var n=Namespace("Indigox.Web.JsLib.Controls.Html").Class("NodeControl").Extend(d).Constructor(function(){d.constructor.apply(this,arguments);this.selected=false;this.text="";this.root=null;this.childNodes=new b();this.level=1}).Members({registerEvents:function(){d.registerEvents.call(this);this.events.registerEvents(p,c,o,e,t)},registerListeners:function(){d.registerListeners.call(this);this.listeners.registerListeners(s,m,q,j,r)},setLevel:function(u){if(this.level===u){return}this.level=u},getLevel:function(){return this.level},setRoot:function(u){this.root=u;this.addListener(u)},getRoot:function(){return this.root},setParent:function(u){if(u===this.parent){return}this.parent=u;if(u===null){if(this.isLoaded()){this.unload()}}},setValue:function(v){if(this.value===v){return}var u=this.value;this.fireListener(h,["value",v,u]);this.value=v;this.fireListener(f,["value",v,u]);this.fireEvent(g,[this.value])},getValue:function(){return this.value},setText:function(v){if(this.text===v){return}var u=this.text;this.fireListener(h,["text",v,u]);this.text=v;this.fireListener(f,["text",v,u])},getText:function(){return this.text},getSelected:function(){return this.selected},setSelected:function(v){if(isNullOrUndefined(v)||v===this.selected){return}var u=this.selected;this.fireListener(h,["selected",v,u]);this.selected=v;this.fireListener(f,["selected",v,u]);this.fireListener(r,[v]);this.fireEvent(t,[v])},toggleSelected:function(){this.setSelected(!this.getSelected())},setChildNodes:function(z){this.clearChildNodes();var w=null,x=null;var y=new b(z);var u=this.getRoot();for(w=0,x=z.length;w<x;w++){if(z[w] instanceof n){this.addChildNode(z[w])}else{var v=u.newNode(z[w]);y.set(w,v);this.addChildNode(v)}}this.childNodes=y},hasChildNodes:function(){return this.childNodes.size()!==0},getChildNodes:function(){return this.childNodes.toArray()},addChildNode:function(v){var u=this.getChildNodes().length;this.insertChildNode(u,v)},insertChildNode:function(v,w){var u=this.getRoot();if(!(w instanceof n)){w=u.newNode(w)}w.setParent(this);this.childNodes.insert(v,w);this.updateChildID(v);this.fireListener(s,[v,w]);this.fireEvent(p,[v,w]);w.setLevel(this.getLevel()+1);if(u){u.addNode(w);w.setRoot(u)}if(this.isInited()){w.init()}if(this.isLoaded()){a.when(w.load()).done({handler:function(){this.fireListener(m,[v,w]);this.fireEvent(c,[v,w])},scope:this}).fail({handler:function(){debug.error([this.id," insertChildNode ",w.id," failed."].join(""))},scope:this})}else{this.fireListener(m,[v,w]);this.fireEvent(c,[v,w])}},removeChildNode:function(v){var w=this.getChildNodes();var u=k.indexOf(w,v);this.fireEvent(o,[u,v]);this.fireListener(q,[u,v]);this.childNodes.remove(v);v.unload();v.setParent(null);this.updateChildID(u);this.fireEvent(e,[u,v]);this.fireListener(j,[u,v])},clearChildNodes:function(){var w=this.getChildNodes();var u=null,v=null;for(u=0,v=w.length;u<v;u++){this.removeChildNode(w[u])}},preLoadChildren:function(){var v=this.getChildNodes();for(var u=0,w=v.length;u<w;u++){v[u].preLoad()}},loadChildren:function(){var v=this.getChildNodes();var x=[];for(var u=0,w=v.length;u<w;u++){x.push(v[u].load())}return a.when(x)},unloadChildren:function(){var w=this.childNodes;for(var u=0,v=w.size();u<v;u++){w.get(u).unload()}},initChildren:function(){var w=this.childNodes;for(var u=0,v=w.size();u<v;u++){w.get(u).init()}},updateChildID:function(B){var C=this.childNodes,y=null,w=null;if(B>=C.size()){return}var z=this.id,v=C.get(B).getName(),A=0;for(y=0,w=B;y<w;y++){if(C.get(y).getName()===v){A++}}for(y=B,w=C.size();y<w;y++){var u=C.get(y);if(u.getName()===v){var x=z+"."+v+":"+A++;u.setID(x);u.updateChildrenID()}}},updateChildrenID:function(){var w=this.childNodes;for(var u=0,v=w.size();u<v;u++){this.updateChildID(u)}},isEditable:function(){return true}}).$()});define("Indigox.Web.JsLib.Controls.Html",["Indigox.Web.JsLib.Controls.Html.AutoCompleteBox","Indigox.Web.JsLib.Controls.Html.AutoCompleteItem","Indigox.Web.JsLib.Controls.Html.CompleteItem","Indigox.Web.JsLib.Controls.Html.Accordion","Indigox.Web.JsLib.Controls.Html.AccordionItem","Indigox.Web.JsLib.Controls.Html.AnimatedList","Indigox.Web.JsLib.Controls.Html.BadgeLinkMenuItem","Indigox.Web.JsLib.Controls.Html.BlankDropDownItem","Indigox.Web.JsLib.Controls.Html.Button","Indigox.Web.JsLib.Controls.Html.ButtonMenuItem","Indigox.Web.JsLib.Controls.Html.CheckBox","Indigox.Web.JsLib.Controls.Html.CheckBoxItem","Indigox.Web.JsLib.Controls.Html.CheckBoxList","Indigox.Web.JsLib.Controls.Html.CheckTreeNode","Indigox.Web.JsLib.Controls.Html.Contact","Indigox.Web.JsLib.Controls.Html.Content","Indigox.Web.JsLib.Controls.Html.Currency","Indigox.Web.JsLib.Controls.Html.DataItem","Indigox.Web.JsLib.Controls.Html.DataList","Indigox.Web.JsLib.Controls.Html.DatePicker","Indigox.Web.JsLib.Controls.Html.Dialog","Indigox.Web.JsLib.Controls.Html.DropDownItem","Indigox.Web.JsLib.Controls.Html.DropDownList","Indigox.Web.JsLib.Controls.Html.DropDownMenuItem","Indigox.Web.JsLib.Controls.Html.FieldContainer","Indigox.Web.JsLib.Controls.Html.FieldControl","Indigox.Web.JsLib.Controls.Html.FieldSet","Indigox.Web.JsLib.Controls.Html.FileUpload","Indigox.Web.JsLib.Controls.Html.FileUploadItem","Indigox.Web.JsLib.Controls.Html.FileUploadList","Indigox.Web.JsLib.Controls.Html.HierarchyControl","Indigox.Web.JsLib.Controls.Html.HyperLink","Indigox.Web.JsLib.Controls.Html.ItemControl","Indigox.Web.JsLib.Controls.Html.Label","Indigox.Web.JsLib.Controls.Html.LinkMenuItem","Indigox.Web.JsLib.Controls.Html.LinkTreeNode","Indigox.Web.JsLib.Controls.Html.ListControl","Indigox.Web.JsLib.Controls.Html.Literal","Indigox.Web.JsLib.Controls.Html.LoadMask","Indigox.Web.JsLib.Controls.Html.Menu","Indigox.Web.JsLib.Controls.Html.MenuItem","Indigox.Web.JsLib.Controls.Html.NodeControl","Indigox.Web.JsLib.Controls.Html.Paging","Indigox.Web.JsLib.Controls.Html.Panel","Indigox.Web.JsLib.Controls.Html.ProgressBar","Indigox.Web.JsLib.Controls.Html.RadioBox","Indigox.Web.JsLib.Controls.Html.RadioBoxItem","Indigox.Web.JsLib.Controls.Html.RadioBoxList","Indigox.Web.JsLib.Controls.Html.RichTextBox","Indigox.Web.JsLib.Controls.Html.RichTextView","Indigox.Web.JsLib.Controls.Html.TextBox","Indigox.Web.JsLib.Controls.Html.Tooltip","Indigox.Web.JsLib.Controls.Html.Tree","Indigox.Web.JsLib.Controls.Html.TreeNode","Indigox.Web.JsLib.Controls.Html.UserNode","Indigox.Web.JsLib.Controls.Html.UserSelect"],function(N,P,D,s,B,p,c,Z,V,M,u,j,ac,f,o,n,v,r,m,z,w,E,y,L,d,T,F,ab,l,a,R,x,aa,G,O,e,C,h,J,S,A,b,X,g,I,ad,Q,K,Y,W,ae,H,q,U,t,k){return{AutoCompleteBox:N,AutoCompleteItem:P,CompleteBox:D,Accordion:s,AccordionItem:B,AnimatedList:p,BadgeLinkMenuItem:c,BlankDropDownItem:Z,Button:V,ButtonMenuItem:M,CheckBox:u,CheckBoxItem:j,CheckBoxList:ac,CheckTreeNode:f,Contact:o,Content:n,Currency:v,DataItem:r,DataList:m,DatePicker:z,Dialog:w,DropDownItem:E,DropDownList:y,DropDownMenuItem:L,FieldContainer:d,FieldControl:T,FieldSet:F,FileUpload:ab,FileUploadItem:l,FileUploadList:a,HierarchyControl:R,HyperLink:x,ItemControl:aa,Label:G,LinkMenuItem:O,LinkTreeNode:e,ListControl:C,Literal:h,LoadMask:J,Menu:S,MenuItem:A,NodeControl:b,Paging:X,Panel:g,ProgressBar:I,RadioBox:ad,RadioBoxItem:Q,RadioBoxList:K,RichTextBox:Y,RichTextView:W,TextBox:ae,Tooltip:H,Tree:q,TreeNode:U,UserNode:t,UserSelect:k}});define("Indigox.Web.JsLib.Controls.Html.Paging",["Indigox.Web.JsLib.Controls.FormControl","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Core"],function(m,k,f){var a=m.prototype;var c=0,h=1,j=2,b=3,n=4,d=5;var l="PropertyChanging",g="PropertyChanged";var e=Namespace("Indigox.Web.JsLib.Controls.Html").Class("Paging").Extend(a).Constructor(function(){a.constructor.apply(this,arguments);this.currentPage=1;this.pageSize=10;this.modelLoading=false}).Members({arrayController:null,totalCount:null,pageCount:null,getPageSize:function(){return this.pageSize},setPageSize:function(o){o=parseInt(o);this.pageSize=o},getTotalCount:function(){return this.totalCount},setTotalCount:function(o){o=parseInt(o);this.totalCount=o},getModelLoding:function(){return this.modelLoading},setModelLoding:function(p){var o=this.modelLoading;this.fireListener(l,["modelLoading",p,o]);this.modelLoading=p;this.fireListener(g,["modelLoading",p,o])},getPageCount:function(){return this.pageCount},setPageCount:function(p){p=parseInt(p);var o=this.pageCount;this.fireListener(l,["pageCount",p,o]);this.pageCount=p;this.fireListener(g,["pageCount",p,o])},getArrayController:function(){return this.arrayController},setArrayController:function(o){this.arrayController=o;this._getTotalCount({handler:this.updatePageCount,scope:this})},getCurrentPage:function(){return this.currentPage},setCurrentPage:function(p){p=parseInt(p);var o=this.currentPage;this.fireListener(l,["currentPage",p,o]);this.currentPage=p;this.fireListener(g,["currentPage",p,o])},updatePageCount:function(p){this.setTotalCount(p);var o=Math.ceil(this.getTotalCount()/this.getPageSize());if(o===0){o=1}this.setPageCount(o)},_getTotalCount:function(p){var o=this.getArrayController().getParams();return this.getArrayController().getModel().getTotalCount(o,p)},_reload:function(o){this.setModelLoding(true);this.arrayController.setParam("FirstResult",o);var p=new k(this.onModelLoaded,this,[]);this.arrayController.load(p)},onModelLoaded:function(){if(this.getState()===d){return}var o=this.getArrayController().getModel().size();if(o===0||(o%this.getPageSize())!==0){this.fireListener(g,["isLastPage",true])}else{this.fireListener(g,["isLastPage",false])}this.setModelLoding(false)},previousPage:function(){if(!this.isFirstPage()){this._reload((this.getCurrentPage()-2)*this.getPageSize());this.setCurrentPage(this.getCurrentPage()-1)}},nextPage:function(){this._getTotalCount({handler:this.doNextPage,scope:this})},doNextPage:function(o){this.updatePageCount(o);if(!this.isLastPage()){this._reload(this.getCurrentPage()*this.getPageSize());this.setCurrentPage(this.getCurrentPage()+1)}},moveLast:function(){this._getTotalCount({handler:this.doMovelast,scope:this})},doMovelast:function(o){this.updatePageCount(o);if(!this.isLastPage()){this._reload((this.getPageCount()-1)*this.getPageSize());this.setCurrentPage(this.getPageCount())}},isFirstPage:function(){return(this.getCurrentPage()==1)},isLastPage:function(){if(this.getTotalCount()>0&&this.getCurrentPage()>=this.getPageCount()){this.fireListener(g,["isLastPage",true]);return true}return false},moveFirst:function(){this._reload(0);this.setCurrentPage(1)},moveTo:function(o){o=f.parseInt(o);if(!isNaN(o)&&this.getPageCount()>=o){this._reload((o-1)*this.getPageSize());this.setCurrentPage(o)}},reset:function(){debug.warn("Paging.reset method is deprecated, please use DataList.load to refresh DataList.");this.getArrayController().clearModel();this._reload(0);this.setCurrentPage(1);this._getTotalCount({handler:this.updatePageCount,scope:this})}}).$()});define("Indigox.Web.JsLib.Controls.Html.Panel",["Indigox.Web.JsLib.Controls.FormControl","Indigox.Web.JsLib.Core"],function(a){var g=a.prototype;var d="expanded",c="collapsed";var b="PropertyChanging",e="PropertyChanged";var f=Namespace("Indigox.Web.JsLib.Controls.Html").Class("Panel").Extend(g).Constructor(function(){g.constructor.apply(this,arguments);this.title=null;this.collapsible=true;this.collapsed=true}).Members({registerEvents:function(){g.registerEvents.call(this);this.events.registerEvents(d,c)},setTitle:function(j){if(isNullOrUndefined(j)){return}if(this.title===j){return}var h=this.title;this.fireListener(b,["title",j,h]);this.title=j;this.fireListener(e,["title",j,h])},getTitle:function(){return this.title},setCollapsed:function(j){if(isNullOrUndefined(j)){return}if(this.collapsed===j){return}var h=this.collapsed;this.fireListener(b,["collapsed",j,h]);this.collapsed=j;this.fireListener(e,["collapsed",j,h])},getCollapsed:function(){return this.collapsed},collapse:function(){this.setCollapsed(true);this.fireEvent(c,[this.getCollapsed()])},expand:function(){this.setCollapsed(false);this.fireEvent(d,[this.getCollapsed()])},toggleCollapse:function(){if(this.getCollapsed()){this.expand()}else{this.collapse()}}}).$()});define("Indigox.Web.JsLib.Controls.Html.ProgressBar",["Indigox.Web.JsLib.Controls.Html.FieldControl","Indigox.Web.JsLib.Controls.Html.Label","Indigox.Web.JsLib.Core"],function(f,e){var d=f.prototype;var b="PropertyChanging",c="PropertyChanged";var a=Namespace("Indigox.Web.JsLib.Controls.Html").Class("ProgressBar").Extend(d).Constructor(function(){d.constructor.apply(this,arguments);this.maxValue=100;this.value=0;this.text=""}).Members({getMaxValue:function(){return this.maxValue},setMaxValue:function(g){this.maxValue=g},getText:function(){return this.text},setText:function(h){var g=this.text;this.fireListener(b,["text",h,g]);this.text=h;this.fireListener(c,["text",h,g])}}).$()});define("Indigox.Web.JsLib.Controls.Html.RadioBox",["Indigox.Web.JsLib.Controls.Html.FieldControl","Indigox.Web.JsLib.Core"],function(h){var c=h.prototype;var d="clicked",g="checkChanged",k="textChanged";var j="PropertyChanging",f="PropertyChanged",e="CheckChanged";function a(l){if(l==="1"||l===1||l==="true"||l===true){return true}else{if(l==="0"||l===0||l==="false"||l===false){return false}else{return !!l}}}var b=Namespace("Indigox.Web.JsLib.Controls.Html").Class("RadioBox").Extend(c).Constructor(function(){c.constructor.apply(this,arguments);this.checked=false;this.text="";this.rawValue=""}).Members({registerEvents:function(){c.registerEvents.call(this);this.events.registerEvents(d,g,k)},registerListeners:function(){c.registerListeners.call(this);this.listeners.registerListeners(e)},setReadonly:function(l){c.setReadonly.apply(this,arguments);this.setEnable(!l)},setRawValue:function(l){if(isNullOrUndefined(l)){return}this.rawValue=l},getRawValue:function(){return this.rawValue},setValue:function(m){m=a(m);var l=this.getChecked();this.fireListener(j,["value",m,l]);this.setChecked(m);this.fireListener(f,["value",m,l])},getValue:function(){return this.getChecked()},getChecked:function(){return this.checked},setChecked:function(m){if(isNullOrUndefined(m)||m===this.checked){return}var l=this.checked;this.fireListener(j,["checked",m,l]);this.checked=m;this.fireListener(f,["checked",m,l]);this.fireListener(e,[this.checked]);this.fireEvent(g,[this.checked])},toggleChecked:function(){this.setChecked(!this.getChecked())},getText:function(){return this.text},setText:function(m){if(isNullOrUndefined(m)){return}var l=this.text;this.fireListener(j,["text",m,l]);this.text=m;this.fireListener(f,["text",m,l]);this.fireEvent(k,[this.text])},click:function(){if(this.enable){if(!this.checked){this.setChecked(true)}this.fireEvent(d)}}}).$()});define("Indigox.Web.JsLib.Controls.Html.RadioBoxItem",["Indigox.Web.JsLib.Controls.Html.ItemControl","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Core"],function(b,e){var g=b.prototype;var h="selectedChanged";var c="PropertyChanging",d="PropertyChanged",f="SelectedChanged";var a=Namespace("Indigox.Web.JsLib.Controls.Html").Class("RadioBoxItem").Extend(g).Constructor(function(){g.constructor.apply(this,arguments);this.radioBox=null}).Members({registerEvents:function(){g.registerEvents.call(this);this.events.registerEvents(h)},registerListeners:function(){g.registerListeners.call(this);this.listeners.registerListeners(f)},initChildren:function(){if(this.getRadioBox()){this.getRadioBox().init()}},preLoadChildren:function(){if(this.getRadioBox()){this.getRadioBox().preLoad()}},loadChildren:function(){if(this.getRadioBox()){return this.getRadioBox().load()}return null},unloadChildren:function(){if(this.getRadioBox()){this.getRadioBox().unload()}},setValue:function(k){var j=this.getRadioBox().getRawValue();this.fireListener(c,["value",k,j]);this.getRadioBox().setRawValue(k);k=this.getRadioBox().getRawValue();this.fireListener(d,["value",k,j])},getValue:function(){return this.getRadioBox().getRawValue()},setText:function(j){return this.getRadioBox().setText(j)},getText:function(){return this.getRadioBox().getText()},getRadioBox:function(){return this.radioBox},setRadioBox:function(k){var j=this.radioBox;this.fireListener(c,["radioBox",k,j]);this.radioBox=k;this.radioBox.addListener(this);e.when(this.catchUpLoadChild(k)).done({handler:function(){this.fireListener(d,["radioBox",k,j])},scope:this}).fail({handler:function(){debug.error([this.id," set radioBox failed."].join(""))},scope:this})},setID:function(j){g.setID.call(this,j);if(this.getRadioBox()){this.getRadioBox().setID(j+".radioBox:0")}},getSelected:function(){return this.getRadioBox().getChecked()},setSelected:function(k){if(isNullOrUndefined(k)||k===this.selected){return}var j=this.selected;this.fireListener(c,["selected",k,j]);this.selected=k;this.getRadioBox().setChecked(k);this.fireListener(d,["selected",k,j]);this.fireListener(f,[k]);this.fireEvent(h,[k])},onCheckChanged:function(k,j){if(!isNullOrUndefined(j)&&j!=this.selected){this.setSelected(j)}}}).$()});define("Indigox.Web.JsLib.Controls.Html.RadioBoxList",["Indigox.Web.JsLib.Controls.Html.ListControl","Indigox.Web.JsLib.Controls.Html.RadioBox","Indigox.Web.JsLib.Controls.Html.RadioBoxItem","Indigox.Web.JsLib.Controls.Selection.ItemMode","Indigox.Web.JsLib.Core"],function(c,e,a,d){var f=c.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Html").Class("RadioBoxList").Extend(f).Constructor(function(){this.allowDeselect=false;f.constructor.apply(this,arguments)}).Members({setReadonly:function(h){f.setReadonly.apply(this,arguments);var g=this.getItems();var j=null,k=null;for(j=0,k=g.length;j<k;j++){g[j].getRadioBox().setEnable(!h)}},newItem:function(h){var j=new a();var g=new e();j.setRadioBox(g);if(h){j.configure(h)}return j},insertItem:function(g,h){f.insertItem.apply(this,arguments);this.items.get(g).addListener(this)},createSelectionMode:function(){var h=this.mode?this.mode:"SINGLE";var g=isNullOrUndefined(this.allowDeselect)?"true":this.allowDeselect;var j=new d({mode:h,allowDeselect:g});return j}}).$()});define("Indigox.Web.JsLib.Controls.Html.RichTextBox",["Indigox.Web.JsLib.Controls.Html.FieldControl","Indigox.Web.JsLib.Core"],function(e){var d=e.prototype;var a="PropertyChanging",b="PropertyChanged";var c=Namespace("Indigox.Web.JsLib.Controls.Html").Class("RichTextBox").Extend(d).Constructor(function(){d.constructor.apply(this,arguments);this.value=this.value||"";this.mode=this.mode||"simplehtml"}).Members({getMode:function(){return this.mode},setMode:function(g){var f=this.mode;this.fireListener(a,["mode",g,f]);this.mode=g;this.fireListener(b,["mode",g,f])}}).$()});define("Indigox.Web.JsLib.Controls.Html.RichTextView",["Indigox.Web.JsLib.Utils.EncodeUtil","Indigox.Web.JsLib.Controls.Html.Literal","Indigox.Web.JsLib.Core"],function(d,a){var b="PropertyChanging",c="PropertyChanged";var f="valueChanged";var e=a.prototype;var g=Namespace("Indigox.Web.JsLib.Controls.Html").Class("RichTextView").Extend(e).Constructor(function(){e.constructor.apply(this,arguments);this.mode=a.MODE_PASSTHROUGH}).Members({}).$()});define("Indigox.Web.JsLib.Controls.Html.TextBox",["Indigox.Web.JsLib.Controls.Html.FieldControl","Indigox.Web.JsLib.Core"],function(g){var f=g.prototype;var h="Clicked",b="PropertyChanging",c="PropertyChanged",a="ValueChanged";var e="clicked";var d=Namespace("Indigox.Web.JsLib.Controls.Html").Class("TextBox").Extend(f).Constructor(function(){f.constructor.apply(this,arguments)}).Members({getValue:function(){if(isNullOrUndefined(this.value)){return""}else{return this.value}},click:function(j){this.fireListener(h,[j]);this.fireEvent(e,[j])},registerEvents:function(){f.registerEvents.apply(this,arguments);this.events.registerEvents(e)},registerListeners:function(){f.registerListeners.apply(this,arguments);this.listeners.registerListeners(h)}}).$()});define("Indigox.Web.JsLib.Controls.Html.Tooltip",["Indigox.Web.JsLib.Controls.Html.Panel","Indigox.Web.JsLib.Core"],function(g){var f=g.prototype;var h="shown",c="hidden";var a="Shown",e="Hidden",b="ControlAdded";var d=Namespace("Indigox.Web.JsLib.Controls.Html").Class("Tooltip").Extend(f).Constructor(function(){f.constructor.apply(this,arguments)}).Members({registerEvents:function(){f.registerEvents.call(this);this.events.registerEvents(h,c)},registerListeners:function(){f.registerListeners.call(this);this.listeners.registerListeners(a,e,b)},show:function(j,k){this.setVisible(true);this.fireListener(a,[j,k]);this.fireEvent(h,[j,k])},hide:function(){if(this.getVisible()===false){return}this.setVisible(false);this.fireEvent(c)},addControl:function(j){this.fireListener(b,[j])}}).$()});define("Indigox.Web.JsLib.Controls.Html.Tree",["Indigox.Web.JsLib.Controls.Html.Button","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Controls.Html.TreeNode","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Controls.Html.HierarchyControl","Indigox.Web.JsLib.Core"],function(f,h,g,k,e,m,j){var c=j.prototype;var a="NodeAdded",l="NodeRemoved",b="NodeSelectedChanged";var d=Namespace("Indigox.Web.JsLib.Controls.Html").Class("Tree").Extend(c).Constructor(function(){c.constructor.apply(this,arguments);this.controller=null;this.treeNodeType="treenode";this.valueField="id";this.value=new m();this.selectable=false;this.expandLevel=1;this.selectedPath="";this.mode="MULTI";this.allowDeselect=true;this.nodeIndexer={}}).Members({newNode:function(n){var o=Type.forAlias(this.treeNodeType).createInstance();o.setRoot(this);if(n){o.configure(n)}return o},getExpandLevel:function(){return this.expandLevel},expandNode:function(n){this.getController().setRelated(n.getRecord());this.getController().load();n.childLoaded=true;n.fireListener("PropertyChanged",["hasChildNodes()",n.hasChildNodes()])},getLevel:function(){return 0},expandPath:function(r){if(e.isNullOrEmpty(r)){return}var n=r.split("/");var o=null,p=null;for(o=0,p=n.length;o<(p-1);o++){this.findNodeByValue(n[o]).expand()}if(p>0){var q=this.findNodeByValue(n[p-1]);if(q){q.setSelected(true)}else{}}},findNodeByValue:function(n){if(isNullOrUndefined(this.nodeIndexer[n])){this.visit(this)}return this.nodeIndexer[n]},visit:function(q){var o=null;var p=null;var r=q.getChildNodes();for(o=0,p=r.length;o<p;o++){var s=r[o];var n=s.getValue();this.nodeIndexer[n]=s;this.visit(s)}},load:function(){var n=c.load.apply(this,arguments);if(!this.getSelMode()){this.setSelMode(this.createSelectionMode())}this.expandPath(this.selectedPath);return n},onNodeAdded:function(p,n,o){},setValue:function(){c.setValue.apply(this,arguments)},selectNode:function(r){var p=this.getNodes();var q=null,s=null,o=false;for(q=0,s=p.length;q<s;q++){if(p[q].getValue()==r){p[q].setSelected(true);o=true;break}}if(!o){var n=this.getController();n.setParam(this.valueField,r);n.load({handler:this.selectNode,scope:this,args:[r]})}}}).$()});define("Indigox.Web.JsLib.Controls.Html.TreeNode",["Indigox.Web.JsLib.Utils.AsyncUtil","Indigox.Web.JsLib.Controls.Html.NodeControl","Indigox.Web.JsLib.Core"],function(c,o){var e=o.prototype;var a="expanded",l="collapsed",d="nodeAdded",f="nodeRemoved",r="clicked";var q="Expanded",k="Collapsed",m="NodeAdded",j="NodeRemoved",b="ControlChanged",s="ButtonChanged",h="PropertyChanging",g="PropertyChanged",p="Clicked";var n=Namespace("Indigox.Web.JsLib.Controls.Html").Class("TreeNode").Extend(e).Constructor(function(){e.constructor.apply(this,arguments);this.collapsed=true;this.childLoaded=false}).Members({registerEvents:function(){e.registerEvents.call(this);this.events.registerEvents(a,l,r)},registerListeners:function(){e.registerListeners.call(this);this.listeners.registerListeners(q,k,s,b,p)},setCollapsed:function(u){var t=this.collapsed;this.fireListener(h,["collapsed",u,t]);this.collapsed=u;this.fireListener(g,["collapsed",u,t])},getCollapsed:function(){return this.collapsed},hasChildNodes:function(){if(this.childLoaded){return this.childNodes.size()>0}else{return true}},isLastChild:function(){var u=this.getParent().getChildNodes();var t=u.length;return u[t-1]===this},load:function(){var t=e.load.apply(this,arguments).done({handler:function(){if(this.getLevel()<this.getRoot().getExpandLevel()){this.expand()}},scope:this});return t},collapse:function(){this.setCollapsed(true);c.invokeAsync({scope:this,handler:this.doCollapse})},doCollapse:function(){this.fireListener(k,[this]);this.fireEvent(l,[this])},expand:function(){if(this.getCollapsed()){this.setCollapsed(false);if(!this.childLoaded){this.getRoot().expandNode(this)}c.invokeAsync({scope:this,handler:this.doExpand})}},doExpand:function(){this.fireListener(q,[this]);this.fireEvent(a,[this])},toggleCollapse:function(){if(this.getCollapsed()){this.expand()}else{this.collapse()}},click:function(){this.toggleSelected();this.fireListener(p,[]);this.fireEvent(r,[])}}).$()});define("Indigox.Web.JsLib.Controls.Html.UserNode",["Indigox.Web.JsLib.Controls.Html.ItemControl","Indigox.Web.JsLib.Core"],function(e){var a=e.prototype;var f="valueChanged",j="textChanged";var h="PropertyChanging",d="PropertyChanged",c="ValueChanged",b="TextChanged";var g=Namespace("Indigox.Web.JsLib.Controls.Html").Class("UserNode").Extend(a).Constructor(function(){a.constructor.apply(this,arguments);this.text=this.text||"";this.value=this.value||""}).Members({getValue:function(){return this.value},getText:function(){return this.text},setValue:function(l){var k=this.value;this.fireListener(h,["value",l,k]);this.value=l;this.fireListener(d,["value",l,k]);this.fireEvent(f,[this.value])},setText:function(l){var k=this.text;this.fireListener(h,["text",l,k]);this.text=l;this.fireListener(d,["text",l,k]);this.fireEvent(j,[this.text])},setUserName:function(k){this.setText(k)},getUserName:function(){return this.getText()},setUserID:function(k){this.setValue(k)},getUserID:function(){return this.getValue()},registerEvents:function(){a.registerEvents.call(this);this.events.registerEvents(f,j)},registerListeners:function(){a.registerListeners.call(this);this.listeners.registerListeners(c,b)}}).$()});define("Indigox.Web.JsLib.Controls.Html.UserSelect",["Indigox.Web.JsLib.Controls.Html.UserNode","Indigox.Web.JsLib.Controls.Html.Button","Indigox.Web.JsLib.Controls.Container","Indigox.Web.JsLib.Core"],function(h,e,c){var b=c.prototype;var l="selectButtonClicked",g="valueChanged";var j="SelectButtonClicked",k="PropertyChanging",f="PropertyChanged",a="OpenDialog";var d=Namespace("Indigox.Web.JsLib.Controls.Html").Class("UserSelect").Extend(b).Constructor(function(){b.constructor.apply(this,arguments);this.value=[];this.mode="12345";this.buttonText="...";this.multi=false;this.userNodes=[]}).Members({registerEvents:function(){b.registerEvents.call(this);this.events.registerEvents(l,g)},registerListeners:function(){b.registerListeners.call(this);this.listeners.registerListeners(j,a)},getValue:function(){return this.value},setValue:function(m){this.setUsers(m);this.fireEvent(g,[this.value])},getUserNodes:function(){return this.userNodes},setUserNodes:function(n){var m=this.userNodes;this.fireListener(k,["userNodes",n,m]);this.userNodes=n;this.fireListener(f,["userNodes",n,m])},getMode:function(){return this.mode},setMode:function(n){var m=this.mode;this.fireListener(k,["mode",n,m]);this.mode=n;this.fireListener(f,["mode",n,m])},getMulti:function(){return this.multi},setMulti:function(n){var m=this.multi;this.fireListener(k,["multi",n,m]);this.multi=n;this.fireListener(f,["multi",n,m])},setUsers:function(m){this.clearUsers();this.addUserRange(m)},addUserRange:function(o){if(o!=null&&o.length>0){var m=null,n=null;for(m=0,n=o.length;m<n;m++){this.addUser(o[m])}}},addUser:function(n){this.value.push(n);var m=new h();m.configure(n);this.userNodes.push(m);this.addChild(m);return m},clearUsers:function(){if(this.userNodes){var m=null,n=null;for(m=0,n=this.userNodes.length;m<n;m++){var o=this.userNodes[m];this.removeChild(o)}this.userNodes=[];this.value=[]}},openDialog:function(){if(this.getEnable()===true&&this.getReadonly()===false){this.fireListener(a)}},isEditable:function(){return true}}).$()});define("Indigox.Web.JsLib.Controls.Plugins.BadgePlugin",["Indigox.Web.JsLib.Controls.Plugins.Plugin","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.CQRS.Batch","Indigox.Web.JsLib.CQRS.AutoBatch","Indigox.Web.JsLib.Utils.DelayedTask","Indigox.Web.JsLib.Utils.Delegate","Indigox.Web.JsLib.Core"],function(a,h,g,e,d,b){var c=a.prototype;var f=Namespace("Indigox.Web.JsLib.Controls.Plugins").Class("BadgePlugin").Extend(c).Constructor(function(j){c.constructor.apply(this,arguments);j=h.copyExist({query:null,timeout:null},j);this.configure(j);this.delayTask=null;this.delayTask=new d(function(){this.queryBadge()},this,[])}).Members({setQuery:function(j){this.query=j},getQuery:function(){return this.query},setTimeout:function(j){this.timeout=j},getTimeout:function(){return this.timeout},onLoading:function(){this.queryBadge()},onUnload:function(){if(this.delayTask){this.delayTask.cancel();this.delaytask=null}},queryBadge:function(){debug.log("queryBadge "+new Date());if(this.delayTask){this.delayTask.cancel()}var j=e.getCurrentBatch();j.size({name:this.getQuery(),callback:b.create(this.handleBadge,this)})},handleBadge:function(j){this.getControl().setBadge(j);var k=this.getTimeout();if(!isNullOrUndefined(k)){this.delayTask.delay(k)}}}).$()});define("Indigox.Web.JsLib.Controls.Plugins.CalculatePlugin",["Indigox.Web.JsLib.Controls.Plugins.Plugin","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Utils.ControlUtil","Indigox.Web.JsLib.Core"],function(Plugin,Util,StringUtil,ControlUtil){var base=Plugin.prototype;var CalculatePlugin=Namespace("Indigox.Web.JsLib.Controls.Plugins").Class("CalculatePlugin").Extend(base).Constructor(function(option){base.constructor.apply(this,arguments);this.relativeControls=[];option=Util.copyExist({formular:null},option);this.configure(option)}).Members({setFormular:function(formular){this.formular=formular;this._initFormular()},getFormular:function(){return this.formular},evaluateValue:function(){var formularString=this.getFormular();var i,length;for(i=0;i<this.relativeControls.length;i++){var val=this.relativeControls[i].getValue();if((isNaN(val))&&(isString(val))){val=val.replace(/\'/g,"\\'");val=val.replace(/\"/g,'\\"');val='"'+val+'"'}if(StringUtil.isNullOrEmpty(val)){val="0"}var reg=eval("/{"+this.relativeControls[i].getName()+"}/g");formularString=formularString.replace(reg,"("+val+")")}var result=eval(formularString);if((typeof(result)==="number")&&(result.toString()=="NaN")){result=""}return result},onRelativeControlPropertyChanged:function(source,property,value,oldValue){if(property=="value"){this.getControl().setValue(this.evaluateValue())}},setControl:function(control){base.setControl.apply(this,arguments);this._initFormular()},onLoading:function(){this._initFormular()},_initFormular:function(){if(this.getFormular()==null){return}if(this.getControl()==null){return}var formularReg=/(\{\w*\})/g;var reg=/(\w+)/g;var matches=this.getFormular().match(formularReg);var i,length;for(i=0;i<matches.length;i++){var controlName=matches[i].match(reg)[0];var controls=ControlUtil.findControlFromNearestParent(this.getControl(),controlName);if((controls==null)||(controls.length===0)){continue}var control=controls[0];this.relativeControls.push(control);control.addListener(this,{onPropertyChanged:this.onRelativeControlPropertyChanged})}}}).$()});define("Indigox.Web.JsLib.Controls.Plugins",["Indigox.Web.JsLib.Controls.Plugins.BadgePlugin","Indigox.Web.JsLib.Controls.Plugins.CalculatePlugin","Indigox.Web.JsLib.Controls.Plugins.PermissionPlugin","Indigox.Web.JsLib.Controls.Plugins.PropertyMappingPlugin","Indigox.Web.JsLib.Controls.Plugins.SummaryFieldPlugin","Indigox.Web.JsLib.Controls.Plugins.TimeSpanPlugin","Indigox.Web.JsLib.Controls.Plugins.VisiblePlugin","Indigox.Web.JsLib.Controls.Plugins.ValueDialogPlugin"],function(g,f,h,e,b,d,a,c){return{BadgePlugin:g,CalculatePlugin:f,PermissionPlugin:h,PropertyMappingPlugin:e,SummaryFieldPlugin:b,TimeSpanPlugin:d,VisiblePlugin:a,ValueDialogPlugin:c}});define("Indigox.Web.JsLib.Controls.Plugins.PermissionManager",["Indigox.Web.JsLib.Controls.Component","Indigox.Web.JsLib.Collection.Hashtable","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.CQRS.Batch","Indigox.Web.JsLib.Core"],function(l,a,m,g,c){var k=null;var d="AuthorizedPermissionsQuery";var j=0,f=1,h=2;var b=l.prototype;var e=Namespace("Indigox.Web.JsLib.Controls.Plugins").Class("PermissionManager").Extend(b).Constructor(function(){b.constructor.apply(this,arguments);this.resourcesPool=new a();this.resultPool=new a();this.async=false}).Static({getInstance:function(){if(k===null){k=new e()}return k}}).Members({getAsync:function(){return this.async},setAsync:function(n){this.async=n},register:function(r,p){if(isNullOrUndefined(r)){throw new Error("The control can not be null or undefined!")}if(isNullOrUndefined(p.allGranted)&&isNullOrUndefined(p.anyGranted)){throw new Error("must configure permission condition!")}p.query=(p.query!==undefined)?p.query:d;p.identity=(!isUndefined(p.identity))?p.identity:null;var o={allGranted:p.allGranted,anyGranted:p.anyGranted};var q=this.findResource(p);if(q!=null){var n=this.resourcesPool.get(q);n.put(r,o);if(q.state==h){this.processResult(q)}}else{q={identity:p.identity,query:p.query,state:j};var n=new a();n.put(r,o);this.resourcesPool.put(q,n);if(this.getAsync()!==true){this.processRecource(q)}}},processRecource:function(o){var n=c.beginBatch();this.addResourceQuery(n,o);n.commit()},addResourceQuery:function(n,q){var p={};if(q.identity!=null){p.Identity=q.identity}var o=this;n.list({name:q.query,properties:p,callback:function(r){q.state=h;o.resultPool.put(q,r);o.processResult(q)}});q.state=f},start:function(){var n=c.beginBatch();var r=this.resourcesPool.keys();for(var o=0,p=r.length;o<p;o++){var q=r[o];if(q.state==j){this.addResourceQuery(n,q)}}n.commit()},findResource:function(n){var r=this.resourcesPool.keys();for(var o=0,p=r.length;o<p;o++){var q=r[o];if(n.query==q.query&&n.identity==q.identity){return q}}return null},processResult:function(p){var t=this.resultPool.get(p);var q=this.resourcesPool.get(p);var u=q.keys();for(var s=0,n=u.length;s<n;s++){var r=u[s];var o=q.get(r);var v=false;if(!isNullOrUndefined(o.allGranted)){v=this.authorizeAllGranted(t,o.allGranted)}else{if(!isNullOrUndefined(o.anyGranted)){v=this.authorizeAnyGranted(t,o.anyGranted)}}this.processControl(r,v);q.remove(r)}},processControl:function(o,n){var p=o.getSetter("Visible");if(o.hasSetter("Visible")){o[p](n)}else{throw new Error("The Contorl ["+o.id+"] can not set Visible!")}},authorizeAllGranted:function(n,q){var o=true;q=isArray(q)?q:[q];for(var p=0,r=q.length;p<r;p++){if(g.indexOf(n,q[p])==-1){o=false;break}}return o},authorizeAnyGranted:function(n,q){var o=false;for(var p=0,r=q.length;p<r;p++){if(g.indexOf(n,q[p])!=-1){o=true;break}}return o}}).$()});define("Indigox.Web.JsLib.Controls.Plugins.PermissionPlugin",["Indigox.Web.JsLib.Controls.Plugins.Plugin","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Core"],function(a,c){var b=a.prototype;var d=Namespace("Indigox.Web.JsLib.Controls.Plugins").Class("PermissionPlugin").Extend(b).Constructor(function(e){b.constructor.apply(this,arguments);e=c.copyExist({permission:0},e);this.configure(e)}).Static({READ:1<<0,WRITE:1<<1,DELETE:1<<2,CREATE:1<<3,LIST:1<<4,ADMINISTRATION:1<<5,WFTerminate:1<<10,WFCancel:1<<11,WFGoto:1<<12,WFReject:1<<13,WFWithdraw:1<<14,WFRedirect:1<<15,WFReply:1<<16}).Members({setPermission:function(e){this.permission=e},getPermission:function(){return this.permission},setControl:function(e){b.setControl.apply(this,arguments);if(e!=null){e.setVisible(false)}},execute:function(f){var h=this.getControl();if(!h){return}var g=f.get("EffectivePermission");var e=false;if((this.permission&g)==this.permission){e=true}var j=h.getSetter("Visible");if(h.hasSetter("Visible")){if(e){h[j](true)}else{h[j](false)}}else{throw new Error("The Contorl ["+h.id+"] can not set Visible!")}}}).$()});define("Indigox.Web.JsLib.Controls.Plugins.Plugin",["Indigox.Web.JsLib.Controls.Component","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Core"],function(a,d){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Plugins").Class("Plugin").Extend(c).Constructor(function(e){c.constructor.apply(this,arguments);e=d.copyExist({control:null,controller:null,loaded:false},e);this.configure(e)}).Members({setController:function(e){if(isNullOrUndefined(e)||this.controller==e){return}if(this.controller!=null){this.controller.removePlugin(this)}this.controller=e;if(this.controller!=null){e.addPlugin(this)}},getController:function(){return this.controller},setControl:function(e){if(this.control==e){return}if(this.control!=null){this.control.removeListener(this)}this.control=e;if(this.control!=null){this.control.addListener(this)}},getControl:function(){return this.control},execute:function(e){}}).$()});define("Indigox.Web.JsLib.Controls.Plugins.PluginFactory",["Indigox.Web.JsLib.Collection.Hashtable","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(c,d){var a=null;var b=Namespace("Indigox.Web.JsLib.Controls.Plugins").Class("PluginFactory").Constructor(function(){this.pluginMappings={}}).Static({getInstance:function(){if(a===null){a=new b()}return a}}).Members({registerPlugin:function(e,f){this.pluginMappings[e]=f},unregisterPlugin:function(e){if(e in this.pluginMappings){delete this.pluginMappings[e]}},createPlugin:function(g,e){var h=this.pluginMappings[g.toLowerCase()];if(isNullOrUndefined(h)){throw new Error('Can not create Plugin for "'+g+'"')}else{var f=Type.forClass(h).createInstance();f.configure(e);return f}}}).$()});define("Indigox.Web.JsLib.Controls.Plugins.PropertyMappingPlugin",["Indigox.Web.JsLib.Controls.Plugins.Plugin","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Core"],function(a,d){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Plugins").Class("PropertyMappingPlugin").Extend(b).Constructor(function(e){b.constructor.apply(this,arguments);e=d.copyExist({columnName:null,propertyName:null,mapping:null},e);this.configure(e)}).Members({setColumnName:function(e){this.columnName=e},getColumnName:function(){return this.columnName},setPropertyName:function(e){this.propertyName=e},getPropertyName:function(){return this.propertyName},setMapping:function(e){this.mapping=e},getMapping:function(){return this.mapping},execute:function(e){var g=this.getControl();if(!g){return}var f=this.getPropertyName();var h=e.get(this.getColumnName());if(this.getMapping()){h=this.getMapping()[h]}var j=g.getSetter(f);if(g.hasSetter(f)){g[j](h)}}}).$()});define("Indigox.Web.JsLib.Controls.Plugins.SummaryFieldPlugin",["Indigox.Web.JsLib.Controls.Plugins.Plugin","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Core"],function(b,d){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Plugins").Class("SummaryFieldPlugin").Extend(c).Constructor(function(e){c.constructor.apply(this,arguments);e=d.copyExist({gridView:"",summaryField:""},e);this.configure(e)}).Members({setSummaryField:function(e){this.summaryField=e},getSummaryField:function(){return this.summaryField},setGridView:function(e){if(isNullOrUndefined(e)){return}this.gridView=e;var f=$.GridView(this.gridView).first();if(f!=null){f.addListener(this)}},getGridView:function(){return this.gridView},onSummaryValueChanged:function(f,g,e){if(this.getSummaryField()==g&&this.control!=null){this.control.setValue(e)}}}).$()});define("Indigox.Web.JsLib.Controls.Plugins.TimeSpanPlugin",["Indigox.Web.JsLib.Controls.Plugins.Plugin","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Utils.DateTimeUtil","Indigox.Web.JsLib.Utils.ControlUtil","Indigox.Web.JsLib.Controls.Grid.GridCell","Indigox.Web.JsLib.Core"],function(j,k,e,a,n){var b=j.prototype;var g=Namespace("Indigox.Web.JsLib.Controls.Plugins").Class("TimeSpanPlugin").Extend(b).Constructor(function(o){b.constructor.apply(this,arguments);this.leftDateTimeControl=null;this.rightDateTimeControl=null;o=k.copyExist({resultType:"day",excludeWeekEnd:false,leftDateTimeControlName:"",rightDateTimeControlName:""},o);this.configure(o)}).Members({getResultType:function(){return this.resultType},setResultType:function(o){this.resultType=o},getExcludeWeekEnd:function(){return this.excludeWeekEnd},setExcludeWeekEnd:function(o){this.excludeWeekEnd=o},getLeftDateTimeControlName:function(){return this.leftDateTimeControlName},setLeftDateTimeControlName:function(o){this.leftDateTimeControlName=o},getRightDateTimeControlName:function(){return this.rightDateTimeControlName},setRightDateTimeControlName:function(o){this.rightDateTimeControlName=o},onLoaded:function(q){var p=a.findControlFromNearestParent(q,this.getLeftDateTimeControlName());if(p!=null){this.leftDateTimeControl=p[0];this.leftDateTimeControl.addListener(this,{onPropertyChanged:this.onRelativeControlPropertyChanged})}else{}var o=a.findControlFromNearestParent(q,this.getRightDateTimeControlName());if(o!=null){this.rightDateTimeControl=o[0];this.rightDateTimeControl.addListener(this,{onPropertyChanged:this.onRelativeControlPropertyChanged})}else{}},onRelativeControlPropertyChanged:function(r,q,p,o){if(q=="value"){var s=this.getControl();if(this.canEvaluateTimeSpan()){s.setValue(this.evaluateTimeSpan())}else{}}},canEvaluateTimeSpan:function(){return !(this.leftDateTimeControl==null||this.leftDateTimeControl.getValue()===""||this.rightDateTimeControl==null||this.rightDateTimeControl.getValue()==="")},evaluateTimeSpan:function(){var r=0;var o=e.parse(this.leftDateTimeControl.getValue());var q=e.parse(this.rightDateTimeControl.getValue());var p=false;if(this.leftDateTimeControl instanceof n){p=this.leftDateTimeControl.editingControl.getEditHMS()}else{p=this.leftDateTimeControl.getEditHMS()}switch(this.getResultType()){case"workday":r=m(q,o,p);break;case"day":r=l(q,o);break;case"hour":r=h(q,o);break;default:throw new Error("Bad resultType, option values: day, hour.")}return r}}).$();var f=86400000;var d=3600000;var c=1440;function m(s,t,y){var r=Math.floor(s.getTime()/f-s.getTimezoneOffset()/c);var q=Math.floor(t.getTime()/f-t.getTimezoneOffset()/c);var p=s.getDay();var o=t.getDay();switch(p){case 6:r+=2;p=1;break;case 0:r+=1;p=1;break}switch(o){case 6:q-=1;break;case 0:q-=2;break}var u=q-r+p;var x=u-Math.floor(u/7)*2-p+1;if(y){var w=(s.getHours()<14)?0:1;var v=(t.getHours()<14)?0:1;x+=(v-w-1)/2}return x}function l(p,o){var r=Math.floor(p.getTime()/f-p.getTimezoneOffset()/c);var q=Math.floor(o.getTime()/f-o.getTimezoneOffset()/c);return q-r+1}function h(p,o){return Math.round((o.getTime()-p.getTime())/d*10)/10}});define("Indigox.Web.JsLib.Controls.Plugins.ValueDialogPlugin",["Indigox.Web.JsLib.Utils.Browser","Indigox.Web.JsLib.Controls.Plugins.Plugin","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Core"],function(e,a,d){var c=a.prototype;var e=e.getInstance();var b=Namespace("Indigox.Web.JsLib.Controls.Plugins").Class("ValueDialogPlugin").Extend(c).Constructor(function(f){this.dialogUrl=null;this.dialogHeight=null;this.dialogWidth=null;this.resultMapping={};c.constructor.apply(this,arguments)}).Members({setDialogUrl:function(f){this.dialogUrl=f},getDialogUrl:function(){return this.dialogUrl},setDialogHeight:function(f){this.dialogHeight=f},getDialogHeight:function(){return this.dialogHeight},setDialogWidth:function(f){this.dialogWidth=f},getDialogWidth:function(){return this.dialogWidth},setResultMapping:function(f){this.resultMapping=f},getResultMapping:function(){return this.resultMapping},setControl:function(f){c.setControl.apply(this,arguments);if(f!=null){f.addListener(this)}},getTargetController:function(g){var f=g.getParent();if(f){if(f.getController&&f.getController()){return f.getController()}else{return this.getTargetController(f)}}else{return null}},onClicked:function(f){var g=this.getResultMapping()||{};var q=this.getDialogHeight();var h=this.getDialogWidth();var j="";if(q){if(e.name!=="IE"){q=q+"px"}j+=("dialogHeight="+q+",")}if(h){if(e.name!=="IE"){h=h+"px"}j+=("dialogWidth="+h+",")}var m=window.showModalDialog(this.getDialogUrl(),"",j);if(m==null){return}var p=JSON.parse(m);var l=this.getTargetController(f);if(l==null){return}l.updateRecord();var k=l.getModel().getRecord(0);for(var n in g){var o=g[n];k.set(n,p[o])}}}).$()});define("Indigox.Web.JsLib.Controls.Plugins.VisiblePlugin",["Indigox.Web.JsLib.Controls.Plugins.Plugin","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Core"],function(b,d){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Plugins").Class("VisiblePlugin").Extend(c).Constructor(function(e){c.constructor.apply(this,arguments);e=d.copyExist({criteria:null},e);this.configure(e)}).Members({setCriteria:function(e){this.criteria=e},getCriteria:function(){return this.criteria},setControl:function(e){c.setControl.apply(this,arguments);if(e!=null){e.setVisible(false)}},execute:function(f){var j=this.getControl();if(!j){return}var e=true;var l=this.getCriteria();var g=l.criteriaList.iterator();while(g.hasNext()){var h=g.next();if(!h.evaluate(f.data)){e=false;break}}var k=j.getSetter("Visible");if(j.hasSetter("Visible")){if(e){j[k](true)}else{j[k](false)}}else{throw new Error("The Contorl ["+j.id+"] can not set Visible!")}}}).$()});define("Indigox.Web.JsLib.Controls.Selection.AllAsSelectedMode",["Indigox.Web.JsLib.Controls.Selection.Mode","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(c,b){var d=c.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Selection").Class("AllAsSelectedMode").Extend(d).Constructor(function(){d.constructor.apply(this,arguments)}).Members({bindControl:function(e){this.control=e},select:function(e,l){var k=this.control;if(!l){k.clearItems()}var j=null;if(e){for(var f=0,h=e.length;f<h;f++){j=e[f];var g=k.newItem({value:j});k.addItem(g)}}},tryCommit:function(e){},onRowRemoved:function(f,e,g){},onRowSelectedChanged:function(f,g,e){},setControlSelected:function(f,g,e){},getSelectionMode:function(){return"ARRAY"},setSelectionMode:function(){}}).$()});define("Indigox.Web.JsLib.Controls.Selection.ItemMode",["Indigox.Web.JsLib.Controls.Selection.Mode","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(c,b){var d=c.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Selection").Class("ItemMode").Extend(d).Constructor(function(){d.constructor.apply(this,arguments)}).Members({bindControl:function(j){this.control=j;var f=0,e=j.getItems(),h=e.length;for(;f<h;f++){var g=e[f];if(g.getSelected()){this.onSelectedChanged(g.getValue(),g)}}j.addListener(this)},onItemAdded:function(g,e,f){if(f.getSelected()){this.onSelectedChanged(f.getValue(),f)}if(this.selected.indexOf(f.getValue())!=-1){this.control.selectItem(f.getValue())}},onItemSelectedChanged:function(h,f,e){var g=f.getValue();if((e&&this.isSelected(g))||(!e&&!this.isSelected(g))){return}this.onSelectedChanged(g,f)},setControlSelected:function(k,j,f){if(isNullOrUndefined(j)){var e=this.control.getItems();var g=0,h=e.length;for(;g<h;g++){if(e[g].getValue()==k){j=e[g];break}}}if(!isNullOrUndefined(j)){j.setSelected(f)}else{}}}).$()});define("Indigox.Web.JsLib.Controls.Selection.Mode",["Indigox.Web.JsLib.Controls.Component","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Core"],function(a,b,d){var e=a.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Selection").Class("Mode").Extend(e).Constructor(function(f){e.constructor.apply(this,arguments);this.selected=new b();this.returnValueType="ARRAY";this.allowDeselect=true;this.working=false;this.modes={SINGLE:true,MULTI:true};this.control=null;this.configure(f);this.setSelectionMode(f.mode||this.mode)}).Members({deselectAll:function(){var h=this.getSelection(),g=0,f=h.length;for(;g<f;g++){this.doDeselect(h[g])}},deselect:function(f){this.doDeselect(f)},select:function(f,h){var j=this.getNeedCommit();if(this.getReturnValueType()=="ARRAY"){f=f||[]}if(this.selectionMode=="SINGLE"&&f){var g=isArray(f)?f[0]:f;this.doSelectSingle(g,null,false)}else{this.doSelectMulti(f,h)}this.tryCommit(j)},onSelectedChanged:function(f,g){var h=this.getNeedCommit();switch(this.selectionMode){case"MULTI":if(this.isSelected(f)){this.doDeselect(f,g)}else{this.doSelectSingle(f,g,true)}break;case"SINGLE":if(this.allowDeselect&&this.isSelected(f)){this.doDeselect(f,g,h)}else{this.doSelectSingle(f,g,false)}break}this.tryCommit(h)},doSelectSingle:function(j,l,k){var g=this.selected.clone();if(!k){var f=null,h=null;for(f=0,h=g.size();f<h;f++){if(g.get(f)!=j){this.doDeselect(g.get(f),null)}}}if(isNullOrUndefined(j)){return}if(this.isSelected(j)){this.setControlSelected(j,l,true);return}this.selected.add(j);this.setControlSelected(j,l,true)},doSelectMulti:function(g,l){var j=this.selected;g=!isArray(g)?[g]:g;if(!l&&j.size()>0){this.doDeselect(this.getSelection())}var h=null,f=null,k=null;for(h=0,f=g.length;h<f;h++){k=g[h];if(l&&this.isSelected(k)){continue}j.add(k);this.setControlSelected(k,null,true)}},doDeselect:function(g,k){g=!isArray(g)?[g]:g;var h=null,f=null,j=null;for(h=0,f=g.length;h<f;h++){j=g[h];this.removeSelected(j);this.setControlSelected(j,k,false)}},getNeedCommit:function(){var f=false;if(this.working===false){f=true;this.working=true}return f},tryCommit:function(f){if(f){this.control.setValue(this.getValue());this.working=false}},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(f){f=f?f.toUpperCase():"SINGLE";this.selectionMode=this.modes[f]?f:"SINGLE"},getSelection:function(){return this.selected.toArray()},getValueItems:function(){return this.selected},isValueChanged:function(f,h){var g=this.getReturnValueType().toUpperCase();switch(g){case"ARRAY":f=f||[];h=h||[];return !d.equal(f,h);case"STRING":return f!=h;case"FLAG":return f!=h;default:return true}},getValue:function(){var h=this.returnValueType.toUpperCase();var g=this.getValueItems();switch(h){case"ARRAY":return g.toArray();case"STRING":var f=null;if(g.size()>0&&!isNullOrUndefined(g.get(0))){f=g.toArray().join(",")}return f;case"FLAG":return null;default:return null}},getAllowDeselect:function(){return this.allowDeselect},setAllowDeselect:function(f){this.allowDeselect=f},getReturnValueType:function(){return this.returnValueType},setReturnValueType:function(f){this.returnValueType=f},isSelected:function(j){var f=false;var g=null,h=this.selected.size();for(g=0;g<h;g++){if(this.selected.get(g)==j){f=true;break}}return f},removeSelected:function(j){var f=-1;var g=null,h=this.selected.size();for(g=0;g<h;g++){if(this.selected.get(g)==j){f=g;break}}this.selected.removeAt(f)},setControlSelected:function(g,h,f){},bindControl:function(f){}}).$()});define("Indigox.Web.JsLib.Controls.Selection.NodeMode",["Indigox.Web.JsLib.Controls.Selection.Mode","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(c,a){var d=c.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Selection").Class("NodeMode").Extend(d).Constructor(function(){d.constructor.apply(this,arguments)}).Members({bindControl:function(j){this.control=j;var f=0,e=j.getNodes(),h=e.length;for(;f<h;f++){var g=e[f];if(g.getSelected()){this.onSelectedChanged(g.getValue())}}j.addListener(this)},onChildNodeAdded:function(f,e){},onNodeSelectedChanged:function(h,f,e){var g=f.getValue();if((e&&this.isSelected(g))||(!e&&!this.isSelected(g))){return}this.onSelectedChanged(g,f)},setControlSelected:function(g,f,e){if(e){this.control.selectNode(g)}else{this.control.deselectNode(g)}}}).$()});define("Indigox.Web.JsLib.Controls.Selection.ParentPriorityTreeMode",["Indigox.Web.JsLib.Controls.Selection.TreeMode","Indigox.Web.JsLib.Controls.Html.TreeNode","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(a,d,b){var c=a.prototype;var e=Namespace("Indigox.Web.JsLib.Controls.Selection").Class("ParentPriorityTreeMode").Extend(c).Constructor(function(){c.constructor.apply(this,arguments);this.selection=new b()}).Members({setControlSelected:function(j,h,f){if(f){this.control.selectNode(j)}else{this.control.deselectNode(j)}var h=this.control.findNodeByValue(j);if(!isNullOrUndefined(h)){var g=h.getParent();if(f){this.removeChildrenSelection(h);if(!(g instanceof d)||!g.getSelected()){this.selection.add(j)}}else{this.selection.remove(j);this.addChildrenSelection(h)}this.trySelectChildNode(h,f);this.trySelectParentNode(h,f)}},removeChildrenSelection:function(g){var f=null;var h=null;var j=g.getChildNodes();for(f=0,h=j.length;f<h;f++){this.selection.remove(j[f].getValue())}},addChildrenSelection:function(h){var g=null;var j=null;var k=h.getChildNodes();for(g=0,j=k.length;g<j;g++){var f=k[g].getValue();if(this.isSelected(f)&&!this.selection.contains(f)){this.selection.add(f)}}},getValueItems:function(){return this.selection}}).$()});define("Indigox.Web.JsLib.Controls.Selection.RowMode",["Indigox.Web.JsLib.Controls.Selection.Mode","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(b,a){var d=b.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Selection").Class("RowMode").Extend(d).Constructor(function(){d.constructor.apply(this,arguments)}).Members({bindControl:function(h){this.control=h;var e=0,g=h.getRows(),f=g.length;for(;e<f;e++){var j=g[e];if(j.getSelected()){this.onSelectedChanged(j.getRecord())}}h.addListener(this)},tryCommit:function(e){},onRowRemoved:function(f,e,g){this.selected.remove(g.getRecord())},onRowSelectedChanged:function(g,h,e){var f=h.getRecord();if((e&&this.isSelected(f))||(!e&&!this.isSelected(f))){return}this.onSelectedChanged(f,h)},setControlSelected:function(j,k,e){if(isNullOrUndefined(k)){var h=this.control.getRows();var f=0,g=h.length;for(;f<g;f++){if(h[f].getRecord()==j){k=h[f];break}}}if(!isNullOrUndefined(k)){k.setSelected(e)}}}).$()});define("Indigox.Web.JsLib.Controls.Selection.TreeMode",["Indigox.Web.JsLib.Controls.Selection.NodeMode","Indigox.Web.JsLib.Controls.Html.TreeNode","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(c,e,b){var d=c.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Selection").Class("TreeMode").Extend(d).Constructor(function(){d.constructor.apply(this,arguments)}).Members({onChildNodeAdded:function(g,f){if(this.isSelected(f.getParent().getValue())||f.getSelected()){this.setControlSelected(f.getValue())}if(this.selected.indexOf(f.getValue())!=-1){this.control.selectNode(f.getValue())}},setControlSelected:function(h,g,f){if(f){this.control.selectNode(h)}else{this.control.deselectNode(h)}var g=this.control.findNodeByValue(h);if(!isNullOrUndefined(g)){this.trySelectChildNode(g,f);this.trySelectParentNode(g,f)}},trySelectParentNode:function(h,f){var g=h.getParent();if(!(g instanceof e)){return}var j=g.getValue();if(f){if(!this.isSelected(j)&&this.isAllChildrenSelected(g)){this.control.selectNode(j)}}else{if(this.isSelected(j)){this.control.deselectNode(j)}}},trySelectChildNode:function(g,f){if(g.getChildNodes()===0){return}if(this.isAllChildrenSelected(g)){if(!f){this.selectChildNode(g,false)}}else{if(f){this.selectChildNode(g,true)}}},selectChildNode:function(k,h){var g=null,j=null,l=k.getChildNodes();for(g=0,j=l.length;g<j;g++){var m=l[g];var f=m.getValue();if(h===true&&!this.isSelected(f)){m.setSelected(h)}else{if(h===false&&this.isSelected(f)){m.setSelected(h)}}}},isAllChildrenSelected:function(h){var f=true;var g=null,j=null,k=h.getChildNodes();for(g=0,j=k.length;g<j;g++){if(!this.isSelected(k[g].getValue())){f=false;break}}return f}}).$()});define("Indigox.Web.JsLib.Controls.Tip.RowTip",["Indigox.Web.JsLib.Controls.Html.Tooltip","Indigox.Web.JsLib.Controls.Html.Content","Indigox.Web.JsLib.Controls.Component","Indigox.Web.JsLib.Core"],function(b,d,c){var e=c.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Tip").Class("RowTip").Extend(e).Constructor(function(){e.constructor.apply(this,arguments);this.tipControl=null;this.control=null;this.isDynamic=true}).Members({setTipControl:function(f){if(isNullOrUndefined(f)){return}if(typeof f==="string"){}else{this.tipControl=f}},getTipControl:function(){return this.tipControl},setControl:function(f){this.control=f;if(this.tipControl){this.tipControl.addControl(this.control)}},getControl:function(){return this.control},getIsDynamic:function(){return this.isDynamic},setIsDynamic:function(f){this.isDynamic=f},getIdentity:function(){var f=this.getControl();if(isNullOrUndefined(f)){throw new Error("Cannot find control of this tip")}return this.getControl().getRecord().getIdentity()},fillTipControl:function(){var h=this.getTipControl();if(h.children.length===0){throw new Error("the tipcontrol has no place to show tip")}var g=h.children[0];if(g instanceof d){if(this.getIsDynamic()==true){var f=g.getController();f.setParam("Identity",this.getIdentity());f.getModel().clearRecord();f.load()}else{var f=g.getController();f.setParam("Identity",this.getIdentity());f.getModel().clearRecord();f.bindRecord(this.getControl().getRecord())}}else{throw new Error("the tipcontrol's first child control should be a Content")}},show:function(f,h){var g=this.getTipControl();g.show(f,h);this.fillTipControl()},hide:function(){this.getTipControl().hide()}}).$()});define("Indigox.Web.JsLib.Controls.Tip.Tip",["Indigox.Web.JsLib.Controls.Html.Label","Indigox.Web.JsLib.Controls.Component","Indigox.Web.JsLib.Core"],function(d,b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Tip").Class("Tip").Extend(c).Constructor(function(){c.constructor.apply(this,arguments);this.tiptext="";this.tipControl=null;this.control=null}).Members({setTipText:function(e){if(this.tiptext===e){return}this.tiptext=e},getTipText:function(){return this.tiptext},setControl:function(e){this.control=e},getControl:function(){return this.control},setTipControl:function(e){if(isNullOrUndefined(e)){return}if(typeof e==="string"){}else{this.tipControl=e}},getTipControl:function(){return this.tipControl},fillTipControl:function(){var f=this.getTipControl();if(f.children.length===0){throw new Error("the tipcontrol has no place to show tip")}var e=f.children[0];if(e instanceof d){e.setValue(this.getTipText())}else{throw new Error("the tipcontrol's first child control should be a Label")}},show:function(e,g){var f=this.getTipControl();this.fillTipControl();f.show(e,g)},hide:function(){this.getTipControl().hide()}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.CompareToControlRule",["Indigox.Web.JsLib.Controls.UIEngine","Indigox.Web.JsLib.Controls.Validation.Rules.Rule","Indigox.Web.JsLib.Core"],function(b,c){var d=c.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("CompareToControlRule").Extend(d).Constructor(function(){d.constructor.apply(this,arguments)}).Members({getControlName:function(){return this.getCondition()},setControlName:function(e){return this.setCondition(e)},getCompareToControlValue:function(){var e=this.getControlName();var f=b.find(e).get(0);if(!f){throw"找不到控件："+e}return f.getValue()}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.EqualControlRule",["Indigox.Web.JsLib.Controls.Validation.Rules.CompareToControlRule","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("EqualControlRule").Extend(c).Constructor(function(){c.constructor.apply(this,arguments);this.defaultMessageExpression="输入值须等于控件${controlName}的值"}).Members({isMatch:function(d){return(d==this.getCompareToControlValue())}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.EqualRule",["Indigox.Web.JsLib.Controls.Validation.Rules.Rule","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("EqualRule").Extend(c).Constructor(function(){c.constructor.apply(this,arguments);this.defaultMessageExpression="输入值须等于${condition}"}).Members({isMatch:function(d){return(d==this.getCondition())}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.GreaterOrEqualControlRule",["Indigox.Web.JsLib.Controls.Validation.Rules.CompareToControlRule","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("GreaterOrEqualControlRule").Extend(b).Constructor(function(){b.constructor.apply(this,arguments);this.defaultMessageExpression="输入值须大于或等于控件${controlName}的值"}).Members({isMatch:function(d){return(d>=this.getCompareToControlValue())}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.GreaterOrEqualRule",["Indigox.Web.JsLib.Controls.Validation.Rules.Rule","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("GreaterOrEqualRule").Extend(c).Constructor(function(){c.constructor.apply(this,arguments);this.defaultMessageExpression="输入值须大于或等于${condition}"}).Members({isMatch:function(d){return(d>=this.getCondition())}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.GreaterThanControlRule",["Indigox.Web.JsLib.Controls.Validation.Rules.CompareToControlRule","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("GreaterThanControlRule").Extend(c).Constructor(function(){c.constructor.apply(this,arguments);this.defaultMessageExpression="输入值须大于控件${controlName}的值"}).Members({isMatch:function(d){return(d>this.getCompareToControlValue())}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.GreaterThanRule",["Indigox.Web.JsLib.Controls.Validation.Rules.Rule","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("GreaterThanRule").Extend(c).Constructor(function(){c.constructor.apply(this,arguments);this.defaultMessageExpression="输入值须大于${condition}"}).Members({isMatch:function(d){return(d>this.getCondition())}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.IPAddressRule",["Indigox.Web.JsLib.Controls.Validation.Rules.Rule","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("IPAddressRule").Extend(c).Constructor(function(){c.constructor.apply(this,arguments)}).Members({isMatch:function(e){var d=/^(?:[0-9]|[1-9][0-9]|1[0-9]{2}|2(?:[0-4][0-9]|5[0-5]))(?:\.(?:[0-9]|[1-9][0-9]|1[0-9]{2}|2(?:[0-4][0-9]|5[0-5]))){3}$/g;return d.test(e)}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.LessOrEqualControlRule",["Indigox.Web.JsLib.Controls.Validation.Rules.CompareToControlRule","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("LessOrEqualControlRule").Extend(c).Constructor(function(){c.constructor.apply(this,arguments);this.defaultMessageExpression="输入值须小于或等于控件${controlName}的值"}).Members({isMatch:function(d){return(d<=this.getCompareToControlValue())}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.LessOrEqualRule",["Indigox.Web.JsLib.Controls.Validation.Rules.Rule","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("LessOrEqualRule").Extend(c).Constructor(function(){c.constructor.apply(this,arguments);this.defaultMessageExpression="输入值须小于或等于${condition}"}).Members({isMatch:function(d){return(d<=this.getCondition())}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.LessThanControlRule",["Indigox.Web.JsLib.Controls.Validation.Rules.CompareToControlRule","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("LessThanControlRule").Extend(b).Constructor(function(){b.constructor.apply(this,arguments);this.defaultMessageExpression="输入值须小于控件${controlName}的值"}).Members({isMatch:function(d){return(d<this.getCompareToControlValue())}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.LessThanRule",["Indigox.Web.JsLib.Controls.Validation.Rules.Rule","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("LessThanRule").Extend(c).Constructor(function(){c.constructor.apply(this,arguments);this.defaultMessageExpression="输入值须小于${condition}"}).Members({isMatch:function(d){return(d<this.getCondition())}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.MailAddressRule",["Indigox.Web.JsLib.Controls.Validation.Rules.Rule","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("MailAddressRule").Extend(c).Constructor(function(){c.constructor.apply(this,arguments)}).Members({isMatch:function(e){var d=/^[\w-\.]+@[\w-\.]+(\.\w{2,3})$/g;return d.test(e)}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.MaxLengthRule",["Indigox.Web.JsLib.Controls.Validation.Rules.Rule","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Core"],function(b,a){var d=b.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("MaxLengthRule").Extend(d).Constructor(function(){d.constructor.apply(this,arguments)}).Members({isMatch:function(f){if(a.isNullOrEmpty(f)){return true}var e=this.getCondition();if(f.length>e){return false}else{return true}}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.MinLengthRule",["Indigox.Web.JsLib.Controls.Validation.Rules.Rule","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Core"],function(b,a){var d=b.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("MinLengthRule").Extend(d).Constructor(function(){d.constructor.apply(this,arguments)}).Members({isMatch:function(f){var e=this.getCondition();if(e===0){return true}if(a.isNullOrEmpty(f)){return false}if(f.length<e){return false}else{return true}}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.NotBlankRule",["Indigox.Web.JsLib.Controls.Validation.Rules.Rule","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Core"],function(c,a){var d=c.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("NotBlankRule").Extend(d).Constructor(function(){d.constructor.apply(this,arguments)}).Members({isMatch:function(e){if(a.isNullOrEmpty(e)){return false}else{return true}}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.NumberRule",["Indigox.Web.JsLib.Controls.Validation.Rules.Rule","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Core"],function(b,a){var d=b.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("NumberRule").Extend(d).Constructor(function(){d.constructor.apply(this,arguments)}).Members({isMatch:function(e){if(a.isNullOrEmpty(e)){return true}return !isNaN(e)}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules",["Indigox.Web.JsLib.Controls.Validation.Rules.CompareToControlRule","Indigox.Web.JsLib.Controls.Validation.Rules.EqualControlRule","Indigox.Web.JsLib.Controls.Validation.Rules.EqualRule","Indigox.Web.JsLib.Controls.Validation.Rules.GreaterOrEqualControlRule","Indigox.Web.JsLib.Controls.Validation.Rules.GreaterOrEqualRule","Indigox.Web.JsLib.Controls.Validation.Rules.GreaterThanControlRule","Indigox.Web.JsLib.Controls.Validation.Rules.GreaterThanRule","Indigox.Web.JsLib.Controls.Validation.Rules.IPAddressRule","Indigox.Web.JsLib.Controls.Validation.Rules.LessOrEqualControlRule","Indigox.Web.JsLib.Controls.Validation.Rules.LessOrEqualRule","Indigox.Web.JsLib.Controls.Validation.Rules.LessThanControlRule","Indigox.Web.JsLib.Controls.Validation.Rules.LessThanRule","Indigox.Web.JsLib.Controls.Validation.Rules.MailAddressRule","Indigox.Web.JsLib.Controls.Validation.Rules.MaxLengthRule","Indigox.Web.JsLib.Controls.Validation.Rules.MinLengthRule","Indigox.Web.JsLib.Controls.Validation.Rules.NotBlankRule","Indigox.Web.JsLib.Controls.Validation.Rules.NumberRule","Indigox.Web.JsLib.Controls.Validation.Rules.PhoneNumberRule","Indigox.Web.JsLib.Controls.Validation.Rules.RegxRule","Indigox.Web.JsLib.Controls.Validation.Rules.Rule","Indigox.Web.JsLib.Controls.Validation.Rules.StringRule"],function(p,g,b,s,m,h,r,d,k,f,u,v,q,o,n,c,a,e,l,j,t){return{CompareToControlRule:p,EqualControlRule:g,EqualRule:b,GreaterOrEqualControlRule:s,GreaterOrEqualRule:m,GreaterThanControlRule:h,GreaterThanRule:r,IPAddressRule:d,LessOrEqualControlRule:k,LessOrEqualRule:f,LessThanControlRule:u,LessThanRule:v,MailAddressRule:q,MaxLengthRule:o,MinLengthRule:n,NotBlankRule:c,NumberRule:a,PhoneNumberRule:e,RegxRule:l,Rule:j,StringRule:t}});define("Indigox.Web.JsLib.Controls.Validation.Rules.PhoneNumberRule",["Indigox.Web.JsLib.Controls.Validation.Rules.Rule","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("PhoneNumberRule").Extend(c).Constructor(function(){c.constructor.apply(this,arguments)}).Members({isMatch:function(e){var d=/^\d[\d\-]+\d$/g;return d.test(e)}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.RegxRule",["Indigox.Web.JsLib.Controls.Validation.Rules.Rule","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("RegxRule").Extend(b).Constructor(function(){b.constructor.apply(this,arguments)}).Members({isMatch:function(e){var d=this.getCondition();if(typeof d=="string"){d=new RegExp(d)}return d.test(e)}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.Rule",["Indigox.Web.JsLib.Controls.Component","Indigox.Web.JsLib.Expression.ExpressionEvaluator","Indigox.Web.JsLib.Expression.MixinExpressionEvaluator","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Core"],function(b,c,e,a){var f=b.prototype;var d=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("Rule").Extend(f).Constructor(function(){f.constructor.apply(this,arguments);this.control=null;this.condition=null;this.message=null;this.defaultMessageExpression="不符合校验规则"}).Members({check:function(j){var g=this.isMatch(j);var h="";if(!g){h=this.getMessage()}return{matched:g,message:h}},isMatch:function(g){},setCondition:function(g){this.condition=g},getCondition:function(){return this.condition},setMessage:function(g){this.message=g},getMessage:function(){if(a.isNullOrEmpty(this.message)){return this.getDefaultMessage()}return this.message},getDefaultMessage:function(){var g=new e(this.getDefaultMessageExpression());return g.evaluate(this)},getDefaultMessageExpression:function(){return this.defaultMessageExpression},setDefaultMessageExpression:function(g){this.defaultMessageExpression=g}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Rules.StringRule",["Indigox.Web.JsLib.Controls.Validation.Rules.Rule","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Validation.Rules").Class("StringRule").Extend(b).Constructor(function(){b.constructor.apply(this,arguments)}).Members({isMatch:function(d){if(StringUtil.isNullOrEmpty(d)){return true}if(!isNaN(d)){return false}return isString(d)}}).$()});define("Indigox.Web.JsLib.Controls.Validation.ValidateRuleFactory",["Indigox.Web.JsLib.Collection.Hashtable","Indigox.Web.JsLib.Collection.List"],function(c,d){var a=null;var b=Namespace("Indigox.Web.JsLib.Controls.Validation").Class("ValidateRuleFactory").Constructor(function(){this.ruleMappings={}}).Static({getInstance:function(){if(a===null){a=new b()}return a}}).Members({registerRule:function(e,f){this.ruleMappings[e]=f},unregisterRule:function(e){if(e in this.ruleMappings){delete this.ruleMappings[e]}},createValidateRule:function(f,j,e){var h=this.ruleMappings[f.toLowerCase()];if(isNullOrUndefined(h)){throw new Error('Can not create ValidateRule for "'+f+'"')}else{var g=Type.forClass(h).createInstance();g.setCondition(j);g.setMessage(e);return g}}}).$()});define("Indigox.Web.JsLib.Controls.Validation.Validator",["Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Controls.Validation.ValidateRuleFactory","Indigox.Web.JsLib.Controls.Control","Indigox.Web.JsLib.Controls.Grid.GridView","Indigox.Web.JsLib.Controls.Container"],function(e,j,b,g,d){var h="PropertyChanging",f="PropertyChanged";var a=b.prototype;var c=Namespace("Indigox.Web.JsLib.Controls.Validation").Class("Validator").Extend(a).Constructor(function(){a.constructor.apply(this,arguments);this.errorMessage=""}).Members({getErrorMessage:function(){return this.errorMessage},setErrorMessage:function(k){if(isNullOrUndefined(k)){return}this.errorMessage=k;this.fireListener(f,["errorMessage",this.errorMessage])},validate:function(l){var k=this.validateControl(l);if(true!==k.matched){return k}if(l instanceof g){return this.validateGridView(l)}else{if(l instanceof d){return this.validateChildren(l.getChildren())}}return{matched:true}},validateChildren:function(m){for(var l=0,n=m.length;l<n;l++){var o=m[l];var k=this.validate(o);if(true!==k.matched){return k}}return{matched:true}},validateControl:function(q){var o=q.getValidateRules();var r=q.getValue();for(var m=0,n=o.length;m<n;m++){var l=o[m];var p=j.getInstance().createValidateRule(l.type,l.condition,l.errorMessage);var k=p.check(r);if(true!==k.matched){this.setErrorMessage(k.message);this.show();return k}}return{matched:true}},validateGridView:function(r){var q=r.getRows();for(var n=0,o=q.length;n<o;n++){var m=q[n].getCells();for(var l=0,p=m.length;l<p;l++){var k=this.validateControl(m[l]);if(true!==k.matched){return k}}}return{matched:true}},show:function(){this.setVisible(true)},hide:function(){if(this.getVisible()===false){return}this.setVisible(false)}}).$()});define("Indigox.Web.JsLib.Controls.Widgets.Widget",["Indigox.Web.JsLib.Collection.Hashtable","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Controls.Control","Indigox.Web.JsLib.Controls.Container","Indigox.Web.JsLib.Core"],function(a,g,c,d){var h="paramChanged";var f="LoadResources",e="ParamChanged";var b=d.prototype;var j=Namespace("Indigox.Web.JsLib.Controls.Widgets").Class("Widget").Extend(b).Constructor(function(){b.constructor.apply(this,arguments);this.title="";this.layout=null;this.presentation=null;this.resources=[];this.params=new a();this.pending=null}).Members({registerEvents:function(){b.registerEvents.call(this);this.events.registerEvents(h)},registerListeners:function(){b.registerListeners.apply(this,arguments);this.listeners.registerListeners(e)},doLoad:function(){if(this.getPending()){return this.getPending().then({handler:this.doLoad,scope:this})}else{return b.doLoad.apply(this,arguments)}},setPending:function(k){this.pending=k},getPending:function(){return this.pending},setLayout:function(k){this.layout=k},getLayout:function(){return this.layout},setTitle:function(k){this.title=k},getTitle:function(){return this.title},setParam:function(l,m){var k=null;if(this.params.containsKey(l)){k=this.params.get(l)}this.params.put(l,m);this.fireListener(e,[l,m,k]);this.fireEvent(h,[l,m,k])},getParam:function(k){return this.params.get(k)},removeParam:function(l){var k=null;if(this.params.containsKey(l)){k=this.params.get(l)}this.params.remove(l);this.fireListener(e,[l,null,k]);this.fireEvent(h,[l,null,k])},setParams:function(l){for(var k in l){this.setParam(k,l[k])}},getParams:function(){var n={};var m=this.params.keys();var k,l;for(k=0,l=m.length;k<l;k++){n[m[k]]=this.getParam(m[k])}return n},hasParam:function(k){return this.params.containsKey(k)},setResources:function(k){this.resources=k},getResources:function(){return this.resources},setPresentation:function(k){this.presentation=k},getPresentation:function(){return this.presentation}}).$()});define("Indigox.Web.JsLib.Controls.Widgets.WidgetZone",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Controls.Widgets.Widget","Indigox.Web.JsLib.Controls.Html.Panel","Indigox.Web.JsLib.Core"],function(o,h,j,k){var a="widgetAdding",f="widgetRemoving",e="widgetAdded",d="widgetRemoved";var n="WidgetAdding",g="WidgetRemoving",c="WidgetAdded",l="WidgetRemoved";var b=k.prototype;var m=Namespace("Indigox.Web.JsLib.Controls.Widgets").Class("WidgetZone").Extend(b).Constructor(function(){b.constructor.apply(this,arguments);this.widgets=new o()}).Members({registerEvents:function(){b.registerEvents.call(this);this.events.registerEvents(a,e,f,d)},registerListeners:function(){b.registerListeners.call(this);this.listeners.registerListeners(n,c,g,l)},preLoadChildren:function(){var q=this.getChildren();for(var p=0,r=q.length;p<r;p++){q[p].preLoad()}},doLoad:function(){var p=Application.getWidgetZoneInfo(this);this.configure({widgets:p});return p},loadChildren:function(){var q=this.getChildren();var s=[];for(var p=0,r=q.length;p<r;p++){s.push(q[p].load())}return h.when(s)},insertChild:function(p,q){this.insertWidget(p,q)},removeChild:function(p){this.removeWidget(p)},addWidget:function(p){this.insertWidget(this.widgets.size(),p)},insertWidget:function(p,q){if(this.widgets.contains(q)){return}this.fireListener(n,[p,q]);this.fireEvent(a,[p,q]);this.widgets.insert(p,q);q.setParent(this);this.updateChildrenID(this.getWidgets(),p);if(this.isInited()){q.init()}if(this.isLoaded()){h.when(q.load()).done({handler:function(){this.fireListener(c,[p,q]);this.fireEvent(e,[p,q])},scope:this}).fail({handler:function(){debug.error([this.id," insertWidget ",q.id," failed."].join(""))},scope:this})}else{this.fireListener(c,[p,q]);this.fireEvent(e,[p,q])}},removeWidget:function(q){if(!this.widgets.contains(q)){return}var p=this.widgets.indexOf(q);this.fireEvent(f,[p,q]);this.fireListener(g,[p,q]);q.unload();q.setParent(null);this.widgets.remove(q);this.updateChildrenID(this.getWidgets(),p);this.fireEvent(d,[p,q]);this.fireListener(l,[p,q])},clearWidgets:function(){var r=this.getWidgets();var p=null,q=null;for(p=0,q=r.length;p<q;p++){this.removeWidget(r[p])}},setWidgets:function(t){var r=this.getWidgets();if(t.length>0){for(var q=0,s=t.length;q<s;q++){if(isNullOrUndefined(r[q])||(r[q].name!=t[q].Name)){var u=this.insertNewWidget(this,r,t[q],q)}}for(var p=t.length,v=r.length;p<v;p++){this.removeWidget(r[p])}}else{this.clearWidgets()}},getWidgets:function(){return this.widgets.toArray()},getChildren:function(){return this.widgets.toArray()},insertNewWidget:function(s,r,w,p){var t=r.slice(0,r.length);for(var q=p,u=t.length;q<u;q++){if(t[q].name==w.Name){return}else{r.splice(p,1);s.removeWidget(t[q])}}var v=new j();v.configure(w);s.insertWidget(p,v);r.splice(p,0,w);return v}}).$()});define("Indigox.Web.JsLib.Controls.Component",["Indigox.Web.JsLib.Utils.Configurable","Indigox.Web.JsLib.Core"],function(b,c){base=b.prototype;var a=Namespace("Indigox.Web.JsLib.Controls").Class("Component").Extend(base).Members({isConfigurableValue:function(d){return(d instanceof a)},configureFieldOrProperty:function(e,f){if(!(this.hasField(e)||this.hasGetter(e))){return}if(e=="events"){this.attach(this,f);return}var d=this.getFieldOrProperty(e);if(!this.isConfigurableValue(f)&&this.isConfigurableValue(d)){d.configure(f)}else{this.setFieldOrProperty(e,f)}}}).$()});define("Indigox.Web.JsLib.Controls.Container",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Controls.Control","Indigox.Web.JsLib.Core"],function(p,k,l,c){var b=c.prototype;var o="childAdding",n="childAdded",f="childRemoving",h="childRemoved";var r="Init",e="ChildAdding",g="ChildAdded",a="ChildRemoving",q="ChildRemoved",m="PropertyChanging",j="PropertyChanged";var d=Namespace("Indigox.Web.JsLib.Controls").Class("Container").Extend(b).Constructor(function(){b.constructor.apply(this,arguments);this.children=[]}).Members({registerEvents:function(){b.registerEvents.call(this);this.events.registerEvents(o,n,f,h)},registerListeners:function(){b.registerListeners.call(this);this.listeners.registerListeners(e,g,a,q)},setID:function(s){b.setID.call(this,s);this.updateAllChildrenID(this.getChildren())},addChild:function(s){this.insertChild(this.children.length,s)},insertChild:function(s,t){this.fireListener(e,[s,t]);this.fireEvent(o,[s,t]);this.children.splice(s,0,t);t.setParent(this);this.updateChildrenID(this.children,s);l.when(this.catchUpLoadChild(t)).done({handler:function(){this.fireListener(g,[s,t]);this.fireEvent(n,[s,t])},scope:this}).fail({handler:function(){debug.error([this.id," insertChild ",t.id," failed."].join(""))},scope:this})},catchUpLoadChild:function(s){if(this.isInited()){s.init()}if(this.isLoaded()){return s.load()}},replaceChild:function(s,u){var t=this.children[s];if(t){this.removeChild(t)}if(u){this.insertChild(s,u)}},clearChildren:function(){var t=this.getChildren();for(var s=0,u=t.length;s<u;s++){this.removeChild(t[s])}},removeChild:function(t){var s=k.indexOf(this.getChildren(),t);this.fireEvent(f,[s,t]);this.fireListener(a,[s,t]);t.unload();t.setParent(null);this.children.splice(s,1);this.updateChildrenID(this.getChildren(),s);this.fireEvent(h,[s,t]);this.fireListener(q,[s,t])},updateAllChildrenID:function(v){if(!v){return}var x=this.id,s=null,u={};for(var t=0,w=v.length;t<w;t++){s=v[t].getName();if(!(s in u)){u[s]=0}v[t].setID(x+"."+s+":"+u[s]++)}},updateChildrenID:function(v,t){var u=null,x=null;if(t>=v.length){return}var y=v[t],z=this.id,s=y.getName(),w=0;for(u=0,x=t;u<x;u++){if(v[u].getName()===s){w++}}for(u=t,x=v.length;u<x;u++){if(v[u].getName()===s){v[u].setID(z+"."+s+":"+w++)}}},getFirstChild:function(){return this.children[0]},getLastChild:function(){return this.children[this.children.length-1]},getChildren:function(){return this.children.slice(0)},setChildren:function(u){if(u.length<=0){return}this.clearChildren();for(var s=0,t=u.length;s<t;s++){this.addChild(u[s])}},getChild:function(s){if(isInt(s)){return this.children[s]}else{var u=this.children,t=null,v=null;for(t=0,v=u.length;t<v;t++){if(u[t].id===s){return u[t]}else{if(u[t].name===s){return u[t]}}}return null}},find:function(s){var w=new p();var y=this.getChild(s);if(y){w.add(y)}var v=this.getChildren();for(var u=0,x=v.length;u<x;u++){if(v[u].find){var t=v[u].find(s);if(t){w.addRange(t)}}}if(w.size()){return w.toArray()}return null},contains:function(v){var t=this.children,s=null,u=null;for(s=0,u=t.length;s<u;s++){if(t[s].id===v){return true}}return false},setValue:function(x){var s=this.getValue();this.fireListener(m,["value",x,s]);var v=this.children;for(var u=0,w=v.length;u<w;u++){var t=v[u].getName();if((x!=null)&&(t in x)){v[u].setValue(x[t])}}x=this.getValue();this.fireListener(j,["value",x,s])},getValue:function(){var w={};var u=this.children;for(var t=0,v=u.length;t<v;t++){var s=u[t].getName();w[s]=u[t].getValue()}return w},setRecord:function(s){this.record=s},getRecord:function(){return this.record},init:function(){if(this.isInited()){debug.warn(this.id+"("+this.defaultName+") init more than twice. current state is "+this.stateText)}this.initChildren();this.setInited();this.fireListener(r)},initChildren:function(){var t=this.getChildren();for(var s=0,u=t.length;s<u;s++){t[s].init()}},load:function(){this.preLoad();this.setLoading();this._checkLoadTimeout();return l.when(this.doLoad()).then({handler:this.loadChildren,scope:this}).done({handler:this.setLoaded,scope:this})},preLoad:function(){b.preLoad.apply(this,arguments);this.preLoadChildren()},preLoadChildren:function(){var t=this.getChildren();for(var s=0,u=t.length;s<u;s++){t[s].preLoad()}},loadChildren:function(){var t=this.getChildren();var v=[];for(var s=0,u=t.length;s<u;s++){v.push(t[s].load())}return l.when(v)},unload:function(){this.unloadChildren();b.unload.apply(this,arguments)},unloadChildren:function(){var t=this.getChildren();for(var s=0,u=t.length;s<u;s++){t[s].unload()}}}).$()});define("Indigox.Web.JsLib.Controls.Control",["Indigox.Web.JsLib.Controls.Component","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Utils.DelayedTask","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Utils.EventsSupport","Indigox.Web.JsLib.Utils.ListenersSupport","Indigox.Web.JsLib.Controls.ListenersFactory","Indigox.Web.JsLib.Controls.UIEngine","Indigox.Web.JsLib.Controls.Binding.Binding","Indigox.Web.JsLib.Controls.Binding.ValueBinding","Indigox.Web.JsLib.Controls.Binding.PropertyBinding","Indigox.Web.JsLib.Controls.Plugins.Plugin","Indigox.Web.JsLib.Controls.Plugins.PluginFactory","Indigox.Web.JsLib.Core"],function(u,b,I,a,D,C,z,H,w,e,A,h,c,q){var s="load",g="loading",v="loaded",n="unload",k="valueChanged";var t="Init",d="Load",x="Loading",y="Loaded",r="Unload",o="PropertyChanging",j="PropertyChanged";var p=0,F=1,B=2,l=3,E=4,G=5;var m="                                                                                   ";var f=u.prototype;var J=Namespace("Indigox.Web.JsLib.Controls").Class("Control").Extend(f).Constructor(function(K){if(arguments.length>1||isObject(arguments[0])){throw new Error("Constructor can not accept Object as argument! if you want to configure the control, please use the configur method.")}f.constructor.call(this);this.initListeners();this.initEvents();this.state=p;this.stateText="created";this.parent=null;this.defaultName=Type.forInstance(this).getAlias();this.id=K||this.defaultName;this.name=K||this.defaultName;this.visible=true;this.enable=true;this.height=null;this.width=null;this.readonly=false;this.value=null;this.tip=null;this.plugins=new b();this.validateRules=new b();this.binding=null}).Members({registerEvents:function(){this.events.registerEvents(s,g,v,n,k)},registerListeners:function(){this.listeners.registerListeners(t,d,x,y,r,o,j)},attach:function(L,K){if(this.events){this.events.attachEvent.apply(this.events,arguments)}},detach:function(K){if(this.events){this.events.detachEvent.apply(this.events,arguments)}},on:function(L,K){Array.prototype.unshift.call(arguments,this);this.attach.apply(this,arguments);return this},un:function(L,K){this.detach.apply(this,arguments);return this},fireEvent:function(L,K){if(this.events){this.events.fire(L,K)}},addListener:function(L,K){if(this.listeners&&L!=null){this.listeners.addListener(L,K)}},removeListener:function(K){if(this.listeners&&K!=null){this.listeners.removeListener(K)}},fireListener:function(L,K){if(this.listeners){this.listeners.fire(L,K)}},setParent:function(K){this.parent=K},getParent:function(){return this.parent},getID:function(){return this.id},setID:function(L){if(!L){return}if(L==this.id){return}var K=this.id;this.fireListener(o,["id",L,K]);this.id=L;this.fireListener(j,["id",L,K])},setName:function(M){if(isNullOrUndefined(M)){return}if(D.isNullOrEmpty(M)){return}if(this.name!==this.defaultName){return}var L=this.name;this.fireListener(o,["name",M,L]);var K=this.id.replace(new RegExp("(\\.|^)(("+L+")($|\\:\\d+$))"),"$1"+M+"$4");this.setID(K);this.name=M;this.fireListener(j,["name",M,L])},getName:function(){return this.name},setState:function(K){this.state=K;switch(K){case p:this.stateText="created";break;case F:this.stateText="inited";break;case B:this.stateText="preload";break;case l:this.stateText="loading";break;case E:this.stateText="loaded";break;case G:this.stateText="unloaded";break;default:this.stateText="unkown";break}},getState:function(){return this.state},setVisible:function(L){if(isNullOrUndefined(L)){return}if(this.visible===L){return}var K=this.visible;this.fireListener(o,["visible",L,K]);this.visible=L;this.fireListener(j,["visible",L,K])},getVisible:function(){return this.visible},setEnable:function(L){if(isNullOrUndefined(L)){return}if(this.enable===L){return}var K=this.enable;this.fireListener(o,["enable",L,K]);this.enable=L;this.fireListener(j,["enable",L,K])},getEnable:function(){return this.enable},setReadonly:function(L){if(isNullOrUndefined(L)){return}if(this.readonly===L){return}var K=this.readonly;this.fireListener(o,["readonly",L,K]);this.readonly=L;this.fireListener(j,["readonly",L,K])},getReadonly:function(){return this.readonly},setHeight:function(L){if(isNullOrUndefined(L)){return}if(this.height===L){return}var K=this.height;this.fireListener(o,["height",L,K]);this.height=L;this.fireListener(j,["height",L,K])},getHeight:function(){return this.height},setWidth:function(L){if(isNullOrUndefined(L)){return}if(this.width===L){return}var K=this.width;this.fireListener(o,["width",L,K]);this.width=L;this.fireListener(j,["width",L,K])},getWidth:function(){return this.width},setValue:function(L){if(this.value===L){return}var K=this.value;this.fireListener(o,["value",L,K]);this.value=L;this.fireListener(j,["value",L,K]);this.fireEvent(k,[this.value])},getValue:function(){return this.value},setTip:function(K){if(isNullOrUndefined(K)){return}if(this.tip===K){return}this.tip=K;this.tip.setControl(this)},getTip:function(){return this.tip},getPlugins:function(){return this.plugins.toArray()},setPlugins:function(K){K=isArray(K)?K:[K];this.removeAllPlugins();for(var M=0,O=K.length;M<O;M++){var N=K[M];if(N instanceof c){this.addPlugin(N)}else{var L=N;if(isNullOrUndefined(N.name)){throw new Error("Can not add Plugin without a name!")}if(!isNullOrUndefined(N.config)){L=N.config}this.addPlugin(q.getInstance().createPlugin(N.name,L))}}},addPlugin:function(K){this.insertPlugin(this.plugins.size(),K)},insertPlugin:function(L,M){var K=this.getPlugins();if(L>K.length){throw new Error("out of range")}if(!this.plugins.contains(M)){this.plugins.insert(L,M)}M.setControl(this)},removePlugin:function(K){this.plugins.remove(K);K.setControl(null)},removeAllPlugins:function(){for(var K=this.plugins.size();K>0;K--){this.removeAllPlugins(this.plugins.get(K))}},getValidateRules:function(){return this.validateRules.toArray()},addValidateRule:function(K){this.validateRules.add(K)},removeValidateRule:function(K){this.validateRules.remove(K)},setValidateRules:function(K){if(isNullOrUndefined(K)){return}this.validateRules.clear();this.validateRules.addRange(K)},isEditable:function(){return false},isInited:function(){return(this.getState()>=F)&&(this.getState()<G)},setInited:function(){this.setState(F);w.add(this)},setLoading:function(){this.setState(l);this.fireListener(x);this.fireEvent(g)},setLoaded:function(){this.setState(E);this.fireListener(y);this.fireEvent(v);this.fireEvent(s)},isLoading:function(){return this.getState()===l},isLoaded:function(){return this.getState()===E},init:function(){if(this.isInited()){debug.warn(this.id+"("+this.defaultName+") init more than twice. current state is "+this.stateText)}this.setInited();this.fireListener(t)},initListeners:function(){this.listeners=new z(this);this.registerListeners();var L=H.createListeners(this),M=L.length,N;for(var K=0;K<M;K++){N=L[K];this.listeners.addListener(N)}},initEvents:function(){this.events=new C(this);this.registerEvents()},load:function(){this.preLoad();this.setLoading();this._checkLoadTimeout();return a.when(this.doLoad()).done({handler:this.setLoaded,scope:this})},_checkLoadTimeout:function(){},preLoad:function(){if(this.getState()===B){return}this.setState(B)},doLoad:function(){},unload:function(){if(!(this.getState()>=F&&this.getState()<G)){return}w.remove(this);this.setState(G);this.fireEvent(n);this.fireListener(r)},showtip:function(K,M){var L=this.getTip();if(L){L.show(K,M)}},hidetip:function(L){var K=this.getTip();if(K){K.hide()}},getBinding:function(){if(!this.binding){this.binding=new A()}return this.binding},setBinding:function(K){if(K instanceof e){this.binding=K}else{this.binding=new h();this.binding.configure(K)}}}).$()});define("Indigox.Web.JsLib.Controls.FormControl",["Indigox.Web.JsLib.Controllers.Controller","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Controls.Container","Indigox.Web.JsLib.Controls.Html.FieldControl","Indigox.Web.JsLib.Controls.Html.ListControl","Indigox.Web.JsLib.Controls.Html.ItemControl","Indigox.Web.JsLib.Controls.Html.FieldSet","Indigox.Web.JsLib.Core"],function(d,l,g,h,n,c,k,b,f,j){var a=c.prototype;var e="submit";var m=Namespace("Indigox.Web.JsLib.Controls").Class("FormControl").Extend(a).Constructor(function(){a.constructor.apply(this,arguments);this.controller=null}).Members({doLoad:function(){var o=new h();if(this.getController()&&this.getController().getAutoLoad()==true){this.getController().load(function(){o.resolve()})}else{o.resolve()}return o.promise()},unload:function(){a.unload.apply(this,arguments);if(this.getController()){this.getController().unload()}},registerEvents:function(){a.registerEvents.call(this);this.events.registerEvents(e)},setController:function(p){if(!(p instanceof d)){var o=p;p=Type.forAlias(o.controllerType).createInstance();p.configure(o)}if(this.controller){this.controller.setView(null)}this.controller=p;if(this.controller){this.controller.setView(this)}if(this.isLoaded()&&this.controller.autoLoad===true){this.controller.load()}},getController:function(){return this.controller},isFieldChild:function(o){if(o instanceof k||o instanceof b||o instanceof f){return true}return false},getFields:function(){var w=[];var q=null;var u=null,r=null;for(u=0,r=this.children.length;u<r;u++){q=this.children[u];if(q instanceof j){var x=null;var t=null,p=null;for(t=0,p=q.children.length;t<p;t++){x=q.children[t];var s=null,v=null,o;for(s=0,o=x.children.length;s<o;s++){v=x.children[s];if(this.isFieldChild(v)){w.push(v)}}}}if(this.isFieldChild(q)){w.push(q)}}return w},submit:function(){this.getController().save(new g(this.doSubmit,this))},doSubmit:function(o){this.fireEvent(e,[o])},reset:function(){var o=this.getFields();var p,q,r;for(p=0,q=o.length;p<q;p++){r=o[p];if(r instanceof j){r.reset()}else{if(r.isEditable()){r.setValue(null)}}}}}).$()});define("Indigox.Web.JsLib.Controls.ListenersFactory",["Indigox.Web.JsLib.Collection.Hashtable","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(b,c){var d=new b();var a=Namespace("Indigox.Web.JsLib.Controls").Class("ListenersFactory").Constructor(function(){}).Static({addListener:function(g,f){var e;if(d.containsKey(g)){e=d.get(g)}else{e=new c();d.put(g,e)}e.add(f)},removeListener:function(g,f){var e;if(d.containsKey(g)){e=d.get(g)}else{throw new Error("There is no listener in the ListenersFactory")}e.remove(f)},clearListeners:function(){d.clear()},createListeners:function(f){if(!f){return new c()}var g;if(isObject(f)){g=f.constructor}else{g=f}var e=null;if(d.containsKey(g)){e=new c();e.addRange(d.get(g))}if(!e){return this.createListeners(g.superclass)}return e.toArray()}}).$()});define("Indigox.Web.JsLib.Controls",["Indigox.Web.JsLib.Controls.Grid","Indigox.Web.JsLib.Controls.Html","Indigox.Web.JsLib.Controls.Component","Indigox.Web.JsLib.Controls.Control","Indigox.Web.JsLib.Controls.FormControl","Indigox.Web.JsLib.Controls.Template","Indigox.Web.JsLib.Controls.Validation.Validator","Indigox.Web.JsLib.Controls.Widgets.Widget","Indigox.Web.JsLib.Controls.Widgets.WidgetZone"],function(c,f,h,a,j,d,b,e,g){return{Grid:c,Html:f,Component:h,Control:a,FormControl:j,Template:d,Validation:{Validator:b},Widgets:{Widget:e,WidgetZone:g}}});define("Indigox.Web.JsLib.Controls.Page",["Indigox.Web.JsLib.Collection.Hashtable","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Utils.Browser","Indigox.Web.JsLib.Utils.DelayedTask","Indigox.Web.JsLib.Utils.UrlUtil","Indigox.Web.JsLib.Controls.PageUrlMonitor","Indigox.Web.JsLib.Controls.Html.LoadMask","Indigox.Web.JsLib.Controls.Widgets.Widget","Indigox.Web.JsLib.Core"],function(a,g,m,e,c,f,l,h){var j="PropertyChanging",d="PropertyChanged";var k=null;var b=h.prototype;var n=Namespace("Indigox.Web.JsLib.Controls").Class("Page").Extend(b).Constructor(function(o){b.constructor.apply(this,arguments);this.loadMask=null;this.masked=l.NONE;this.context=new a()}).Static({getInstance:function(){if(!k){k=new n()}return k},IGNORE_EMPTY_NEW_VALUE:1,IGNORE_EMPTY_OLD_VALUE:2}).Members({initChildren:function(){b.initChildren.apply(this,arguments);if(this.getLoadMask()){this.getLoadMask().init()}},preLoadChildren:function(){var o=b.preLoadChildren.apply(this,arguments);if(this.getLoadMask()){this.getLoadMask().load()}},loadChildren:function(){var o=b.loadChildren.apply(this,arguments);if(this.getLoadMask()){this.getLoadMask().load()}return o},unloadChildren:function(){b.unloadChildren.apply(this,arguments);if(this.getLoadMask()){this.getLoadMask().unload()}},getContextValue:function(o){return this.context.get(o)},setContextValue:function(o,p){this.context.put(o,p)},setID:function(o){b.setID.call(this,o);this.updateAllChildrenID(this.children)},updateAllChildrenID:function(r){var q=null,s=null;var o=null,p={};for(q=0,s=r.length;q<s;q++){o=r[q].getName();if(!(o in p)){p[o]=0}r[q].setID(o+":"+p[o]++)}},updateChildrenID:function(r,p){var q=null,t=null;if(r.length===0){return}var u=r[p],o=u.getName(),s=0;for(q=0,t=p;q<t;q++){if(r[q].getName()===o){s++}}for(q=p,t=r.length;q<t;q++){if(r[q].getName()===o){r[q].setID(o+":"+s++)}}},setLoadMask:function(p){var o=this.getLoadMask();if(o){o.setParent(null)}if(p){p.setParent(this)}this.loadMask=p;this.fireListener(d,["loadMask",p,o])},getLoadMask:function(){return this.loadMask},setMasked:function(o){this.masked=o;this.fireListener(d,["masked",this.masked])},getMasked:function(){return this.masked},mask:function(){this.loadMask.show()},unmask:function(){this.loadMask.hide()},unload:function(){b.unload.apply(this,arguments);k=null},getUrl:function(){if(location.hash.length>1){var q=location.hash.substring(1);var o=c.concate(q);return o}var p=c.get("page");if(p){return p}return window.location.href},getUrlPath:function(){return c.getPath(this.getUrl())},getUrlParam:function(o){return c.get(o,this.getUrl())},getUrlParams:function(){return c.getParams(this.getUrl())},listenUrlParamChanged:function(r,p,q){var o={paramFilters:r};if(p){if(p.mode){o.paramIgnoreFilters=p.mode}if(p.container){o.container=p.container}}new f(o).onUrlParamChanged(q)}}).$();window.Page=n.getInstance});define("Indigox.Web.JsLib.Controls.PageUrlMonitor",["Indigox.Web.JsLib.Utils.Configurable","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Utils.UrlUtil","Indigox.Web.JsLib.Core"],function(f,e,a,c,d){var g=f.prototype;var b=Namespace("Indigox.Web.JsLib.Controls").Class("PageUrlMonitor").Extend(g).Constructor(function(h){this.urlPathChangedCallbacks=new e();this.urlParamChangedCallbacks=new e();this.urlHashChangedCallback=new a(this.onClientUrlChanged,this);this.url=Page().getUrl();this.urlParamChangePending=null;this.disposed=false;this.paramFilters=[];this.paramIgnoreFilters=0;this.container=null;this.configure(h);d.onHashChanged(this.urlHashChangedCallback);var j=this;Page().on("loading",function(){j.setUrlParamChangePending(new c())});Page().on("loaded",function(){var k=j.getUrlParamChangePending();if(k){k.resolve()}j.setUrlParamChangePending(null)})}).Static({IGNORE_EMPTY_NEW_VALUE:1,IGNORE_EMPTY_OLD_VALUE:2}).Members({setParamFilters:function(h){this.paramFilters=h},getParamFilters:function(){return this.paramFilters},setParamIgnoreFilters:function(h){this.paramIgnoreFilters=h},getParamIgnoreFilters:function(){return this.paramIgnoreFilters},setContainer:function(j){this.container=j;if(j!=null){var h=this;h.container.on("unload",function(){h.dispose()})}},getContainer:function(){return this.container},setUrlParamChangePending:function(h){this.urlParamChangePending=h},getUrlParamChangePending:function(){return this.urlParamChangePending},onClientUrlChanged:function(){var s=this.url;var j=Page().getUrl();this.url=j;var r=d.getPath(j);var o=d.getPath(s);if(r.toLowerCase()!==o.toLowerCase()){this.urlPathChange(j,s)}var l=d.getParams(j);var p=d.getParams(s);if(this.paramFilters){for(var q=0,m=this.paramFilters.length;q<m;q++){var n=this.paramFilters[q];var k=l[n];var h=p[n];if((this.paramIgnoreFilters&Page.IGNORE_EMPTY_NEW_VALUE)&&isNullOrUndefined(k)){continue}if((this.paramIgnoreFilters&Page.IGNORE_EMPTY_OLD_VALUE)&&isNullOrUndefined(h)){continue}if(k!==h){this.urlParamChanged=true;this.urlParamChange(n,k,h);return}}}},urlPathChange:function(m,l){if(this.disposed){return}var k=this.urlPathChangedCallbacks.toArray();for(var h=0,j=k.length;h<j;h++){k[h].invoke()}},urlParamChange:function(l,j,h){if(this.disposed){return}var k=this.getUrlParamChangePending();if(k){k.done({handler:this.doUrlParamChange,scope:this,args:[l,j,h]})}else{this.doUrlParamChange(null,l,j,h)}},doUrlParamChange:function(k,o,n,h){if(this.disposed){return}if(this.urlParamChanged){var m=this.urlParamChangedCallbacks.toArray();for(var j=0,l=m.length;j<l;j++){m[j].invoke()}this.urlParamChanged=false}},onUrlPathChanged:function(h){if(!h){return}h=a.createInstance(h);this.urlPathChangedCallbacks.add(h)},onUrlParamChanged:function(h){if(!h){return}h=a.createInstance(h);this.urlParamChangedCallbacks.add(h)},dispose:function(){this.disposed=true}}).$()});define("Indigox.Web.JsLib.Controls.Template",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Collection.Hashtable","Indigox.Web.JsLib.Controls.Control","Indigox.Web.JsLib.Controls.ListenersFactory","Indigox.Web.JsLib.Controls.Container","Indigox.Web.JsLib.Core"],function(h,a,c,g,d){var b=d.prototype;var k={defaultName:true,loaded:true,id:true,state:true,stateText:true};var e=function(o,p){var n=new a();var r=function(s){if(!isObject(s)||!(s instanceof c)||isNullOrUndefined(s)){return s}if(n.containsKey(s)){return n.get(s)}p=new s.constructor();n.put(s,p);q(s,p);return p};var q=function(t,u){for(var s in t){if(s==="binding"){u.binding=t.binding;continue}if(isFunction(t[s])||s in k){continue}if(t[s] instanceof Array){m(t[s],u[s])}else{if(t[s] instanceof h){l(t[s],u[s])}else{if(t[s] instanceof c){u[s]=r(t[s])}else{if(isObject(t[s])){if(isNullOrUndefined(t[s])){u[s]=null}else{n.put(t[s],u[s])}}else{u[s]=t[s]}}}}}};var m=function(v,w){var u=v.length,t=null;var s=null;for(s=0;s<u;s++){t=v[s];if(t instanceof c){w.push(r(t))}}};var l=function(v,w){var x=v.toArray(),u=x.length,t=null,s=null;for(s=0;s<u;s++){t=x[s];if(t instanceof c){w.add(r(t))}}};n.put(o,p);n.put(o.getParent(),null);if(o.getSource){n.put(o.getSource(),null)}q(o,p)};var j="Init";var f=Namespace("Indigox.Web.JsLib.Controls").Class("Template").Extend(b).Constructor(function(){b.constructor.apply(this,arguments);this.source=null}).Static({reference:function(l){var m=new f();e(l,m);m.setSource(l);return m}}).Members({getSource:function(){return this.source},setSource:function(l){this.source=l},init:function(){b.init.apply(this,arguments)},load:function(){},applyTo:function(l){e(this,l);l.setTemplate(this)},configureChildren:function(l){for(var m in l){var n=this.getChild(m);if(n&&n.configure){n.configure(l[m])}}}}).$()});define("Indigox.Web.JsLib.Controls.UIEngine",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Criteria.Criteria","Indigox.Web.JsLib.Criteria.Restrictions","Indigox.Web.JsLib.Core"],function(k,f,h){var g=h.current,e=h.and,d=h.or,a=h.not,j=h.property;var c=new k();var b=Namespace("Indigox.Web.JsLib.Controls").Class("UIEngine").Constructor(function(l,m){m=m||Type.forFullName("Indigox.Web.JsLib.Controls.Control").getClass();this.controls=l;for(var n in m.prototype){if(n==="constructor"){continue}else{if(n in this){throw new Error('the method "'+n+'" has already in the List object. It can not be added in the object!')}}this[n]=function(o){return function(){var p=new k();var q=this.iterator();while(q.hasNext()){var r=q.next();p.add(r[o].apply(r,arguments))}if(p.size()){return p.get(0)}}}(n)}}).Members({first:function(){return this.controls.get(0)},last:function(){return this.controls.get(this.controls.size()-1)},get:function(l){return this.controls.get(l)},each:function(n){var l=this.iterator();while(l.hasNext()){var m=l.next();n.call(m)}},searchDescendants:function(l,r){var p=function(v){var w=[],y,x,z;if(v.children){y=v.children;for(x=0,z=y.length;x<z;x++){w.push(y[x]);w.push.apply(w,p(y[x]))}}if(v.childNodes){if(v.control){w.push(v.control)}y=v.getChildNodes();for(x=0,z=y.length;x<z;x++){w.push(y[x]);w.push.apply(w,p(y[x]))}}if(v.items){y=v.getItems();for(x=0,z=y.length;x<z;x++){w.push(y[x]);w.push.apply(w,p(y[x]))}}return w};var u=[];var n=this.controls;var o,m;for(o=0,m=n.size();o<m;o++){u.push.apply(u,p(n.get(o)))}var t=f.create(u);if(l){t.add(j("name").eq(l))}if(r&&r!==Type.forFullName("Indigox.Web.JsLib.Controls.Control").getClass()){t.add(j("constructor").eq(r))}var q=t.list();var s=new b(q,r);return s},iterator:function(){return this.controls.iterator()}}).Static({add:function(l){if(l.isLoaded()){throw new Error('Can not create control "'+l.id+'" that was same with a control already created!')}else{c.add(l)}},getControls:function(){return c},clear:function(){c.clear()},contains:function(l){return c.contains(l)},find:function(l,n){var p=f.create(c);if(l){p.add(j("name").eq(l))}if(n&&n!==Type.forFullName("Indigox.Web.JsLib.Controls.Control").getClass()){p.add(j("constructor").eq(n))}var o=p.list();var m=new b(o,n);return m},remove:function(l){c.remove(l)},all:function(){return c.toArray()}}).$()});define("Indigox.Web.JsLib.Core.debug",function(){var f=true;window.timer={};window.timespan={};window.out=false;var a={encodeHtml:function(h){var g=h.replace(/&/g,"&amp;").replace(/(\s)[ ]/g,"$1&nbsp;").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"").replace(/\n/g,"<br/>");return g},catchPageError:function(){window.onerror=function(g){window.debug.error(g)}}};var c={consoleWriter:function(){return console},alertWriter:function(){return{log:function(g,h){h=h||"debug";alert("["+h+"] "+g)},error:function(g){this.log(g,"error")},warn:function(g){this.log(g,"warn")}}},dummyWriter:function(){return{log:function(g){},error:function(g){},warn:function(g){}}},pageWriter:function(){var o=null;var l=true;var k=[];var h=true;a.catchPageError();function m(){if(!o){o=document.getElementById("debug_console");if(!o){j()}}}function j(){if(document.body){h=true;var p=document.createElement("div");p.id="debug_console";document.body.appendChild(p);o=p}else{h=false}}function n(s,u){if(!l){return}try{m();if(h){var t=k.length;if(t>0){var p,q;for(p=0;p<t;p++){q=k[p];o.appendChild(g(q.msg,q.level))}k=[]}o.appendChild(g(s,u))}else{k.push({msg:s,level:u})}}catch(r){alert("debug module error: "+r.message);l=false}}function g(q,r){var p=document.createElement("div");p.className="node"+((r)?" "+r:"");p.innerHTML=(typeof q==="undefined")?"[undefined]":((q===null)?"[null]":a.encodeHtml(q.toString()));return p}return{log:function(p){n(p)},error:function(p){n(p,"error")},warn:function(p){n(p,"warn")}}},popupWriter:function(){var j="width=800,height=600,resizable=1,scrollbars=1,location=0,status=0,toolbar=0";var h="indigox_web_jslib_debugwindow";var l=true;a.catchPageError();function m(q,r){if(!l){return}try{var n=window.open("",h,j);var p=n.document;if(p.body.getElementsByTagName("div").length===0){k(p)}p.body.appendChild(g(q,r,p));n.scrollTo(0,p.body.scrollHeight)}catch(o){alert("debug module error: "+o.message);l=false}}function g(p,q,o){var n=o.createElement("div");n.className="node"+((q)?" "+q:"");n.innerHTML=(typeof p==="undefined")?"[undefined]":((p===null)?"[null]":a.encodeHtml(p.toString()));return n}function k(n){n.write(["<html>","<head>","<title>debug</title>","<style>","body {background-color: #DDDDDD;border: 1px solid #3333CC;max-height: 200px;width: auto;overflow: scroll; /*white-space: nowrap;*/}",".node {text-align: left;padding: 8px;border-bottom: 1px solid #C0C0C0;color: #000000;background-color: #FFFFFF;}",".warn {background-position: 4px 8px;padding-left: 30px;background-color: #FFFFC8;color: #000000;background-image: url(/res/css/img/warn.gif);background-repeat: no-repeat;background-attachment: fixed;}",".error {background-position: 4px 8px;padding-left: 30px;background-color: #FFEBEB;color: #FF0000;background-image: url(/res/css/img/error.gif);background-repeat: no-repeat;background-attachment: fixed;}","</style>","</head>","<body>",'<div><input type="button" value="CLOSE" onclick="window.close();" /></div>',"</body>","</html>"].join(""))}return{log:function(n){m(n)},error:function(n){m(n,"error")},warn:function(n){m(n,"warn")}}}};var e={};var d=function(l){var k=[];for(var g=0,j=l.length;g<j;g++){var h=l[g];if(h===null){k.push("null")}else{if(typeof(h)==="undefined"){k.push("undefined")}else{if(typeof(h)==="object"){if(h.toString!==Object.prototype.toString){k.push(h.toString())}else{k.push(h)}}else{k.push(h)}}}}return k.join(" ")};var b={writer:c.dummyWriter(),log:function(g){this.writer.log(d(arguments))},error:function(g){this.writer.error(d(arguments))},warn:function(g){this.writer.warn(d(arguments))},time:function(g,h){window.out=false;try{if(!e[g]){e[g]={beginTime:null,totalSpend:null,addUp:false,count:0}}if(e[g].count===0){e[g].beginTime=new Date().getTime();e[g].addUp=!!h}e[g].count++}catch(j){b.warn(j)}},timeEnd:function(j,g){try{var l=e[j];if(!l||l.beginTime==null){b.warn("time "+j+" is not start.");return}l.count--;if(l.count>0){return}var h=new Date().getTime()-l.beginTime;window.timespan[j]=h;l.beginTime=null;l.totalSpend=(l.addUp)?(l.totalSpend+h):(h);b.log(l.totalSpend+"ms\t"+j+((g)?("\t"+g):""));window.timer[j]=l.totalSpend;window.out=true}catch(k){b.warn(k)}},trace:function(){}};if(window.console&&f){b.writer=c.consoleWriter();console.time=b.time;console.timeEnd=b.timeEnd;b=console}window.debug=b});define("Indigox.Web.JsLib.Core.is",function(){var a={isFunction:function(c){return(typeof(c)==="function")},isNumber:function(c){return(typeof(c)==="number")},isInt:function(c){var d=parseInt(c,10);if(isNaN(d)){return false}return c===d&&c.toString()===d.toString()},isString:function(c){return(typeof(c)==="string")},isBoolean:function(c){return(typeof(c)==="boolean")},isObject:function(c){return(typeof(c)==="object")},isArray:function(c){return(!this.isNullOrUndefined(c)&&c instanceof Array)},isNull:function(c){return(c==null)},isUndefined:function(c){return(typeof(c)==="undefined")},isNullOrUndefined:function(c){return(typeof(c)==="undefined"||c==null)},isElement:function(d){if(isNullOrUndefined(d)){return false}try{return d instanceof HTMLElement}catch(c){return(typeof d==="object")&&(d.nodeType===1)&&(typeof d.style==="object")&&(typeof d.ownerDocument==="object")}}};for(var b in a){window[b]=a[b]}});define("Indigox.Web.JsLib.Core.Keywords",["Indigox.Web.JsLib.Core.debug"],function(){window.Namespace=function(k){return new c({namespace:k})};var b={};var c=function(k){this.Class=function(l){k.className=l;return this};this.Extend=function(l){k.superclass=l;return this};this.Constructor=function(l){k._constructor=l;return this};this.Static=function(l){k.staticMembers=l;return this};this.Members=function(l){k.members=l;return this};this.$=function(){return f.declare(k)}};var f={createNamespace:function(k){var l=null,n=null;if(k instanceof Array){for(l=0,n=k.length;l<n;l++){this.createNamespace(k[l])}}else{var o=k.split(".");var m=b;for(l=0,n=o.length;l<n;l++){m=m[o[l]]=m[o[l]]||{}}return m}},createConstructor:function(n,m,l){l=l||function(){};var k=n[m]=l;return k},createExtend:function(k,m){var l=function(){};l.prototype=m;k.prototype=new l();k.superclass=m.constructor;k.prototype.constructor=k;return k},createStatic:function(k,n,m){for(var l in n){k[l]=n[l]}return k},createMembers:function(l,k,n){for(var m in k){l.prototype[m]=k[m]}return l},declare:function(p){var n=this.createNamespace(p.namespace);var l;var k=(p.namespace+"."+p.className);if(k in h){debug.warn("redefine class: "+k);return h[k]._class}try{if(p.className){l=this.createConstructor(n,p.className,p._constructor)}if(p.superclass){l=this.createExtend(l,p.superclass)}if(p.staticMembers){l=this.createStatic(l,p.staticMembers)}if(p.members){l=this.createMembers(l,p.members)}if(j){if(j.isDefined(k)){var m=j.get(k);if(m.factory){m.exports=l}else{debug.warn("module of clsss '"+k+"' not set factory.")}}else{debug.warn("class '"+k+"' is not used define.");define(k,function(){return l})}}g(p.namespace,p.className,l)}catch(o){debug.log(p);throw"Complie class "+k+" failed."}return l}};var e=[],h={},d={};function g(o,n,k){var p=[o,".",n].join("");if(p in h){throw new Error(['The class "',p,'" has be declared. please check the program, and make sure there is no duplication of class.'].join(""))}var l=n.toLowerCase();if(l in d){throw new Error(['The alias:"',l,'" of class "',p,'" has be declared. please check the program, and make sure there is no duplication of class.'].join(""))}var m=new a(o,n,l,k);e.push(m);h[p]=m;d[l]=m}var a=function(n,m,l,k){this.namesapce=n;this.name=m;this.alias=l;this._class=k};a.forAlias=function(k){if(!(k in d)){throw new Error(['The alias:"',k,'" of class has not be declared. please check spelling, or make sure there is class declaration exists.'].join(""))}return d[k]};a.forFullName=function(k){if(!(k in h)){throw new Error(['The class "',k,'" has not be declared. please check spelling, and make sure there is class declaration exists.'].join(""))}return h[k]};a.forClass=function(k){var l=null,m=null;for(l=0,m=e.length;l<m;l++){if(e[l].getClass()===k){return e[l]}}throw new Error(['The class "',k.toString(),'" has not be declared. please check the program, and make sure there is class declaration exists.'].join(""))};a.forInstance=function(k){return a.forClass(k.constructor)};a.prototype={getFullName:function(){return[this.namespace,".",this.name].join("")},getNamespace:function(){return this.namespace},getName:function(){return this.name},getAlias:function(){return this.alias},getClass:function(){return this._class},createInstance:function(){return new this._class()}};window.Type=a;var j;require.adapte({setModuleManager:function(k){j=k}});return{Type:a}});define("Indigox.Web.JsLib.Core",["Indigox.Web.JsLib.Core.debug","Indigox.Web.JsLib.Core.is","Indigox.Web.JsLib.Core.Keywords"],function(a,c,b){return{}});define("Indigox.Web.JsLib.CQRS.AutoBatch",["Indigox.Web.JsLib.CQRS.Batch","Indigox.Web.JsLib.Utils.DelayedTask","Indigox.Web.JsLib.Core"],function(e,d){var c=e.prototype;var b=Namespace("Indigox.Web.JsLib.CQRS").Extend(c).Class("AutoBatch").Constructor(function(){c.constructor.apply(this,arguments);this.id="Auto"+this.id;this.delayedTask=null}).Static({getCurrentBatch:function(){if(a==null){a=new b();a.id="AutoBatch"}return a}}).Members({commit:function(){if(this.delayedTask){this.delayedTask.cancel()}this.delayedTask=new d(function(){c.commit.call(this).always({handler:function(){if(this.hasWaitingInstructions()){this.commit()}},scope:this});this.delayedTask=null},this,[]);this.delayedTask.delay(50)},addInstruction:function(f){c.addInstruction.apply(this,arguments);if(!this.isBusing()){this.commit()}}}).$();var a=null});define("Indigox.Web.JsLib.CQRS.Batch",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Collection.Hashtable","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Utils.Delegate","Indigox.Web.JsLib.Utils.UrlUtil","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.CQRS.InstructionOptionParser","Indigox.Web.JsLib.Connection.Ajax","Indigox.Web.JsLib.Serialization.JsonSerializer","Indigox.Web.JsLib.Core"],function(o,a,m,f,h,j,l,b,k){var d=Namespace("Indigox.Web.JsLib.CQRS").Class("Batch").Constructor(function(p,q){this.id=e.next();this.url=p||n;this.method=q||c;this.instructions=new a();this.waitingInstructions=new o();this.requestingInstructions=new o();this.serializer=new k()}).Static({beginBatch:function(p,q){return new d(p,q)},getCurrentBatch:function(){if(g==null){g=new d()}return g}}).Members({list:function(p){var q=l.getInstance().parseQuery(p,"List");this.addInstruction(q);return q.promise()},single:function(p){var q=l.getInstance().parseQuery(p,"Single");this.addInstruction(q);return q.promise()},size:function(p){var q=l.getInstance().parseQuery(p,"Size");this.addInstruction(q);return q.promise()},execute:function(p){var q=l.getInstance().parseCommand(p,"Execute");this.addInstruction(q);return q.promise()},commit:function(r,p){this.preCommit();var q=this.doCommit(true);if(r){q.done(r)}if(p){q.fail(p)}return q},syncCommit:function(r,p){this.preCommit();var q=this.doCommit(false);if(r){q.done(r)}if(p){q.fail(p)}return q},preCommit:function(){var q=this.waitingInstructions.toArray();for(var r=0,s=q.length;r<s;r++){var p=q[r];this.waitingInstructions.remove(p);this.requestingInstructions.add(p)}},isBusing:function(){return this.requestingInstructions.size()>0},hasWaitingInstructions:function(){return this.waitingInstructions.size()>0},doCommit:function(s){var v=[];var t=this.requestingInstructions.toArray();for(var u=0,r=t.length;u<r;u++){var p=t[u];var w=p.parseClientInput();v.push(w)}var q=new b({method:this.method,url:h.join(this.url,{r:Math.random().toString().replace(".","")}),async:s,data:this.serializer.serialize(v)});debug.time(this.id);var x=q.send();x.progress({handler:this.onRequestProcess,scope:this}).done({handler:this.onRequestSucceed,scope:this}).fail({handler:this.onRequestError,scope:this});return m.when(t)},_printInstructions:function(){var t=[],r=[],s=[];var q,u,p;p=this.instructions.values();for(q=0,u=p.length;q<u;q++){t.push(p[q].id)}p=this.waitingInstructions.toArray();for(q=0,u=p.length;q<u;q++){r.push(p[q].id)}p=this.requestingInstructions.toArray();for(q=0,u=p.length;q<u;q++){s.push(p[q].id)}debug.log(s,r,t)},_getInstructionsDebugInfo:function(){var s=[];var p=this.requestingInstructions.toArray();for(var q=0,r=p.length;q<r;q++){s.push(p[q].name+":"+p[q].method)}return s.join(", ")},onRequestProcess:function(q){var p=Page().getLoadMask();if((q.state==2)&&(q.responseLength)){if(j.isNullOrEmpty(p.getValue())){p.setValue("加载中...")}if(q.responseLength>(100*1024)){p.setValue("数据较多,请耐心等候...")}}},onRequestSucceed:function(u){debug.timeEnd(this.id,this._getInstructionsDebugInfo());var v=this.serializer.deserialize(u);for(var s=0,t=v.length;s<t;s++){var r=v[s];var q=this.getInstruction(r.ID);if(q==null){debug.warn("Can't find instruction: "+r.ID);continue}if(!this.requestingInstructions.contains(q)){continue}var p=q.parseClientOutput(r);this.onInstructionComplete(q)}},onRequestError:function(r){var q=this.requestingInstructions.toArray();var t={Status:-1,Error:r};for(var s=0,u=q.length;s<u;s++){var p=q[s];p.parseClientOutput(t);this.onInstructionComplete(p)}console.error("Batch failed. --->",r)},onInstructionComplete:function(p){this.requestingInstructions.remove(p);this.instructions.remove(p.id)},addInstruction:function(p){this.instructions.put(p.getId(),p);this.waitingInstructions.add(p)},getInstruction:function(p){return this.instructions.get(p)}}).$();var e=(function(){var p={};return{next:function(q){if(!(q in p)){p[q]=1}return(q||"batch")+"_"+(p[q]++)}}}());var n="_remoting/call?_remotingcommand=batch";var c="CALL";var g=null});define("Indigox.Web.JsLib.CQRS.Command",["Indigox.Web.JsLib.CQRS.Instruction","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.CQRS").Extend(c).Class("Command").Constructor(function(d){c.constructor.apply(this,arguments)}).$()});define("Indigox.Web.JsLib.CQRS.Instruction",["Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Utils.ErrorHandler","Indigox.Web.JsLib.Core"],function(c,b){var e=0;var d=c.prototype;var a=Namespace("Indigox.Web.JsLib.CQRS").Class("Instruction").Extend(d).Constructor(function(f){d.constructor.call(this);if(!f){f={}}this.id=f.id||"";this.name=f.name||"";this.method=f.method||"";this.properties=f.properties||{};if(f.callback){this.done(f.callback)}if(f.errorCallback){this.fail(f.errorCallback)}}).Members({getId:function(){return this.id},setId:function(f){this.id=f},getName:function(){return this.name},setName:function(f){this.name=f},getMethod:function(){return this.method},setMethod:function(f){this.method=f},getProperties:function(){return this.properties},setProperties:function(f){this.properties=f},parseClientInput:function(){var f={ID:this.getId(),Name:this.getName(),Method:this.getMethod(),Properties:this.getProperties()};return f},parseClientOutput:function(f){if(f.Status>=e){this.setState("succed");var h=f.Result;this.resolve(h)}else{this.setState("error");var g=f.Error;b.log(["instruction ",this.id," is fail."].join(""));b.log(g);this.reject(g)}}}).$()});define("Indigox.Web.JsLib.CQRS.InstructionOptionParser",["Indigox.Web.JsLib.CQRS.Command","Indigox.Web.JsLib.CQRS.Query","Indigox.Web.JsLib.Core"],function(e,c){var a=null;var d=Namespace("Indigox.Web.JsLib.CQRS").Class("InstructionOptionParser").Static({getInstance:function(){if(!a){a=new d()}return a}}).Members({parseQuery:function(f,g){f.id=b.next(f.name);f.method=g;return new c(f)},parseCommand:function(f,g){f.id=b.next(f.name);f.method=g;return new e(f)}}).$();var b=(function(){var f={};return{next:function(g){if(!(g in f)){f[g]=1}return(g||"instruction")+"_"+(f[g]++)}}}())});define("Indigox.Web.JsLib.CQRS.Query",["Indigox.Web.JsLib.CQRS.Instruction","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.CQRS").Extend(c).Class("Query").Constructor(function(d){c.constructor.apply(this,arguments)}).$()});define("Indigox.Web.JsLib.Criteria.Conjunction",["Indigox.Web.JsLib.Criteria.Junction","Indigox.Web.JsLib.Core"],function(c){var b=c.prototype;var a=Namespace("Indigox.Web.JsLib.Criteria").Class("Conjunction").Extend(b).Constructor(function(e,d){b.constructor.apply(this,arguments)}).Members({evaluate:function(f){var d=this.criteriaList.iterator();var e;while(d.hasNext()){e=d.next();if(!e.evaluate(f)){return false}}return true}}).$()});define("Indigox.Web.JsLib.Criteria.Criteria",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(b){var c=function(h,j,l){var k,e,g,f,d;k=h.iterator();while(k.hasNext()){g=k.next();d=true;e=l.iterator();while(e.hasNext()){f=e.next();if(!f.evaluate(g)){d=false;break}}if(d){j.add(g)}}};var a=Namespace("Indigox.Web.JsLib.Criteria").Class("Criteria").Constructor(function(d){this.originalList=d instanceof b?d:new b(d);this.filterList=new b();this.criteriaList=new b()}).Static({create:function(d){return new a(d)}}).Members({add:function(d){this.criteriaList.add(d);return this},addCriteria:function(d){this.criteriaList.addRange(d);return this},list:function(){c(this.originalList,this.filterList,this.criteriaList);return this.filterList},iterator:function(){c(this.originalList,this.filterList,this.criteriaList);return this.filterList.iterator()},array:function(){c(this.originalList,this.filterList,this.criteriaList);return this.filterList.toArray()}}).$()});define("Indigox.Web.JsLib.Criteria.Criterion",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.Criteria").Class("Criterion").Constructor(function(){}).Members({evaluate:function(b){}}).$()});define("Indigox.Web.JsLib.Criteria.CurrentExpression",["Indigox.Web.JsLib.Criteria.Criterion","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Criteria").Class("CurrentExpression").Extend(c).Constructor(function(d){this.reference=d}).Members({evaluate:function(d){return d==this.reference}}).$()});define("Indigox.Web.JsLib.Criteria.Disjunction",["Indigox.Web.JsLib.Criteria.Junction","Indigox.Web.JsLib.Core"],function(c){var b=c.prototype;var a=Namespace("Indigox.Web.JsLib.Criteria").Class("Disjunction").Extend(b).Constructor(function(e,d){b.constructor.apply(this,arguments)}).Members({evaluate:function(f){var d=this.criteriaList.iterator();var e;while(d.hasNext()){e=d.next();if(e.evaluate(f)){return true}}return false}}).$()});define("Indigox.Web.JsLib.Criteria.Junction",["Indigox.Web.JsLib.Criteria.Criterion","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(b,a){var c=b.prototype;var d=Namespace("Indigox.Web.JsLib.Criteria").Class("Junction").Extend(c).Constructor(function(g,e){this.criteriaList=new a();var f=[].slice.call(arguments);this.criteriaList.addRange(f)}).Members({evaluate:function(e){}}).$()});define("Indigox.Web.JsLib.Criteria.NotExpression",["Indigox.Web.JsLib.Criteria.Criterion","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Criteria").Class("NotExpression").Extend(b).Constructor(function(d){this.criterion=d}).Members({evaluate:function(d){return !this.criterion.evaluate(d)}}).$()});define("Indigox.Web.JsLib.Criteria.NotNullExpression",["Indigox.Web.JsLib.Criteria.Criterion","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Criteria").Class("NotNullExpression").Extend(c).Constructor(function(d){this.property=d}).Members({evaluate:function(d){return !isNullOrUndefined(d[this.property])}}).$()});define("Indigox.Web.JsLib.Criteria.NullExpression",["Indigox.Web.JsLib.Criteria.Criterion","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Criteria").Class("NullExpression").Extend(c).Constructor(function(d){this.property=d}).Members({evaluate:function(d){return isNullOrUndefined(d[this.property])}}).$()});define("Indigox.Web.JsLib.Criteria.PropertyExpression",["Indigox.Web.JsLib.Criteria.Criterion","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Criteria").Class("PropertyExpression").Extend(c).Constructor(function(f,d,e){this.property=f;this.otherProperty=d;this.operator=e}).Static({EQUAL:0,NOT_EQUAL:1,GREATER_THAN_OR_EQUAL:2,GREATER_THAN:3,LESS_THAN_OR_EQUAL:4,LESS_THAN:5}).Members({evaluate:function(d){switch(this.operator){case a.EQUAL:return d[this.property]==d[this.otherProperty];case a.NOT_EQUAL:return d[this.property]!=d[this.otherProperty];case a.GREATER_THAN_OR_EQUAL:return d[this.property]>=d[this.otherProperty];case a.GREATER_THAN:return d[this.property]>d[this.otherProperty];case a.LESS_THAN_OR_EQUAL:return d[this.property]<=d[this.otherProperty];case a.LESS_THAN:return d[this.property]<d[this.otherProperty]}return false}}).$()});define("Indigox.Web.JsLib.Criteria.RegularExpression",["Indigox.Web.JsLib.Criteria.Criterion","Indigox.Web.JsLib.Core"],function(c){var d=c.prototype;var a="^\\s*$";var b=Namespace("Indigox.Web.JsLib.Criteria").Class("RegularExpression").Extend(d).Constructor(function(g,f,e){this.property=g;this.pattern=f;this.attributes=e}).Members({evaluate:function(f){var e=new RegExp(this.pattern,this.attributes);return e.test(f[this.property])}}).$()});define("Indigox.Web.JsLib.Criteria.Restrictions",["Indigox.Web.JsLib.Criteria.CurrentExpression","Indigox.Web.JsLib.Criteria.Conjunction","Indigox.Web.JsLib.Criteria.Disjunction","Indigox.Web.JsLib.Criteria.NotExpression","Indigox.Web.JsLib.Criteria.NotNullExpression","Indigox.Web.JsLib.Criteria.NullExpression","Indigox.Web.JsLib.Criteria.PropertyExpression","Indigox.Web.JsLib.Criteria.RegularExpression","Indigox.Web.JsLib.Criteria.ValueExpression","Indigox.Web.JsLib.Core"],function(b,e,h,j,d,f,k,c,a){var g=Namespace("Indigox.Web.JsLib.Criteria").Class("Restrictions").Constructor(function(){}).Static({current:function(l){return new b(l)},and:function(n,l){var m=new e();e.apply(m,arguments);return m},or:function(m,l){var n=new h();h.apply(n,arguments);return n},not:function(l){return new j(l)},property:function(l){return{eq:function(m){return new a(l,m,a.EQUAL)},ne:function(m){return new a(l,m,a.NOT_EQUAL)},ge:function(m){return new a(l,m,a.GREATER_THAN_OR_EQUAL)},gt:function(m){return new a(l,m,a.GREATER_THAN)},le:function(m){return new a(l,m,a.LESS_THAN_OR_EQUAL)},lt:function(m){return new a(l,m,a.LESS_THAN)},match:function(n,m){return new c(l,n,m)},eqProperty:function(m){return new k(l,m,a.EQUAL)},neProperty:function(m){return new k(l,m,a.NOT_EQUAL)},geProperty:function(m){return new k(l,m,a.GREATER_THAN_OR_EQUAL)},gtProperty:function(m){return new k(l,m,a.GREATER_THAN)},leProperty:function(m){return new k(l,m,a.LESS_THAN_OR_EQUAL)},ltProperty:function(m){return new k(l,m,a.LESS_THAN)},isNotNull:function(){return new d(l)},isNull:function(){return new f(l)}}}}).Members({}).$()});define("Indigox.Web.JsLib.Criteria.ValueExpression",["Indigox.Web.JsLib.Criteria.Criterion","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Criteria").Class("ValueExpression").Extend(c).Constructor(function(f,e,d){this.property=f;this.value=e;this.operator=d}).Static({EQUAL:0,NOT_EQUAL:1,GREATER_THAN_OR_EQUAL:2,GREATER_THAN:3,LESS_THAN_OR_EQUAL:4,LESS_THAN:5}).Members({evaluate:function(d){switch(this.operator){case a.EQUAL:return d[this.property]==this.value;case a.NOT_EQUAL:return d[this.property]!=this.value;case a.GREATER_THAN_OR_EQUAL:return d[this.property]>=this.value;case a.GREATER_THAN:return d[this.property]>this.value;case a.LESS_THAN_OR_EQUAL:return d[this.property]<=this.value;case a.LESS_THAN:return d[this.property]<this.value}return false}}).$()});define("Indigox.Web.JsLib.DOM.Accessors.JQueryAccessor",["Indigox.Web.JsLib.DOM.DOMAccessor","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Utils.Browser","jquery","Indigox.Web.JsLib.Core"],function(a,d,f,h,k){var b=a.prototype;var h=h.getInstance();var j={WebKit:{},Gecko:{innerText:"textContent"},Trident:{textContent:"innerText"},Other:{textContent:"innerText"}};var c={checked:true,"class":true,disabled:true,height:true,href:true,id:true,name:true,readonly:true,selected:true,src:true,target:true,title:true,type:true,value:true,width:true};var g={offsetTop:true,offsetLeft:true,scrollTop:true,scrollLeft:true,clientHeight:true,clientWidth:true,scrollHeight:true,scrollWidth:true};var e=Namespace("Indigox.Web.JsLib.DOM.Accessors").Class("JQueryAccessor").Extend(b).Constructor(function(){b.constructor.apply(this,arguments)}).Members({getTop:function(l){return k(l).css("top")},getLeft:function(l){return k(l).css("left")},getScrollTop:function(l){return k(l).scrollTop()},getScrollLeft:function(l){return k(l).scrollLeft()},getClientTop:function(l){return k(l).offset().top-k().scrollTop()},getClientLeft:function(l){return k(l).offset().left-k().scrollLeft()},getOuterHeight:function(l){return k(l).outerHeight()},getOuterWidth:function(l){return k(l).outerWidth()},getInnerHeight:function(l){return k(l).innerHeight()},getInnerWidth:function(l){return k(l).innerWidth()},getHeight:function(l){return k(l).height()},getWidth:function(l){return k(l).width()},setTop:function(l,m){k(l).css("top",m)},setLeft:function(l,m){k(l).css("left",m)},setScrollTop:function(l,m){k(l).scrollTop("top",m)},setScrollLeft:function(l,m){k(l).scrollLeft(m)},setHeight:function(l,m){k(l).height(m)},setWidth:function(l,m){k(l).width(m)},getText:function(l){return k(l).text()},setText:function(l,m){k(l).text(m)},supportAttribute:function(l){return !(l in j[h.engine])},fixAttribute:function(l){if(this.supportAttribute(l)){return l}else{return j[h.name][l]}},setAttribute:function(n,o,p){var q=null;if(arguments.length===3){q={};q[o]=p}else{q=o}var r=null;var m={};var s={};for(var l in q){r=q[l];if(h.ie()){if(isNullOrUndefined(r)){k(n).removeAttr(l)}}if(!(l==="type"&&n.parentNode)&&!(l in g)){if(l in c){m[l]=r}else{if(!this.supportAttribute(l)){s[this.fixAttribute(l)]=r}else{s[l]=r}}}}k(n).prop(s);k(n).attr(m)},getAttribute:function(l,m){if(!this.supportAttribute(m)){m=this.fixAttribute(m)}if(this.getBrowserAdapter().isSpecifiedAttribute(l,m)){return k(l).prop(m)}else{return null}},getComputedAttribute:function(l,m){if(this.supportAttribute(m)){m=this.fixAttribute(m)}return k(l).attr(m)},setStyle:function(l,n,m){var o=null;if(arguments.length===3){o={};o[n]=m}else{o=n}if(h.ie()){var p=null;for(var q in o){p=o[q];if(isNullOrUndefined(p)){o[q]=""}if(isNumber(m)&&isNaN(p)){delete o[q]}if(q==="opacity"){if(isNullOrUndefined(p)){k(l).css("filter","")}else{o.filter=/(6\.0)|(7\.0)/.test(h.version)?("alpha(opacity="+Math.round(p*100)+")"):('"alpha(opacity='+Math.round(p*100)+')"')}delete o[q]}}}k(l).css(o)},getStyle:function(m,o){if(o.toLowerCase()==="width"){return m.style.width}if(this.getBrowserAdapter().isSpecifiedStyle(m,o)){return k(m).css(o)}if(h.ie()&&o==="opacity"){var n=k(m).css("filter");var l=/alpha\s*\(\s*opacity\s*=\s*(\d+)\s*\)/i.exec(n);if(l){return parseInt(l[1],10)/100}else{return null}}else{return null}},getComputedStyle:function(l,m){return k(l).css(m)},addClass:function(l,m){k(l).addClass(m)},removeClass:function(l,m){k(l).removeClass(m)},toggleClass:function(l,m){k(l).toggleClass(m)},replaceClass:function(n,m,l){b.replaceClass.apply(this,n)},hasClass:function(l,m){return k(l).hasClass(m)},firstChild:function(l){var m=k(l).find(":first");return m.length>0?m[0]:null},lastChild:function(l){var m=k(l).find(":last");return m.length>0?m[0]:null},children:function(l){return k(l).children()},contains:function(l,m){return l.contains(m)},addListener:function(n,l,m){k(n).bind(l,m)},removeListener:function(n,l,m){k(n).unbind(l,m)},clearListeners:function(m,l){k(m).unbind(l)}}).$();a.setInstance(new e())});define("Indigox.Web.JsLib.DOM.Adapters.GeckoAdapter",["Indigox.Web.JsLib.DOM.BrowserAdapter","Indigox.Web.JsLib.Core"],function(c){var b=c.prototype;var a=null;var d=Namespace("Indigox.Web.JsLib.DOM.Adapters").Class("GeckoAdapter").Extend(b).Constructor(function(){}).Static({getInstance:function(){if(isNullOrUndefined(a)){a=new d()}return a}}).Members({}).$()});define("Indigox.Web.JsLib.DOM.Adapters.OtherAdapter",["Indigox.Web.JsLib.DOM.BrowserAdapter","Indigox.Web.JsLib.Utils.Browser","Indigox.Web.JsLib.Core"],function(f,h){var e=f.prototype;var h=h.getInstance();var d={htmlFor:"for",className:"class"};var c=/<[^<]*/g;var g=/\s+(\w+)=/g;var b=null;var a=Namespace("Indigox.Web.JsLib.DOM.Adapters").Class("OtherAdapter").Extend(e).Constructor(function(){}).Static({getInstance:function(){if(isNullOrUndefined(b)){b=new a()}return b}}).Members({getViewportHeight:function(){if(window.innerHeight){return e.getViewportHeight.apply(this,arguments)}else{if(document.documentElement&&document.documentElement.clientHeight){return document.documentElement.clientHeight}else{return document.body.clientHeight}}},getViewportWidth:function(){if(window.innerHeight){return e.getViewportWidth.apply(this,arguments)}else{if(document.documentElement&&document.documentElement.clientWidth){return document.documentElement.clientWidth}else{return document.body.clientWidth}}},isSpecifiedAttribute:function(j,l){if(j.hasAttribute){return e.isSpecifiedAttribute.apply(this,arguments)}else{var k=j.getAttributeNode(l);if(k===null){k=j.getAttributeNode(d[l])}return k!==null}},getSpecifiedAttributes:function(m){if(h.version==="9.0"){return e.getSpecifiedAttributes.apply(this,arguments)}else{var n,j=[];var k=/<[^>]*>/g.exec(m.outerHTML);if(k===null){return j}var l=k[0];while(true){k=g.exec(l);if(k===null){break}n=m.getAttributeNode(k[1]);if(n.expando===false){j.push(n.name)}}return j}},isSpecifiedStyle:function(j,l){if(j.style.length){return e.isSpecifiedStyle.apply(this,arguments)}else{var m=j.style.cssText;var k=new RegExp("(^|;)\\s*("+l+")\\s*:","ig");return k.test(m)}},getSpecifiedStyles:function(l){if(l.style.length){return e.getSpecifiedStyles.apply(this,arguments)}else{var m=[];var n=l.style.cssText;var k;var j=/(^|;)\s*(\w+)\s*:/ig;while(true){k=j.exec(n);if(k===null){break}m.push(k[2].toLowerCase())}return m}},getClassList:function(l,m){if(l.classList){return e.getClassList.apply(this,arguments)}else{var k=[];var m=l.className;var o=m.split(/\s+/);var j=null,n=null;for(j=0,n=o.length;j<n;j++){k.push(o[j])}return k}},parentNode:function(k){var j=e.parentNode(k);if(j===null){return null}if(j.nodeType===11){return null}return k.parentNode}}).$()});define("Indigox.Web.JsLib.DOM.Adapters",["Indigox.Web.JsLib.DOM.Adapters.GeckoAdapter","Indigox.Web.JsLib.DOM.Adapters.OtherAdapter","Indigox.Web.JsLib.DOM.Adapters.WebKitAdapter"],function(c,a,b){return{GeckoAdapter:c,OtherAdapter:a,WebKitAdapter:b}});define("Indigox.Web.JsLib.DOM.Adapters.WebKitAdapter",["Indigox.Web.JsLib.DOM.BrowserAdapter","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.DOM.Adapters").Class("WebKitAdapter").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(isNullOrUndefined(a)){a=new b()}return a}}).Members({getClassList:function(g,h){if(g.classList){return c.getClassList.apply(this,arguments)}else{var f=[];var h=g.className;var k=h.split(/\s+/);var e=null,j=null;for(e=0,j=k.length;e<j;e++){f.push(k[e])}return f}}}).$()});define("Indigox.Web.JsLib.DOM.BrowserAdapter",["Indigox.Web.JsLib.Utils.Browser","Indigox.Web.JsLib.Core"],function(c){var c=c.getInstance();var a={htmlFor:"for",className:"class"};var b=Namespace("Indigox.Web.JsLib.DOM").Class("BrowserAdapter").Constructor(function(){}).Static({getInstance:function(){}}).Members({getViewportHeight:function(){return window.innerHeight},getViewportWidth:function(){return window.innerWidth},getTop:function(d){},getLeft:function(d){},getScrollTop:function(d){},getScrollLeft:function(d){},getClientTop:function(d){},getClientLeft:function(d){},getOuterHeight:function(d){},getOuterWidth:function(d){},getInnerHeight:function(d){},getInnerWidth:function(d){},getHeight:function(d){},getWidth:function(d){},setTop:function(d,e){},setLeft:function(d,e){},setScrollTop:function(d,e){},setScrollLeft:function(d,e){},setHeight:function(d,e){},setWidth:function(d,e){},getText:function(d){},setText:function(d,e){},setAttribute:function(d,e,f){},getAttribute:function(d,e){},getComputedAttribute:function(d,e){},hasAttribute:function(e,f){if(isNullOrUndefined(e)){throw new Error("element is null or undefined.")}var d=f in e;if(d===false){d=a[f] in e}return d},isSpecifiedAttribute:function(e,f){var d=e.hasAttribute(f);if(d===false){d=e.hasAttribute(a[f])}return d},getSpecifiedAttributes:function(f){var h=[];var d=f.attributes;var e=null,g=null;for(e=0,g=d.length;e<g;e++){h.push(d.item(e).name)}return h},setStyle:function(d,f,e){},getStyle:function(d,e){},getComputedStyle:function(d,e){},isSpecifiedStyle:function(e,h){var f=e.style;if(f){var d=null,g=null;for(d=0,g=f.length;d<g;d++){if(h===f.item(d)){return true}}}return false},getSpecifiedStyles:function(e){var h=[];var f=e.style;if(f){var d=null,g=null;for(d=0,g=f.length;d<g;d++){h.push(f.item(d))}}return h},addClass:function(d,e){},removeClass:function(d,e){},replaceClass:function(f,e,d){},toggleClass:function(d,e){},hasClass:function(d,e){},getClassList:function(f,g){var e=[];var j=f.classList;var d=null,h=null;for(d=0,h=j.length;d<h;d++){e.push(j.item(d))}return e},parentNode:function(d){if(isNullOrUndefined(d)){return null}if(isNullOrUndefined(d.parentNode)){return null}return d.parentNode},previousSibling:function(d){throw new Error('the method "previousSibling" is not implemented')},nextSibling:function(d){throw new Error('the method "nextSibling" is not implemented')},previousElement:function(d){throw new Error('the method "previousElement" is not implemented')},nextElement:function(d){throw new Error('the method "nextElement" is not implemented')},firstChild:function(d){throw new Error('the method "firstChild" is not implemented')},lastChild:function(d){throw new Error('the method "lastChild" is not implemented')},firstChildElement:function(d){throw new Error('the method "firstChildElement" is not implemented')},lastChildElement:function(d){throw new Error('the method "lastChildElement" is not implemented')},childNodes:function(d){throw new Error('the method "childNodes" is not implemented')},children:function(d){throw new Error('the method "children" is not implemented')},contains:function(d,e){},addListener:function(f,d,e){},removeListener:function(f,d,e){},clearListeners:function(e,d){}}).$()});define("Indigox.Web.JsLib.DOM.DOMAccessor",["Indigox.Web.JsLib.Utils.Browser","Indigox.Web.JsLib.DOM.Adapters","Indigox.Web.JsLib.Core"],function(e,d){var e=e.getInstance();var b={WebKit:d.WebKitAdapter.getInstance(),Gecko:d.GeckoAdapter.getInstance(),Trident:d.OtherAdapter.getInstance(),Other:d.OtherAdapter.getInstance()};var a=null;var c=Namespace("Indigox.Web.JsLib.DOM").Class("DOMAccessor").Constructor(function(){this.browserAdapter=b[e.engine]}).Static({setInstance:function(f){a=f},getInstance:function(){if(isNullOrUndefined(a)){a=new c()}return a}}).Members({getBrowserAdapter:function(){return this.browserAdapter},getViewportHeight:function(){return this.getBrowserAdapter().getViewportHeight()},getViewportWidth:function(){return this.getBrowserAdapter().getViewportWidth()},getTop:function(f){return this.getBrowserAdapter().getTop(f)},getLeft:function(f){return this.getBrowserAdapter().getLeft(f)},getScrollTop:function(f){return this.getBrowserAdapter().getScrollTop(f)},getScrollLeft:function(f){return this.getBrowserAdapter().getScrollLeft(f)},getClientTop:function(f){return this.getBrowserAdapter().getClientTop(f)},getClientLeft:function(f){return this.getBrowserAdapter().getClientLeft(f)},getOuterHeight:function(f){return this.getBrowserAdapter().getOuterHeight(f)},getOuterWidth:function(f){return this.getBrowserAdapter().getOuterWidth(f)},getInnerHeight:function(f){return this.getBrowserAdapter().getInnerHeight(f)},getInnerWidth:function(f){return this.getBrowserAdapter().getInnerWidth(f)},getHeight:function(f){return this.getBrowserAdapter().getHeight(f)},getWidth:function(f){return this.getBrowserAdapter().getWidth(f)},setTop:function(f,g){this.getBrowserAdapter().setTop(f,g)},setLeft:function(f,g){this.getBrowserAdapter().setLeft(f,g)},setScrollTop:function(f,g){this.getBrowserAdapter().setScrollTop(f,g)},setScrollLeft:function(f,g){this.getBrowserAdapter().setScrollLeft(f,g)},setHeight:function(f,g){this.getBrowserAdapter().setHeight(f,g)},setWidth:function(f,g){this.getBrowserAdapter().setWidth(f,g)},getText:function(f){return this.getBrowserAdapter().getText(f)},setText:function(f,g){this.getBrowserAdapter().setText(f,g)},isSpecifiedAttribute:function(f,g){this.getBrowserAdapter().isSpecifiedAttribute(f,g)},setAttribute:function(f,g,h){this.getBrowserAdapter().setAttribute(f,g,h)},getAttribute:function(f,g){return this.getBrowserAdapter().getAttribute(f,g)},getComputedAttribute:function(f,g){return this.getBrowserAdapter().getComputedAttribute(f,g)},hasAttribute:function(f,g){return this.getBrowserAdapter().hasAttribute(f,g)},getSpecifiedAttributes:function(f){return this.getBrowserAdapter().getSpecifiedAttributes(f)},setStyle:function(f,h,g){this.getBrowserAdapter().setStyle(f,h,g)},getStyle:function(f,g){return this.getBrowserAdapter().getStyle(f,g)},getComputedStyle:function(f,g){return this.getBrowserAdapter().getComputedStyle(f,g)},getSpecifiedStyles:function(f){return this.getBrowserAdapter().getSpecifiedStyles(f)},addClass:function(f,g){this.getBrowserAdapter().addClass(f,g)},removeClass:function(f,g){this.getBrowserAdapter().removeClass(f,g)},replaceClass:function(h,g,f){this.getBrowserAdapter().replaceClass(h,g,f)},toggleClass:function(f,g){this.getBrowserAdapter().toggleClass(f,g)},hasClass:function(f,g){return this.getBrowserAdapter().hasClass(f,g)},getClassList:function(f,g){return this.getBrowserAdapter().getClassList(f)},parentNode:function(f){return this.getBrowserAdapter().parentNode(f)},previousSibling:function(f){return this.getBrowserAdapter().previousSibling(f)},nextSibling:function(f){return this.getBrowserAdapter().nextSibling(f)},previousElement:function(f){return this.getBrowserAdapter().previousElement(f)},nextElement:function(f){return this.getBrowserAdapter().nextElement(f)},firstChild:function(f){return this.getBrowserAdapter().firstChild(f)},lastChild:function(f){return this.getBrowserAdapter().lastChild(f)},firstChildElement:function(f){return this.getBrowserAdapter().firstChildElement(f)},lastChildElement:function(f){return this.getBrowserAdapter().lastChildElement(f)},childNodes:function(f){return this.getBrowserAdapter().childNodes(f)},children:function(f){return this.getBrowserAdapter().children(f)},contains:function(f,g){return this.getBrowserAdapter().contains(f,g)},addListener:function(h,f,g){this.getBrowserAdapter().addListener(h,f,g)},removeListener:function(h,f,g){this.getBrowserAdapter().removeListener(h,f,g)},clearListeners:function(g,f){this.getBrowserAdapter().clearListeners(g,f)}}).$()});define("Indigox.Web.JsLib.DOM.Effect",["Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Core"],function(d,a,c){var e=c.el;var b=Namespace("Indigox.Web.JsLib.DOM").Class("Effect").Constructor(function(g,h,k,f,j){this.id=null;this.interval=25;this.duration=500;this.times=this.duration/this.interval;this.element=g;this.dumpProps=h;this.start=k;this.end=f;this.callback=j;this.snapshot=null;this.sign=1;this.step=null}).Static({DIRECTION_RTL:"rtl",DIRECTION_TTB:"ttb",slideOut:function(h,l){var j=e(h);var k=null;var g=null;if(l===b.DIRECTION_RTL){k="margin-left";g="-"+j.getComputedWidth()+"px"}else{k="margin-top";g="-"+j.getComputedHeight()+"px"}var m=[],n={},f={};m.push(k);n[k]=g;f[k]=j.getStyle(k)||"0px";return new b(j,m,n,f)},slideIn:function(h,l){var j=e(h);var k=null;var f=null;if(l===b.DIRECTION_RTL){k="margin-left";f="-"+j.getComputedWidth()+"px"}else{k="margin-top";f="-"+j.getComputedHeight()+"px"}var m=[],n={},g={};m.push(k);n[k]=j.getStyle(k)||"0px";g[k]=f;return new b(j,m,n,g)},fadeOut:function(g,k){var h=e(g);var j="opacity";var l=[],m={},f={};l.push(j);m[j]=0;f[j]=1;return new b(h,l,m,f)},fadeIn:function(g,k){var h=e(g);var j="opacity";var l=[],m={},f={};l.push(j);m[j]=1;f[j]=0;return new b(h,l,m,f)}}).Members({play:function(){this.dump();var h=this.createDelegate();var g=this.element;var l=null,f=null,j=null;this.step={};for(var k in this.end){l=this.start[k];if(isString(l)){l=d.parseFloat(l)}f=this.end[k];if(isString(f)){f=d.parseFloat(f)}j=l-f;this.step[k]=Math.abs(j)/this.times}if(j===0){this.sign=0}else{this.sign=-(j/Math.abs(j))}g.setStyle(this.start);g.setStyle({display:"block",visibility:"visible"});this.id=setInterval(function(){h.invoke()},this.interval)},createDelegate:function(){if(isNullOrUndefined(this.delegate)){this.delegate=new a(function(){this.times--;if(this.times){this.doAnimation()}else{clearInterval(this.id);this.restore();if(this.callback){this.callback.invoke()}}},this)}return this.delegate},dump:function(){var g=this.element;this.snapshot={};this.snapshot.display=g.getStyle("display");this.snapshot.visibility=g.getStyle("visibility");var j=this.dumpProps;var f=null,h=null;for(f=0,h=j.length;f<h;f++){this.snapshot[j[f]]=g.getStyle(j[f])}},restore:function(){this.element.setStyle(this.snapshot)},doAnimation:function(){var f=this.element;var h={};for(var j in this.step){var g=f.getStyle(j);if(isString(g)){g=d.parseFloat(g)}h[j]=g+this.sign*this.step[j]}f.setStyle(h)}}).$()});define("Indigox.Web.JsLib.DOM.Element",["Indigox.Web.JsLib.DOM.NodeType","Indigox.Web.JsLib.DOM.DOMAccessor","Indigox.Web.JsLib.DOM.EventManager","Indigox.Web.JsLib.DOM.Accessors.JQueryAccessor","Indigox.Web.JsLib.Core"],function(c,e,d){var a=/^\s*$/;var b=Namespace("Indigox.Web.JsLib.DOM").Class("Element").Constructor(function(f){this.accessor=e.getInstance();this.element=f;this.eventManager=null}).Static({el:function(f){return new b(f)},getViewportHeight:function(){return e.getInstance().getViewportHeight()},getViewportWidth:function(){return e.getInstance().getViewportWidth()},getScrollTop:function(){return e.getInstance().getScrollTop(document)},getScrollLeft:function(){return e.getInstance().getScrollLeft(document)},getDocumentHeight:function(){return e.getInstance().getOuterHeight(document.body)},getDocumentWidth:function(){return e.getInstance().getOuterWidth(document.body)}}).Members({getAccessor:function(){return this.accessor},getElement:function(){return this.element},isText:function(){return this.getElement()&&this.getNodeType()===c.TEXT_NODE},isEmptyText:function(){if(this.isText()){return a.test(this.getNodeValue())}else{return false}},isElement:function(){return this.getElement()&&this.getNodeType()===c.ELEMENT_NODE},getTop:function(){return this.getAccessor().getTop(this.getElement())},getLeft:function(){return this.getAccessor().getLeft(this.getElement())},getScrollTop:function(){return this.getAccessor().getScrollTop(this.getElement())},getScrollLeft:function(){return this.getAccessor().getScrollLeft(this.getElement())},getClientTop:function(){return this.getAccessor().getClientTop(this.getElement())},getClientLeft:function(){return this.getAccessor().getClientLeft(this.getElement())},getOuterHeight:function(){return this.getAccessor().getOuterHeight(this.getElement())},getOuterWidth:function(){return this.getAccessor().getOuterWidth(this.getElement())},getInnerHeight:function(){return this.getAccessor().getInnerHeight(this.getElement())},getInnerWidth:function(){return this.getAccessor().getInnerWidth(this.getElement())},getHeight:function(){return this.getAccessor().getHeight(this.getElement())},getWidth:function(){return this.getAccessor().getWidth(this.getElement())},getComputedHeight:function(){return this.getAccessor().getHeight(this.getElement())},getComputedWidth:function(){return this.getAccessor().getWidth(this.getElement())},setTop:function(f){this.getAccessor().setTop(this.getElement(),f)},setLeft:function(f){this.getAccessor().setLeft(this.getElement(),f)},setScrollTop:function(f){this.getAccessor().setScrollTop(this.getElement(),f)},setScrollLeft:function(f){this.getAccessor().setScrollLeft(this.getElement(),f)},setWidth:function(f){this.getAccessor().setWidth(this.getElement(),f)},setHeight:function(f){this.getAccessor().setHeight(this.getElement(),f)},getText:function(){return this.getAccessor().getText(this.getElement())},setText:function(f){this.getAccessor().setText(this.getElement(),f)},center:function(){var g=Math.floor(b.getScrollTop()+(b.getViewportHeight()-this.getOuterHeight())/2);g=g<0?0:g;var f=Math.floor(b.getScrollLeft()+(b.getViewportWidth()-this.getOuterWidth())/2);f=f<0?0:f;this.setTop(g);this.setLeft(f)},top:function(){this.setTop(0)},getNodeType:function(){return this.getElement().nodeType},getNodeValue:function(){return this.getElement().nodeValue},setAttribute:function(g,h){var f=[this.getElement()];f.push.apply(f,arguments);this.getAccessor().setAttribute.apply(this.getAccessor(),f)},getAttribute:function(f){return this.getAccessor().getAttribute(this.getElement(),f)},getComputedAttribute:function(f){return this.getAccessor().getComputedAttribute(this.getElement(),f)},hasAttribute:function(f){return this.getAccessor().hasAttribute(this.getElement(),f)},getSpecifiedAttributes:function(){return this.getAccessor().getSpecifiedAttributes(this.getElement())},setStyle:function(h,g){var f=[this.getElement()];f.push.apply(f,arguments);this.getAccessor().setStyle.apply(this.getAccessor(),f)},getStyle:function(f){return this.getAccessor().getStyle(this.getElement(),f)},getComputedStyle:function(f){return this.getAccessor().getComputedStyle(this.getElement(),f)},getSpecifiedStyles:function(){return this.getAccessor().getSpecifiedStyles(this.getElement())},addClass:function(f){this.getAccessor().addClass(this.getElement(),f)},removeClass:function(f){this.getAccessor().removeClass(this.getElement(),f)},replaceClass:function(g,f){return this.getAccessor().replaceClass(this.getElement(),g,f)},toggleClass:function(f){return this.getAccessor().toggleClass(this.getElement(),f)},hasClass:function(f){return this.getAccessor().hasClass(this.getElement(),f)},getClassList:function(){return this.getAccessor().getClassList(this.getElement())},parentNode:function(){return this.getAccessor().parentNode(this.getElement())},previousSibling:function(){return this.getAccessor().previousSibling(this.getElement())},nextSibling:function(){return this.getAccessor().nextSibling(this.getElement())},previousElement:function(){return this.getAccessor().previousElement(this.getElement())},nextElement:function(){return this.getAccessor().nextElement(this.getElement())},firstChild:function(){return this.getAccessor().firstChild(this.getElement())},lastChild:function(){return this.getAccessor().lastChild(this.getElement())},firstChildElement:function(){return this.getAccessor().firstChildElement(this.getElement())},lastChildElement:function(){return this.getAccessor().lastChildElement(this.getElement())},childNodes:function(){return this.getAccessor().childNodes(this.getElement())},children:function(){return this.getAccessor().children(this.getElement())},contains:function(f){return this.getAccessor().contains(this.getElement(),f)},getEventManager:function(){if(isNullOrUndefined(this.eventManager)){this.eventManager=d.getInstance(this.element)}if(isNullOrUndefined(this.eventManager)){this.eventManager=new d(this.accessor,this.element);d.register(this.eventManager)}return this.eventManager},addListener:function(j,h,g,f){return this.getEventManager().addListener(j,h,g,f)},removeListener:function(g,f){return this.getEventManager().removeListener(g,f)},clearListeners:function(g){var f=this.getEventManager();return f.clearListeners.apply(f,arguments)}}).$();window.$El=b.el});define("Indigox.Web.JsLib.DOM.EventAdapter",["Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Core"],function(b){var a=Namespace("Indigox.Web.JsLib.DOM").Class("EventAdapter").Constructor(function(){this.delegate=null;this.callbacks=[]}).Members({getDelegate:function(){return this.delegate},addListener:function(e,d,c){var f=new b(e,d,c);this.callbacks.push(f)},removeListener:function(d){var f=this.callbacks;var c=null,e=null;for(c=f.length-1;c>=0;c--){if(f[c].getHandler()===d){f.splice(c,1)}}},hasListener:function(d){var f=this.callbacks;var c=null,e=null;for(c=0,e=f.length;c<e;c++){if(f[c].getHandler()===d){return true}}return false},createDelegate:function(){if(isNullOrUndefined(this.delegate)){var c=this.callbacks;this.delegate=function(h){var g=h.target;for(var d=0,f=c.length;d<f;d++){c[d].invoke(g,h)}}}return this.delegate}}).$()});define("Indigox.Web.JsLib.DOM.EventManager",["Indigox.Web.JsLib.DOM.EventAdapter","Indigox.Web.JsLib.Core"],function(a){var c=[];var b=Namespace("Indigox.Web.JsLib.DOM").Class("EventManager").Constructor(function(d,e){this.accessor=d;this.element=e;this.adapters={}}).Static({getInstance:function(e){var d=null;for(d=c.length-1;d>=0;d--){if(c[d].element===e){return c[d]}}},register:function(d){var e=null;for(e=c.length-1;e>=0;e--){if(c[e]===d){return}}c.push(d)},unregister:function(d){var e=null;for(e=c.length-1;e>=0;e--){if(c[e]===d){c.splice(e,1)}}}}).Members({addListener:function(h,g,f,e){var d=null;if(!(h in this.adapters)){d=new a();this.accessor.addListener(this.element,h,d.createDelegate());this.adapters[h]=d}else{d=this.adapters[h]}d.addListener(g,f,e)},removeListener:function(f,e){var d=null;if(f in this.adapters){d=this.adapters[f]}else{return}if(d.hasListener(e)){d.removeListener(e)}},clearListeners:function(d){if(d){this.accessor.clearListeners(this.element,d);delete this.adapters[d]}else{this.accessor.clearListeners(this.element);this.adapters={}}},hasListener:function(f,e){if(f in this.adapters){var d=this.adapters[f];if(d.hasListener(e)){return true}else{return false}}else{return false}}}).$()});define("Indigox.Web.JsLib.DOM.NodeFilter",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.DOM").Class("NodeFilter").Static({FILTER_ACCEPT:1,FILTER_REJECT:2,FILTER_SKIP:3,SHOW_ALL:4294967295,SHOW_ELEMENT:1,SHOW_ATTRIBUTE:2,SHOW_TEXT:4,SHOW_CDATA_SECTION:8,SHOW_ENTITY_REFERENCE:16,SHOW_ENTITY:32,SHOW_PROCESSING_INSTRUCTION:64,SHOW_COMMENT:128,SHOW_DOCUMENT:256,SHOW_DOCUMENT_TYPE:512,SHOW_DOCUMENT_FRAGMENT:1024,SHOW_NOTATION:2048,SHOW_PLACEHOLDER:4096}).$()});define("Indigox.Web.JsLib.DOM.NodeType",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.DOM").Class("NodeType").Static({ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,PLACEHOLDER_NODE:13}).$()});define("Indigox.Web.JsLib.DOM.TreeWalker",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.DOM.NodeType","Indigox.Web.JsLib.DOM.NodeFilter","Indigox.Web.JsLib.Core"],function(c,a,d){var b=Namespace("Indigox.Web.JsLib.DOM").Class("TreeWalker").Constructor(function(e,h,f,g){this.rootNode=e;this.currentNode=e;this.whatToShow=h;this.filter=f?f:{acceptNode:function(j){return d.FILTER_ACCEPT}};this.entityReferenceExpansion=g}).Members({getCurrentNode:function(){return this.currentNode},setCurrentNode:function(e){if(!e){throw new Error("the current node of tree walker can not be set to null!")}this.currentNode=e},parentNode:function(){if(this.currentNode==null){return null}var e=this.getParentNode(this.currentNode);if(e!=null){this.currentNode=e}return e},firstChild:function(){if(this.currentNode==null){return null}var e=this.getFirstChild(this.currentNode);if(e!=null){this.currentNode=e}return e},lastChild:function(){if(this.currentNode==null){return null}var e=this.getLastChild(this.currentNode);if(e!=null){this.currentNode=e}return e},previousSibling:function(){if(this.currentNode==null){return null}var e=this.getPreviousSibling(this.currentNode);if(e!=null){this.currentNode=e}return e},nextSibling:function(){if(this.currentNode==null){return null}var e=this.getNextSibling(this.currentNode);if(e!=null){this.currentNode=e}return e},previousNode:function(){var e;if(this.currentNode==null){return null}e=this.getPreviousSibling(this.currentNode);if(e==null){e=this.getParentNode(this.currentNode);if(e!=null){this.currentNode=e;return this.currentNode}return null}var g=this.getLastChild(e);var f=g;while(g!=null){f=g;g=this.getLastChild(f)}g=f;if(g!=null){this.currentNode=g;return this.currentNode}if(e!=null){this.currentNode=e;return this.currentNode}return null},nextNode:function(){if(this.currentNode==null){return null}var e=this.getFirstChild(this.currentNode);if(e!=null){this.currentNode=e;return e}e=this.getNextSibling(this.currentNode);if(e!=null){this.currentNode=e;return e}var f=this.getParentNode(this.currentNode);while(f!=null){e=this.getNextSibling(f);if(e!=null){this.currentNode=e;return e}else{f=this.getParentNode(f)}}return null},getParentNode:function(g){if(g==null||g==this.rootNode){return null}var f=g.parentNode;if(f==null){return null}var e=this.acceptNode(f);if(e==d.FILTER_ACCEPT){return f}else{return this.getParentNode(f)}},getNextSibling:function(h,e){if(!e){e=this.rootNode}if(h==null||h==e){return null}var g=h.nextSibling;if(g==null){g=h.parentNode;if(g==null||g==e){return null}var j=this.acceptNode(g);if(j==d.FILTER_SKIP){return this.getNextSibling(g,e)}return null}var f=this.acceptNode(g);if(f==d.FILTER_ACCEPT){return g}else{if(f==d.FILTER_SKIP){var k=this.getFirstChild(g);if(k==null){return this.getNextSibling(g,e)}return k}else{return this.getNextSibling(g,e)}}},getPreviousSibling:function(h,e){if(!e){e=this.rootNode}if(h==null||h==e){return null}var g=h.previousSibling;if(g==null){g=h.parentNode;if(g==null||g==e){return null}var j=this.acceptNode(g);if(j==d.FILTER_SKIP){return this.getPreviousSibling(g,e)}return null}var f=this.acceptNode(g);if(f==d.FILTER_ACCEPT){return g}else{if(f==d.FILTER_SKIP){var k=this.getLastChild(g);if(k==null){return this.getPreviousSibling(g,e)}return k}else{return this.getPreviousSibling(g,e)}}},getFirstChild:function(g){if(g==null){return null}if(!this.entityReferenceExpansion&&g.nodeType==a.ENTITY_REFERENCE_NODE){return null}var f=g.firstChild;if(f==null){return null}var e=this.acceptNode(f);if(e==d.FILTER_ACCEPT){return f}else{if(e==d.FILTER_SKIP&&f.hasChildNodes()){var h=this.getFirstChild(f);if(h==null){return this.getNextSibling(f,g)}return h}else{return this.getNextSibling(f,g)}}},getLastChild:function(g){if(g==null){return null}if(!this.entityReferenceExpansion&&g.nodeType==a.ENTITY_REFERENCE_NODE){return null}var f=g.lastChild;if(f==null){return null}var e=this.acceptNode(f);if(e==d.FILTER_ACCEPT){return f}else{if(e==d.FILTER_SKIP&&f.hasChildNodes()){var h=this.getLastChild(f);if(h==null){return this.getPreviousSibling(f,g)}return h}else{return this.getPreviousSibling(f,g)}}},acceptNode:function(e){if(this.filter==null){if((this.whatToShow&(1<<e.nodeType-1))!==0){return d.FILTER_ACCEPT}else{return d.FILTER_SKIP}}else{if((this.whatToShow&(1<<e.nodeType-1))!==0){return this.filter.acceptNode(e)}else{return d.FILTER_SKIP}}}}).$()});define("Indigox.Web.JsLib.Expression.Nodes.BooleanLiteralNode",["Indigox.Web.JsLib.Expression.ASTNode","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Expression.Nodes").Class("BooleanLiteralNode").Extend(b).Constructor(function(d){this.literal=d}).Members({getLiteral:function(){return this.literal},accept:function(d,e){return d.visitBooleanLiteral(this,e)}}).$()});define("Indigox.Web.JsLib.Expression.Nodes.IdentifierNode",["Indigox.Web.JsLib.Expression.ASTNode","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Expression.Nodes").Class("IdentifierNode").Extend(c).Constructor(function(e,d){this.identifier=e;this.reference=d}).Members({getIdentifier:function(){return this.identifier},getReference:function(){return this.reference},accept:function(d,e){return d.visitIdentifier(this,e)}}).$()});define("Indigox.Web.JsLib.Expression.Nodes.MethodNode",["Indigox.Web.JsLib.Expression.ASTNode","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Expression.Nodes").Class("MethodNode").Extend(c).Constructor(function(d,e){c.constructor.call(this,e);this.reference=d}).Members({getReference:function(){return this.reference},accept:function(d,e){return d.visitMethod(this,e)}}).$()});define("Indigox.Web.JsLib.Expression.Nodes.NotNode",["Indigox.Web.JsLib.Expression.ASTNode","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Expression.Nodes").Class("NotNode").Extend(c).Constructor(function(d){this.reference=d}).Members({getReference:function(){return this.reference},accept:function(d,e){return d.visitNot(this,e)}}).$()});define("Indigox.Web.JsLib.Expression.Nodes.NullLiteralNode",["Indigox.Web.JsLib.Expression.ASTNode","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Expression.Nodes").Class("NullLiteralNode").Extend(b).Constructor(function(d){this.literal=d}).Members({getLiteral:function(){return this.literal},accept:function(d,e){return d.visitNullLiteral(this,e)}}).$()});define("Indigox.Web.JsLib.Expression.Nodes.NumberLiteralNode",["Indigox.Web.JsLib.Expression.ASTNode","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Expression.Nodes").Class("NumberLiteralNode").Extend(c).Constructor(function(d){this.literal=d}).Members({getLiteral:function(){return this.literal},accept:function(d,e){return d.visitNumberLiteral(this,e)}}).$()});define("Indigox.Web.JsLib.Expression.Nodes.StringLiteralNode",["Indigox.Web.JsLib.Expression.ASTNode","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Expression.Nodes").Class("StringLiteralNode").Extend(c).Constructor(function(d){this.literal=d}).Members({getLiteral:function(){return this.literal},accept:function(d,e){return d.visitStringLiteral(this,e)}}).$()});define("Indigox.Web.JsLib.Expression.ASTNode",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(a){var b=Namespace("Indigox.Web.JsLib.Expression").Class("ASTNode").Constructor(function(e){this.parentNode=null;this.childNodes=new a();if(e){var d=e.length;for(var c=0;c<d;c++){this.addChild(e[c])}}}).Members({getParentNode:function(){return this.parentNode},addChild:function(c){if(isNullOrUndefined(c)){throw new Error("argument 'node' is null.")}var d=this.childNodes;if(!d.contains(c)){d.add(c)}c.parentNode=this},removeChild:function(c){if(isNullOrUndefined(c)){throw new Error("argument 'node' is null.")}if(c.parentNode!==this){throw new Error("childNodes does not contains node")}c.parentNode=null;var d=this.childNodes;if(d.contains(c)){d.remove(c)}},getChildNodes:function(){return this.childNodes.toArray()},hasChildNodes:function(){return this.childNodes.size()>0},accept:function(c,d){}}).$()});define("Indigox.Web.JsLib.Expression.Expression",["Indigox.Web.JsLib.Expression.Parser","Indigox.Web.JsLib.Expression.Interpreter","Indigox.Web.JsLib.Core"],function(c,a){var b=Namespace("Indigox.Web.JsLib.Expression").Class("Expression").Constructor(function(d){this.exprssion=d;var e=new c(this.exprssion);this.node=e.parse()}).Members({evaluate:function(f){var g=this.node;var d=new a(f);var e=d.interpret(g);return e}}).$()});define("Indigox.Web.JsLib.Expression.ExpressionEvaluator",["Indigox.Web.JsLib.Invokers.FieldSetterInvoker","Indigox.Web.JsLib.Invokers.FieldGetterInvoker","Indigox.Web.JsLib.Invokers.MethodInvoker","Indigox.Web.JsLib.Invokers.PropertySetterInvoker","Indigox.Web.JsLib.Invokers.PropertyGetterInvoker","Indigox.Web.JsLib.Expression.Parser","Indigox.Web.JsLib.Expression.Interpreter","Indigox.Web.JsLib.Expression.Expression","Indigox.Web.JsLib.Core"],function(j,c,d,g,a,e,b,f){var h=Namespace("Indigox.Web.JsLib.Expression").Class("ExpressionEvaluator").Constructor(function(k){this.notation=k}).Members({evaluate:function(k){if(this.isLiteral()){return this.notation}else{if(this.isProperty()){return this.getProperty(k)}else{var l=this.parseExpression(this.notation);return l.evaluate(k)}}},parseExpression:function(){var k=this.notation.replace(/^\$\{(.+)\}$/,"$1");return new f(k)},setProperty:function(m,n){var l=this.notation.replace(/^\$\{(.+)\}$/,"$1");var o=new g(l);if(!o.hasMember(m)){o=new j(l)}var k=o.invoke(m,[n]);return k},getProperty:function(n){var m=this.notation.replace(/^\$\{(.+)\}$/,"$1");var l=new a(m);if(!l.hasMember(n)){l=new c(m)}var k=l.invoke(n);return k},invoke:function(l,k){},isLiteral:function(){return !this.isExpression()},isProperty:function(){return(/^\$\{[\$_a-zA-z][\$|_|\w]*\}$/).test(this.notation)},isMethod:function(){return(/^\$\{[\$_a-zA-z][\$|_|\w]*\(\s*\)\s*\}$/).test(this.notation)},isExpression:function(){return(/^\$\{.+\}$/).test(this.notation)}}).$()});define("Indigox.Web.JsLib.Expression.Interpreter",["Indigox.Web.JsLib.Invokers.FieldSetterInvoker","Indigox.Web.JsLib.Invokers.FieldGetterInvoker","Indigox.Web.JsLib.Invokers.MethodInvoker","Indigox.Web.JsLib.Invokers.PropertySetterInvoker","Indigox.Web.JsLib.Invokers.PropertyGetterInvoker","Indigox.Web.JsLib.Core"],function(b,f,d,e,c){var a=Namespace("Indigox.Web.JsLib.Expression").Class("Interpreter").Constructor(function(g){this.context=g}).Members({interpret:function(g){return g.accept(this,null)},visitBooleanLiteral:function(g,h){return g.getLiteral()},visitIdentifier:function(l,m){var k=this.context,n=null,h=null,j=l.getReference();if(j){n=j.accept(this,null)}else{n=k}var g=new c(l.getIdentifier());if(!g.hasMember(n)){g=new f(l.getIdentifier())}h=g.invoke(n);return h},visitMethod:function(k,o){var h=this.context,n=null,q=[],t=null,l=null,g=k.getReference(),p=g.getReference(),s=k.getChildNodes();if(p){n=p.accept(this,null)}else{n=h}var m=null,j=null;for(m=0,j=s.length;m<j;m++){q.push(s[m].accept(this,null))}var r=new d(g.getIdentifier());t=r.invoke(n,q);return t},visitNot:function(h,j){var k=h.getReference();var g=k.accept(this,null);return !g},visitNullLiteral:function(g,h){return g.getLiteral()},visitNumberLiteral:function(g,h){return g.getLiteral()},visitStringLiteral:function(g,h){return g.getLiteral()}}).$()});define("Indigox.Web.JsLib.Expression.MixinExpressionEvaluator",["Indigox.Web.JsLib.Expression.ExpressionEvaluator","Indigox.Web.JsLib.Core"],function(a){var b=Namespace("Indigox.Web.JsLib.Expression").Class("MixinExpressionEvaluator").Constructor(function(c){this.notation=c}).Members({evaluate:function(c){var d=/\$\{[^\}]+\}/g;return this.notation.replace(d,function(e){var f=new a(e);return f.evaluate(c)})}}).$()});define("Indigox.Web.JsLib.Expression.Parser",["Indigox.Web.JsLib.Expression.Nodes.BooleanLiteralNode","Indigox.Web.JsLib.Expression.Nodes.IdentifierNode","Indigox.Web.JsLib.Expression.Nodes.MethodNode","Indigox.Web.JsLib.Expression.Nodes.NotNode","Indigox.Web.JsLib.Expression.Nodes.NullLiteralNode","Indigox.Web.JsLib.Expression.Nodes.NumberLiteralNode","Indigox.Web.JsLib.Expression.Nodes.StringLiteralNode","Indigox.Web.JsLib.Expression.Tokenizer","Indigox.Web.JsLib.Core"],function(a,h,j,g,d,e,b,f){var c=Namespace("Indigox.Web.JsLib.Expression").Class("Parser").Constructor(function(k){this.tokenizer=new f(k);this.token=null}).Members({parse:function(){this.next();return this.expression()},next:function(){this.token=this.tokenizer.getNextToken()},expect:function(k){if(this.token.value===k){return this.next()}else{throw new Error('Unexpected token "'+this.token.value+'", expected "'+k+'"')}},unexpect:function(){throw new Error("Unexpected token "+this.token.type+' ( "'+this.token.value+'" )')},expression:function(){if(this.token.type==="IDENTIFIER"){var l=this.identifier();return this.reference(l)}else{if(this.token.type==="NUMBER"){var n=this.numberLiteral();return this.reference(n)}else{if(this.token.type==="BOOLEAN"){var k=this.booleanLiteral();return this.reference(k)}else{if(this.token.type==="NULL"){var m=this.nullLiteral();return this.reference(m)}else{if(this.token.type==="STRING"){var o=this.stringLiteral();return this.reference(o)}else{this.unexpect()}}}}}},reference:function(m){if(this.token.type==="PUNCTUATOR"){switch(this.token.value){case".":this.next();var l=this.identifier(m);return this.reference(l);case"[":this.next();var k=this.expression();this.expect("]");return this.reference(k);case"(":this.next();var n=this.method(m);this.expect(")");return this.reference(n)}}return m},identifier:function(k){var l=this.token.value;this.next();return new h(l,k)},method:function(k){var m=[];var l=true;while(this.token.value!==")"){if(l){l=false}else{this.expect(",")}m.push(this.expression())}return new j(k,m)},stringLiteral:function(){var k=this.token.value;this.next();return new b(k)},numberLiteral:function(){var k=Number(this.token.value);this.next();return new e(k)},booleanLiteral:function(){var k=Boolean(this.token.value);this.next();return new a(k)},nullLiteral:function(){this.next();return new d(null)}}).$()});define("Indigox.Web.JsLib.Expression.Tokenizer",["Indigox.Web.JsLib.Core"],function(){var a={"break":true,"case":true,"catch":true,"class":true,"continue":true,"const":true,"debugger":true,"default":true,"delete":true,"do":true,"else":true,"enum":true,"export":true,"extends":true,"finally":true,"for":true,"function":true,"if":true,"in":true,"implements":true,"import":true,"instanceof":true,"interface":true,let:true,"new":true,"package":true,"private":true,"protected":true,"public":true,"return":true,"static":true,"super":true,"switch":true,"this":true,"throw":true,"try":true,"typeof":true,"var":true,"void":true,"while":true,"with":true,yield:true};var f={"true":true,"false":true};var e={"null":true};var d={"{":true,"}":true,"(":true,")":true,"[":true,"]":true,".":true,";":true,",":true,"<":true,">":true,"+":true,"-":true,"*":true,"%":true,"&":true,"|":true,"^":true,"!":true,"~":true,"?":true,":":true,"=":true,"<=":true,">=":true,"==":true,"!=":true,"===":true,"!==":true,"++":true,"--":true,"<<":true,">>":true,">>>":true,"&&":true,"||":true,"+=":true,"-=":true,"*=":true,"%=":true,"<<=":true,">>=":true,">>>=":true,"&=":true,"|=":true,"^=":true};var b={'"':true,"'":false};var c=Namespace("Indigox.Web.JsLib.Expression").Class("Tokenizer").Constructor(function(g){this.text=g;this.position=0;this.ch=this.text.charAt(this.position);this.tokenStart=-1;this.expecting=false}).Members({peek:function(){return this.ch},next:function(){var g=this.text.charAt(this.position++);this.ch=this.text.charAt(this.position);if(this.expecting&&!g){throw new Error("Unterminated syntax.")}return g},expect:function(){this.expecting=true},signal:function(){this.expecting=false},eof:function(){return !this.peek()},readWords:function(){var h="",g;while(!this.eof()&&(g=this.peek())!=null){if(this.isIdentifierChar(g)){h+=this.next()}else{break}}return this.isKeyword(h)?this.createToken("KEYWORD",h):this.isBoolean(h)?this.createToken("BOOLEAN",h):this.isNull(h)?this.createToken("NULL",h):this.createToken("IDENTIFIER",h)},readPunctuator:function(){var g="",h;while(!this.eof()&&(h=this.peek())!=null){if(this.isPunctuator(g+h)){g+=this.next()}else{break}}return this.createToken("PUNCTUATOR",g)},readNumber:function(){var k="",h;var g=false;while(!this.eof()&&(h=this.peek())!=null){if(this.isDigit(h)){k+=this.next()}else{if(!g&&this.isDot(h)){k+=this.next();g=true}else{break}}}var j=Number(k);if(!isNaN(j)){return this.createToken("NUMBER",j)}else{throw new Error("Invalid syntax: "+k)}},readString:function(){this.expect();var j="",g=this.next(),h;while((h=this.next())!=null){if(this.isBackslash(h)){h=this.readEscapedChar()}else{if(h===g){break}}j+=h}this.signal();return this.createToken("STRING",j)},readEscapedChar:function(){var g=this.next();switch(g){case"n":return"\n";case"r":return"\r";case"t":return"\t";case"b":return"\b";case"v":return"\u000b";case"f":return"\f";case"0":return"\0";case"x":return String.fromCharCode(this.readHexBytes(2));case"u":return String.fromCharCode(this.readHexBytes(4));case"\n":return"";default:return g}},readHexBytes:function(j){var g=0;for(;j>0;--j){var h=parseInt(this.next(),16);if(isNaN(h)){throw new Error("Invalid hex-character pattern in string")}g=(g<<4)|h}return g},skipWhitespace:function(){while(/\s/.test(this.peek())){this.next()}},isIdentifierStart:function(g){return(/[\$_a-zA-z]/).test(g)},isIdentifierChar:function(g){return(/\$|_|\w/).test(g)},isKeyword:function(g){return g in a},isBoolean:function(g){return g in f},isNull:function(g){return g in e},isPunctuator:function(g){return g in d},isDigit:function(g){g=g.charCodeAt(0);return g>=48&&g<=57},isDot:function(g){return g==="."},isQuote:function(g){return g in b},isBackslash:function(g){return g==="\\"},startToken:function(){this.tokenStart=this.position},createToken:function(g,h){return{position:this.tokenStart,type:g,value:h}},getNextToken:function(){this.skipWhitespace();var g=this.peek();this.startToken();if(!g){return this.createToken("EOF",null)}if(this.isIdentifierStart(g)){return this.readWords()}if(this.isPunctuator(g)){return this.readPunctuator()}if(this.isDigit(g)){return this.readNumber()}if(this.isQuote(g)){return this.readString()}throw new Error("Unexpected character '"+g+"'")}}).$()});define("Indigox.Web.JsLib.Formatters.ArrayFormatter",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Formatters.Formatter","Indigox.Web.JsLib.Core"],function(d,b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Formatters").Class("ArrayFormatter").Extend(c).Constructor(function(e){c.constructor.apply(this,arguments);e=d.copyExist({seperator:",",empty:""},e);this.configure(e)}).Members({getText:function(e){if(e){return e.join(this.seperator)}else{return this.empty}},getSeperator:function(){return this.seperator},setSeperator:function(e){this.seperator=e},getEmpty:function(){return this.empty},setEmpty:function(e){this.empty=e}}).$()});define("Indigox.Web.JsLib.Formatters.DateTimeFormatter",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Formatters.Formatter","Indigox.Web.JsLib.Core"],function(e,b){var d=b.prototype;var a=/^(?:(\d{4})[-\/](\d{1,2})[-\/](\d{1,2}))?(?:[ ](?:(\d{1,2}):(\d{1,2}):(\d{1,2}))(\.\d{0,3})?)?$/;var c=Namespace("Indigox.Web.JsLib.Formatters").Class("DateTimeFormatter").Extend(d).Constructor(function(f){d.constructor.apply(this,arguments);f=e.copyExist({format:"yyyy-MM-dd"},f);this.configure(f)}).Members({getText:function(g){var f=this.convertDateFromString(g);if(f){return this.convertDateToString(f,this.format)}else{return""}},getFormat:function(){return this.format},setFormat:function(f){this.format=f},convertDateFromString:function(g){if(isNullOrUndefined(g)||g.length===0){return null}if(g instanceof Date){return g}var f=a.exec(g);var h=new Date();if(f[1]){h.setFullYear(parseInt(f[1],10))}if(f[2]){h.setMonth(parseInt(f[2],10)-1)}if(f[3]){h.setDate(parseInt(f[3],10))}if(f[4]){h.setHours(parseInt(f[4],10))}if(f[5]){h.setMinutes(parseInt(f[5],10))}if(f[6]){h.setSeconds(parseInt(f[6],10))}return h},convertDateToString:function(f,g){return g.replace("yyyy",f.getFullYear().toString()).replace("yy",f.getFullYear().toString().substring(2,4)).replace("MM",this.padLeft((f.getMonth()+1).toString(),"00")).replace("dd",this.padLeft(f.getDate().toString(),"00")).replace("HH",this.padLeft(f.getHours().toString(),"00")).replace("mm",this.padLeft(f.getMinutes().toString(),"00")).replace("ss",this.padLeft(f.getSeconds().toString(),"00")).replace("M",(f.getMonth()+1).toString()).replace("d",f.getDate().toString()).replace("H",f.getHours().toString()).replace("m",f.getMinutes().toString()).replace("s",f.getSeconds().toString())},padLeft:function(g,f){if(g.length<f.length){return f.substring(0,f.length-g.length)+g}return g}}).$()});define("Indigox.Web.JsLib.Formatters.FlagsFormatter",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Formatters.Formatter","Indigox.Web.JsLib.Core"],function(d,a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Formatters").Class("FlagsFormatter").Extend(c).Constructor(function(e){c.constructor.apply(this,arguments);e=d.copyExist({mapping:{}},e);this.configure(e)}).Members({getText:function(g){var h=[];for(var e=0,f=this.mapping.length;e<f;e++){if((this.mapping[this.valueField]&g)===g){h.push(this.mapping[this.textField])}}return h.join(",")},setMapping:function(e){this.mapping=e},getMapping:function(){return this.mapping}}).$()});define("Indigox.Web.JsLib.Formatters.Formatter",["Indigox.Web.JsLib.Utils.Configurable","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Formatters").Class("Formatter").Extend(c).Constructor(function(d){c.constructor.apply(this,arguments)}).Members({getText:function(d){return d}}).$()});define("Indigox.Web.JsLib.Formatters.NumberFormatter",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Utils.EncodeUtil","Indigox.Web.JsLib.Formatters.Formatter","Indigox.Web.JsLib.Core"],function(f,a,d,c){var e=c.prototype;var b=Namespace("Indigox.Web.JsLib.Formatters").Class("NumberFormatter").Extend(e).Constructor(function(g){e.constructor.apply(this,arguments);g=f.copyExist({separator:","},g);this.configure(g)}).Members({getText:function(k){var m=this.getSeparator();var h=/(\d{1,3})(?=(\d{3})+(?:$|\D))/g;var g=(""+k).split(".");var l=g[0];var j=l.replace(h,"$1"+m);if(g.length>1){j+="."+g[1]}return j},getSeparator:function(){return this.separator},setSeparator:function(g){return this.separator=g}}).$()});define("Indigox.Web.JsLib.Formatters",["Indigox.Web.JsLib.Formatters.ArrayFormatter","Indigox.Web.JsLib.Formatters.DateTimeFormatter","Indigox.Web.JsLib.Formatters.FlagsFormatter","Indigox.Web.JsLib.Formatters.Formatter","Indigox.Web.JsLib.Formatters.StringFormatter","Indigox.Web.JsLib.Formatters.UserNameFormatter","Indigox.Web.JsLib.Formatters.ValueTextFormatter","Indigox.Web.JsLib.Formatters.NumberFormatter"],function(e,h,f,d,c,a,g,b){return{ArrayFormatter:e,DateTimeFormatter:h,FlagsFormatter:f,Formatter:d,StringFormatter:c,UserNameFormatter:a,ValueTextFormatter:g,NumberFormatter:b}});define("Indigox.Web.JsLib.Formatters.StringFormatter",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Utils.EncodeUtil","Indigox.Web.JsLib.Formatters.Formatter","Indigox.Web.JsLib.Core"],function(f,a,d,c){var e=c.prototype;var b=Namespace("Indigox.Web.JsLib.Formatters").Class("StringFormatter").Extend(e).Constructor(function(g){e.constructor.apply(this,arguments);g=f.copyExist({maxLength:-1,clearHTML:false,ellipsis:"..."},g);this.configure(g)}).Members({getText:function(g){if(a.isNullOrEmpty(g)){return g}if(this.getClearHTML()){g=d.clearHTML(g)}if(this.maxLength>=0&&g.length>this.maxLength){return[g.substring(0,this.maxLength),this.ellipsis].join("")}return g},getMaxLength:function(){return this.maxLength},setMaxLength:function(g){this.maxLength=g},getClearHTML:function(){return this.clearHTML},setClearHTML:function(g){this.clearHTML=g},getEllipsis:function(){return this.ellipsis},setEllipsis:function(g){this.ellipsis=g},clearHTML:function(g){return g}}).$()});define("Indigox.Web.JsLib.Formatters.UserNameFormatter",["Indigox.Web.JsLib.Formatters.StringFormatter","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Core"],function(b,d){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Formatters").Class("UserNameFormatter").Extend(c).Constructor(function(e){c.constructor.apply(this,arguments)}).Members({getText:function(f){if(!f||!f[0]){return f}var e=f[0];return c.getText.call(this,e.Name)}}).$()});define("Indigox.Web.JsLib.Formatters.ValueTextFormatter",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Formatters.Formatter","Indigox.Web.JsLib.Core"],function(d,a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Formatters").Class("ValueTextFormatter").Extend(c).Constructor(function(e){c.constructor.apply(this,arguments);e=d.copyExist({mapping:[],valueField:"value",textField:"text"},e);this.configure(e)}).Members({getText:function(g){for(var e=0,f=this.mapping.length;e<f;e++){if(this.mapping[e][this.valueField]===g){return this.mapping[e][this.textField]}}return null},getMapping:function(){return this.mapping},setMapping:function(e){if(!(e instanceof Array)){this.mapping=this.convertObjectToMapping(e)}else{this.mapping=e}},getValueField:function(){return this.valueField},setValueField:function(e){this.valueField=e},getTextField:function(){return this.textField},setTextField:function(e){this.textField=e},convertObjectToMapping:function(h){var e=[];for(var g in h){if(h.hasOwnProperty(g)){var f={};f[this.valueField]=g;f[this.textField]=h[g];e.push(f)}}return e}}).$()});define("Indigox.Web.JsLib.Invokers.FieldGetterInvoker",["Indigox.Web.JsLib.Invokers.MemberInvoker","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Invokers").Class("FieldGetterInvoker").Extend(b).Constructor(function(d){b.constructor.apply(this,arguments)}).Members({getMember:function(){return this.member},hasMember:function(d){var e=this.getMember();return e in d},invoke:function(e,d){return e[this.getMember()]},tryInvoke:function(e,d){if(this.hasMember(e)){return this.invoke(e,d)}else{return null}}}).$()});define("Indigox.Web.JsLib.Invokers.FieldSetterInvoker",["Indigox.Web.JsLib.Invokers.MemberInvoker","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Invokers").Class("FieldSetterInvoker").Extend(c).Constructor(function(d){c.constructor.apply(this,arguments)}).Members({getMember:function(){return this.member},hasMember:function(d){var e=this.getMember();return e in d},invoke:function(e,d){if(isNullOrUndefined(d)){return e[this.getMember()]=null}else{return e[this.getMember()]=d[0]}},tryInvoke:function(e,d){if(this.hasMember(e)){return this.invoke(e,d)}else{return null}}}).$()});define("Indigox.Web.JsLib.Invokers.MemberInvoker",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.Invokers").Class("MemberInvoker").Constructor(function(b){this.member=b}).Members({getMember:function(){return this.member},invoke:function(c,b){},tryInvoke:function(c,b){}}).$()});define("Indigox.Web.JsLib.Invokers.MethodInvoker",["Indigox.Web.JsLib.Invokers.MemberInvoker","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Invokers").Class("MethodInvoker").Extend(c).Constructor(function(d){c.constructor.apply(this,arguments)}).Members({getMember:function(){return this.member},hasMember:function(d){var e=this.getMember();return e in d},invoke:function(e,d){if(isNullOrUndefined(d)){return e[this.getMember()].apply(e)}else{return e[this.getMember()].apply(e,d)}},tryInvoke:function(e,d){if(this.hasMember(e)){return this.invoke(e,d)}else{return null}}}).$()});define("Indigox.Web.JsLib.Invokers.PropertyGetterInvoker",["Indigox.Web.JsLib.Invokers.MemberInvoker","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Invokers").Class("PropertyGetterInvoker").Extend(c).Constructor(function(d){c.constructor.apply(this,arguments)}).Members({getMember:function(){return this.member},hasMember:function(d){var e=this.getGetter();return e in d},invoke:function(e,d){if(isNullOrUndefined(d)){return e[this.getGetter()].apply(e)}else{return e[this.getGetter()].apply(e,d)}},tryInvoke:function(e,d){if(this.hasMember(e)){return this.invoke(e,d)}else{return null}},getGetter:function(){var d=this.getMember();if(d){return"get"+d.replace(/(\w)(\w*)/,function(g,f,e){return(f.toUpperCase()+(e.length===1?e.toUpperCase():e))})}return null}}).$()});define("Indigox.Web.JsLib.Invokers.PropertySetterInvoker",["Indigox.Web.JsLib.Invokers.MemberInvoker","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Invokers").Class("PropertySetterInvoker").Extend(b).Constructor(function(d){b.constructor.apply(this,arguments)}).Members({getMember:function(){return this.member},hasMember:function(d){var e=this.getSetter();return e in d},invoke:function(e,d){if(isNullOrUndefined(d)){return e[this.getSetter()].apply(e)}else{return e[this.getSetter()].apply(e,d)}},tryInvoke:function(e,d){if(this.hasMember(e)){return this.invoke(e,d)}else{return null}},getSetter:function(){var d=this.getMember();if(d){return"set"+d.replace(/(\w)(\w*)/,function(g,f,e){return(f.toUpperCase()+(e.length===1?e.toUpperCase():e))})}return null}}).$()});define("Indigox.Web.JsLib.Manipulators.AttributeManipulator",["Indigox.Web.JsLib.Manipulators.Manipulator","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Core"],function(a,b){var d=a.prototype;var c=Namespace("Indigox.Web.JsLib.Manipulators").Class("AttributeManipulator").Extend(d).Constructor(function(e,f){d.constructor.apply(this,arguments)}).Members({write:function(e){if(this.element.hasAttribute(this.attribute)){this.element.setAttribute(this.attribute,e)}},read:function(){return this.element.getAttribute(this.attribute)}}).$()});define("Indigox.Web.JsLib.Manipulators.ControlManipulator",["Indigox.Web.JsLib.Manipulators.Manipulator","jquery","Indigox.Web.JsLib.Core"],function(b,d){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Manipulators").Class("ControlManipulator").Extend(c).Constructor(function(e,f,g){this.element=e;this.parentElement=f;this.nextSibling=g}).Members({write:function(e){var f=d(e).get(0);if(this.element){this.parentElement.replaceChild(e,this.element)}else{if(this.nextSibling){this.parentElement.insertBefore(e,this.nextSibling)}else{this.parentElement.appendChild(e)}}this.element=e},read:function(){return this.element}}).$()});define("Indigox.Web.JsLib.Manipulators.CssManipulator",["Indigox.Web.JsLib.Manipulators.Manipulator","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Manipulators").Class("CssManipulator").Extend(b).Constructor(function(d,e){b.constructor.apply(this,arguments)}).Members({write:function(e){if(isBoolean(e)){if(e===true&&!this.element.hasClass(this.attribute)){this.element.addClass(this.attribute)}else{if(e===false&&this.element.hasClass(this.attribute)){this.element.removeClass(this.attribute)}}}else{var d=this.getValue();if(e===d){return}if(!isNullOrUndefined(d)){this.element.removeClass(this.getClass(this.attribute,d))}if(!isNullOrUndefined(e)){this.element.addClass(this.getClass(this.attribute,e))}}},read:function(){var d=this.getValue();if(isNullOrUndefined(d)){d=this.element.hasClass(this.attribute)}return d},getValue:function(){var e=this.element.getAttribute("className");var f=new RegExp("(^|\\s+)"+this.attribute+"-(\\w+)","g");var d=f.exec(e);if(d){return d[2]}return null},getClass:function(d,e){return[d,"-",e].join("")}}).$()});define("Indigox.Web.JsLib.Manipulators.ForEachManipulator",["Indigox.Web.JsLib.Manipulators.Manipulator","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Manipulators").Class("ForEachManipulator").Extend(c).Constructor(function(e,d){this.element=e;this.parentElement=d}).Members({write:function(d){},insert:function(d,e){if(d>=this.element.length||this.element.length===0){this.parentElement.appendChild(e);this.element.splice(d,0,e)}else{this.parentElement.insertBefore(e,this.element[d]);this.element.splice(d,0,e)}},remove:function(d){this.parentElement.removeChild(this.element[d]);this.element.splice(d,1)},read:function(){return this.element}}).$()});define("Indigox.Web.JsLib.Manipulators.HTMLManipulator",["Indigox.Web.JsLib.Manipulators.Manipulator","Indigox.Web.JsLib.Utils.DOMUtil","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Core"],function(b,a,c){var d=b.prototype;var e=Namespace("Indigox.Web.JsLib.Manipulators").Class("HTMLManipulator").Extend(d).Constructor(function(f,g){d.constructor.apply(this,arguments)}).Members({write:function(f){a.setAttribute(this.element.element,"innerHTML",f)},read:function(){return a.getAttribute(this.element.element,"innerHTML")}}).$()});define("Indigox.Web.JsLib.Manipulators.Manipulator",["Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Core"],function(a){var c=a.el;var b=Namespace("Indigox.Web.JsLib.Manipulators").Class("Manipulator").Constructor(function(d,e){this.element=c(d);this.attribute=e}).Members({getElement:function(){return this.element},getAttribute:function(){return this.attribute},write:function(d){},read:function(){}}).$()});define("Indigox.Web.JsLib.Manipulators.StyleManipulator",["Indigox.Web.JsLib.Manipulators.Manipulator","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Manipulators").Class("StyleManipulator").Extend(c).Constructor(function(d,e){c.constructor.apply(this,arguments)}).Members({write:function(d){this.element.setStyle(this.attribute,d)},read:function(){return this.element.getStyle(this.attribute)}}).$()});define("Indigox.Web.JsLib.Manipulators.TextNodeManipulator",["Indigox.Web.JsLib.Manipulators.Manipulator","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Core"],function(b,c){var d=b.prototype;var a=Namespace("Indigox.Web.JsLib.Manipulators").Class("TextNodeManipulator").Extend(d).Constructor(function(e,f){d.constructor.apply(this,arguments)}).Members({write:function(e){if(this.element.element!=null){this.element.setText(e)}},read:function(){if(this.element.firstChild!=null){return this.element.getText()}return null}}).$()});define("Indigox.Web.JsLib.Mappings.DefaultMapping",["Indigox.Web.JsLib.Core"],function(){var a=null;var b=Namespace("Indigox.Web.JsLib.Mappings").Class("DefaultMapping").Constructor(function(){this.pairs=[];var e=null;var c=null,d=null;for(c=0,d=arguments.length;c<d;c++){e=arguments[c];this.pairs.push({propValue:e[0],attrValue:e[1]})}}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({map:function(f){if(isNullOrUndefined(f)){return f}var e=this.pairs;var c=null,d=null;for(c=0,d=e.length;c<d;c++){if(e[c].propValue===f){return e[c].attrValue}}return f},unmap:function(f){if(!isNullOrUndefined(f)){var e=this.pairs;var c=null,d=e.length;for(c=0,d=e.length;c<d;c++){if(e[c].attrValue===f){return e[c].propValue}}}return f}}).$()});define("Indigox.Web.JsLib.Mappings.FormatMapping",["Indigox.Web.JsLib.Mappings.DefaultMapping","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Core"],function(c,b){var d=c.prototype;var a=Namespace("Indigox.Web.JsLib.Mappings").Class("FormatMapping").Extend(d).Constructor(function(e){this.format=e}).Members({map:function(e){if(!b.isNullOrEmpty(e)){return b.format(this.format,e)}else{return e}},unmap:function(g){if(!b.isNullOrEmpty(g)){var h=this.format.replace("\\","\\\\").replace("(","\\(").replace(")","\\)").replace(".","\\.").replace("+","\\+").replace("{0}","(.+)").replace("[","\\[").replace("]","\\]").replace("{","\\{").replace("}","\\}").replace("*","\\*").replace("?","\\?").replace("^","\\^").replace("$","\\$").replace("|","\\|").replace("/","\\/").replace("#","\\#").replace("/","\\/").replace("-","\\-");var f=new RegExp("^"+h+"$");var e;if(e=f.exec(g)){return e[1]}}else{return g}}}).$()});define("Indigox.Web.JsLib.Mappings.MappingFactory",["Indigox.Web.JsLib.Core"],function(){var a=null;var b=Namespace("Indigox.Web.JsLib.Mappings").Class("MappingFactory").Constructor(function(){this.defaultMapping=null;this.mappings={}}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({register:function(d,c){this.mappings[d]=c},unregister:function(c){delete this.mappings[c]},getDefaultMapping:function(){return this.defaultMapping},setDefaultMapping:function(c){this.defaultMapping=c},getMapping:function(c){var d=this.mappings;if(c in d){return d[c]}return this.getDefaultMapping()}}).$()});define("Indigox.Web.JsLib.Mobile.AndroidAppService",["Indigox.Web.JsLib.Mobile.AppService","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Core"],function(d,b){var c=d.prototype;var a=Namespace("Indigox.Web.JsLib.Mobile").Class("AndroidAppService").Extend(c).Constructor(function(){}).Members({call:function(f,e){debug.log("name: "+f);this[b.toCamalCase(f)].apply(this,e)},clearCache:function(){AppClient.ClearCache()},createContact:function(j){var h=j.email;var g=j.name;var e=j.phone;var f=j.mobile;AppClient.CreateContact(g,f,e,h)},exit:function(){AppClient.Exit()},logOut:function(){AppClient.LogOut()},refresh:function(){AppClient.Reload()},settings:function(){AppClient.LaunchSetting()},sendMail:function(){MailClient.launch()}}).$()});define("Indigox.Web.JsLib.Mobile.AppService",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.Mobile").Class("AppService").Constructor(function(){}).Members({call:function(c,b){b=Array.prototype.slice.call(arguments,1);debug.log("name: "+c+"   args: ",b)}}).$()});define("Indigox.Web.JsLib.Mobile.AppServiceFactory",["Indigox.Web.JsLib.Mobile.AndroidAppService","Indigox.Web.JsLib.Mobile.IOSAppService","Indigox.Web.JsLib.Mobile.WindowsPhoneAppService","Indigox.Web.JsLib.Core"],function(d,e,h){var j=window.navigator.userAgent;function b(){return(j.indexOf("Android")>=0)}function c(){return(j.indexOf("iPhone")>=0)||(j.indexOf("iPad")>=0)}function g(){return(j.indexOf("MSIE")>=0)}var f=null;if(b()){f=new d()}else{if(c()){f=new e()}else{if(g()){f=new h()}}}var a=Namespace("Indigox.Web.JsLib.Mobile").Class("AppServiceFactory").Constructor(function(){}).Static({getInstance:function(){return f}}).$()});define("Indigox.Web.JsLib.Mobile.IOSAppService",["Indigox.Web.JsLib.Mobile.AppService","Indigox.Web.JsLib.Utils.UrlUtil","Indigox.Web.JsLib.Core"],function(d,b){var c=d.prototype;var a=Namespace("Indigox.Web.JsLib.Mobile").Class("IOSAppService").Extend(c).Constructor(function(){}).Members({call:function(h,g){var e=["indigox://",h];if(g){var j=0;for(var k in g){e.push((j===0)?"?":"&",k,"=",g[k]);j++}}var f=e.join("");debug.log(f);window.location.href=f}}).$()});define("Indigox.Web.JsLib.Mobile.WindowsPhoneAppService",["Indigox.Web.JsLib.Mobile.AppService","Indigox.Web.JsLib.Utils.UrlUtil","Indigox.Web.JsLib.Core"],function(d,b){var c=d.prototype;var a=Namespace("Indigox.Web.JsLib.Mobile").Class("WindowsPhoneAppService").Extend(c).Constructor(function(){}).Members({call:function(g,f){var e=[g];if(f){var h=0;for(var j in f){e.push((h===0)?"?":"&",j,"=",f[j]);h++}}var k=e.join("");debug.log(k);window.external.notify(k)}}).$()});define("Indigox.Web.JsLib.Models.Constraint",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.Models").Class("Constraint").Constructor(function(c,b){this.schema=c;this.columns=[];this.init(b)}).Members({init:function(c){var e=this.schema;for(var b=0,d=c.length;b<d;b++){this.columns.push(e.getColumn(c[b]))}},validate:function(b){return true},toIdentity:function(b){var e=this.columns;var c=[];for(var d=0,f=e.length;d<f;d++){var g=b.get(e[d].getName());c.push(g)}return c.join("#")}}).$()});define("Indigox.Web.JsLib.Models.DataAdapter",["Indigox.Web.JsLib.Utils.Configurable","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Models").Class("DataAdapter").Extend(c).Constructor(function(e,f,d){this.recordManager=e;this.recordSets=f;this.mapping=d;this.init(f)}).Members({init:function(e){for(var d in e){e[d].setAdapter(this)}},toRecord:function(l,k){var j=this.recordSets[l];var g=j.getSchema();var e=g.toRecord(k);var d=this.recordManager.getRecordCache(l);if(d.contains(e)){e=d.merge(e)}else{e.addListener(this);d.add(e)}var h=null;for(var f in this.recordSets){if(this.isReferenced(j,this.recordSets[f])){h=this.mapping[f];if(isNullOrUndefined(h)){h=f}this.fillRecordSet(f,k[h])}}return e},toRawData:function(k,d){var h=this.recordSets[k];var f=h.getSchema();var j=f.toRawData(d);var g=null;for(var e in this.recordSets){if(this.isReferenced(h,this.recordSets[e])){g=this.mapping[e];if(isNullOrUndefined(g)){g=e}j[g]=this.buildRawData(e)}}return j},fillRecordSet:function(g,j){if(isNullOrUndefined(j)){return}var d=null,h=this.recordSets[g];var e=null,f=null;for(e=0,f=j.length;e<f;e++){d=this.toRecord(g,j[e]);h.addRecord(d);d.accept()}},buildRawData:function(g){var j=[];var d=null,h=this.recordSets[g];var e=null,f=null;for(e=0,f=h.size();e<f;e++){d=h.getRecord(e);j.push(this.toRawData(g,d))}return j},isReferenced:function(h,g){var d=h.getSchema().getName();if(d===g.getSchema().getName()){return false}var j=g.getSchema().getForeignKeys();var e=null,f=null;for(e=0,f=j.length;e<f;e++){if(j[e].getReferencedSchema()===d){return true}}return false},clearReference:function(e){for(var d in this.recordSets){if(this.isReferenced(e,this.recordSets[d])){this.recordSets[d].clearRecord()}}}}).$()});define("Indigox.Web.JsLib.Models.DataColumn",["Indigox.Web.JsLib.Models.IncrementGenerator","Indigox.Web.JsLib.Models.GuidGenerator","Indigox.Web.JsLib.Models.IdentifierGenerator","Indigox.Web.JsLib.Core"],function(d,a,c){var b=Namespace("Indigox.Web.JsLib.Models").Class("DataColumn").Constructor(function(f,e){this.schema=f;this.name=e.name;this.text=e.text;this.type=e.type;this.readonly=e.readonly;this.defaultValue=isNullOrUndefined(e.defaultValue)?null:e.defaultValue;this.generator=b.createGenerator(e)}).Static({createGenerator:function(e){var f=null;if("increment" in e){return new d(e.increment)}else{if("guid" in e){return new a()}}}}).Members({getName:function(){return this.name},getText:function(){return this.text},getType:function(){return this.type},getGenerator:function(){return this.generator},getDefaultValue:function(){return this.defaultValue},setDefaultValue:function(e){if(isNullOrUndefined(e)){return}this.defaultValue=e},convert:function(e){if(isNullOrUndefined(e)){if(this.generator){return this.generator.generate()}else{return this.getDefaultValue()}}else{if(this.generator){this.generator.recofigure(e)}return e}}}).$()});define("Indigox.Web.JsLib.Models.DataSchema",["Indigox.Web.JsLib.Utils.ObjectUtil","Indigox.Web.JsLib.Models.DataColumn","Indigox.Web.JsLib.Models.Constraint","Indigox.Web.JsLib.Models.ForeignKey","Indigox.Web.JsLib.Models.Record","Indigox.Web.JsLib.Core"],function(f,c,e,b,a){var d=Namespace("Indigox.Web.JsLib.Models").Class("DataSchema").Constructor(function(h,g,j){this.recordManager=h;this.name=g;this.columns={};this.primaryKey=null;this.constraints=[];this.foreignKeys=[];this.initColumns(j.columns);this.initPrimaryKey(j.primaryKey);if(j.foreignKeys){this.initForeignKey(j.foreignKeys)}if(j.constraints){this.initConstraints(j.constraints)}}).Members({initColumns:function(h){var g=null,j=null;for(g=0,j=h.length;g<j;g++){this.columns[h[g].name]=new c(this,h[g])}},initPrimaryKey:function(h){if(isNullOrUndefined(h)||h.length===0){var g=this.name+"_ID";var j={name:g,text:g,increment:{}};this.columns[g]=new c(this,j);this.primaryKey=new e(this,[g])}else{this.primaryKey=new e(this,h)}},initForeignKey:function(k){var g=null,j=null;for(g=0,j=k.length;g<j;g++){var h=new b(this,k[g]);this.foreignKeys.push(h)}},initConstraints:function(j){var g=null,h=null;for(g=0,h=j.length;g<h;g++){this.constraints.push(new e(this,j[g]))}},getName:function(){return this.name},getColumns:function(){return f.getValues(this.columns)},getColumn:function(g){var h=this.columns[g];if(h){return h}else{return null}},contains:function(g){return g in this.columns},getPrimaryKey:function(){return this.primaryKey},getForeignKeys:function(){return this.foreignKeys},createRecord:function(g){return this.toRecord(g)},toRecord:function(n){var g=new a(this.recordManager,this.name);var j=this.columns;var k=null,m=null,h=null,l=null;for(h in j){k=j[h];l=k.convert(n[k.getName()]);g.set(k.getName(),l)}g.accept();return g},toRawData:function(g){var n={};var j=this.columns;var k=null,m=null;var h=null,l=null;for(k in j){m=g.get(k);if(!isNullOrUndefined(m)){n[k]=m}}return n},mergeRecords:function(g,h){if(g.getTimestamp()>h.getTimestamp()){return}var k=this.columns;var l=null,j=null,m=null;for(j in k){l=k[j];m=h.get(l.getName());if(m!==g.get(l.getName())&&!g.isModified(l.getName())){g.mergeFrom(h,l.getName())}}},validate:function(g){var h=this.primaryKey;h.validate(g);var l=this.constraints,k;for(var j in l){k=this.constraints[j];k.validate(g)}}}).$()});define("Indigox.Web.JsLib.Models.ForeignKey",["Indigox.Web.JsLib.Models.Constraint","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Models").Class("ForeignKey").Extend(c).Constructor(function(e,d){this.schema=e;this.columns=[];this.referencedColumns=[];this.referencedSchema=null;this.init(d)}).Members({init:function(g){var j=this.schema;var f=g.columns;for(var e=0,h=f.length;e<h;e++){this.columns.push(j.getColumn(f[e]))}this.referencedSchema=g.referencedSchema;var d=g.referencedColumns;for(var e=0,h=d.length;e<h;e++){this.referencedColumns.push(j.getColumn(d[e]))}},getColumns:function(){return this.columns},getReferencedColumns:function(){return this.referencedColumns},getReferencedSchema:function(){return this.referencedSchema}}).$()});define("Indigox.Web.JsLib.Models.GuidGenerator",["Indigox.Web.JsLib.Models.IdentifierGenerator","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Core"],function(c,b){var d=c.prototype;var a=Namespace("Indigox.Web.JsLib.Models").Class("GuidGenerator").Extend(d).Constructor(function(e){}).Members({recofigure:function(e){},generate:function(){return b.newGuid()}}).$()});define("Indigox.Web.JsLib.Models.IdentifierGenerator",["Indigox.Web.JsLib.Utils.Configurable","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.Models").Class("IdentifierGenerator").Extend(c).Constructor(function(d){}).Members({recofigure:function(d){},generate:function(){}}).$()});define("Indigox.Web.JsLib.Models.IncrementGenerator",["Indigox.Web.JsLib.Models.IdentifierGenerator","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Models").Class("IncrementGenerator").Extend(b).Constructor(function(d){this.seed=d?d.seed||0:0;this.increment=d?d.increment||1:1}).Members({recofigure:function(d){this.seed=Math.max(this.seed,d)},getSeed:function(){return this.seed},getIncrement:function(){return this.increment},generate:function(){this.seed+=this.increment;return this.seed}}).$()});define("Indigox.Web.JsLib.Models.Model",["Indigox.Web.JsLib.Utils.Configurable","Indigox.Web.JsLib.Utils.ListenersSupport","Indigox.Web.JsLib.Core"],function(d,b){var e=d.prototype;var a="PropertyChanging",c="PropertyChanged";var f=Namespace("Indigox.Web.JsLib.Models").Class("Model").Extend(e).Constructor(function(){this.listeners=new b(this);this.data=null}).Members({addListener:function(h,g){if(this.listeners&&h!=null){this.listeners.addListener(h,g)}},removeListener:function(g){if(this.listeners&&g!=null){this.listeners.removeListener(g)}},fireListener:function(h,g){if(this.listeners){this.listeners.fire(h,g)}}}).$()});define("Indigox.Web.JsLib.Models.Record",["Indigox.Web.JsLib.Models.Model","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var b="FieldChanged";var a=Namespace("Indigox.Web.JsLib.Models").Class("Record").Extend(c).Constructor(function(e,f){c.constructor.apply(this,arguments);this.recordManager=e;this.schemaName=f;this.data={};this.timestamp=new Date();this.dirty=a.DIRTY_CLEAN;this.modified={};this.listeners.registerListeners(b)}).Static({DIRTY_CLEAN:0,DIRTY_CREATE:1,DIRTY_UPDATE:2,DIRTY_DELETE:3}).Members({getSchema:function(){return this.recordManager.getDataSchema(this.schemaName)},contains:function(e){return this.getSchema().contains(e)},getIdentity:function(){var f=this.recordManager.getDataSchema(this.schemaName);var e=f.getPrimaryKey();if(e){return e.toIdentity(this)}else{return null}},set:function(f,g){var e=this.get(f);if(e===g){return}if(!this.isDirty()){this.markForUpdate()}this.modified[f]=this.get(f);this.data[f]=g;if(this.modified[f]!=g){this.listeners.fire(b,[f,g,e])}},get:function(e){return this.data[e]},getTimestamp:function(){return this.timestamp},getDirty:function(){return this.dirty},isDirty:function(){return this.dirty!==a.DIRTY_CLEAN},isCreate:function(){return this.dirty===a.DIRTY_CREATE},isUpdate:function(){return this.dirty===a.DIRTY_UPDATE},isDelete:function(){return this.dirty===a.DIRTY_DELETE},isModified:function(e){return e in this.modified},mergeFrom:function(e,f){this.timestamp=e.timestamp;this.data[f]=e.get(f)},accept:function(){this.dirty=a.DIRTY_CLEAN;this.modified={}},reject:function(){for(var e in this.modified){this.data[e]=this.modified[e]}this.dirty=a.DIRTY_CLEAN;this.modified={}},markForCreate:function(){this.dirty=a.DIRTY_CREATE},markForUpdate:function(){this.dirty=a.DIRTY_UPDATE},markForDelete:function(){this.dirty=a.DIRTY_DELETE},markForClean:function(){this.dirty=a.DIRTY_CLEAN}}).$()});define("Indigox.Web.JsLib.Models.RecordCache",["Indigox.Web.JsLib.Models.Model","Indigox.Web.JsLib.Utils.ObjectUtil","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Core"],function(f,b,a){var e=f.prototype;var d="FieldChanged";var c=Namespace("Indigox.Web.JsLib.Models").Class("RecordCache").Extend(e).Constructor(function(h,g){this.recordManager=h;this.name=g;this.cache={};a.el(window).addListener("hashchange",function(){this.clear()},this)}).Members({getIdentity:function(g){var j=this.recordManager.getDataSchema(this.name);var h=j.getPrimaryKey();if(h){return h.toIdentity(g)}else{return null}},getRecords:function(){return b.getValues(this.cache)},get:function(g){return this.cache[g]},contains:function(g){var h=this.getIdentity(g);if(h){return h in this.cache}else{return false}},add:function(g){var h=this.getIdentity(g);this.cache[h]=g},remove:function(g){var h=this.getIdentity(g);delete this.cache[h]},merge:function(h){var j=this.getIdentity(h);var g=this.get(j);var k=this.recordManager.getDataSchema(this.name);k.mergeRecords(g,h);return g},clear:function(){this.cache={}}}).$()});define("Indigox.Web.JsLib.Models.RecordManager",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Models.DataAdapter","Indigox.Web.JsLib.Models.RecordSet","Indigox.Web.JsLib.Models.DataSchema","Indigox.Web.JsLib.Models.RecordCache","Indigox.Web.JsLib.Core"],function(d,b,f,c,e){var a=null;var g=Namespace("Indigox.Web.JsLib.Models").Class("RecordManager").Constructor(function(){this.dataSchemas={};this.recordCaches={};this.recordSetLists={}}).Static({getInstance:function(){if(isNullOrUndefined(a)){a=new g()}return a}}).Members({register:function(h,j){this.dataSchemas[h]=new c(this,h,j);this.recordCaches[h]=new e(this,h);this.recordSetLists[h]=new d()},unregister:function(h){delete this.dataSchemas[h];delete this.recordCaches[h];delete this.recordSetLists[h]},getDataSchema:function(h){return this.dataSchemas[h]},getRecordCache:function(h){return this.recordCaches[h]},getRecordSetList:function(h){return this.recordSetLists[h]},createRecordSet:function(k,j){var h=this.getRecordSetList(k);if(isNullOrUndefined(h)){throw new Error(['Can not create new RecordSet. Because the data schema "',k,'" was not registered. '].join(""))}var l=new f(this,k);l.configure(j);l.addListener(this);h.add(l);return l},destroyRecordSet:function(j){var h=this.getRecordSetList(name);h.remove(j)},createDataAdapter:function(k,j){var h=new b(this,k,j);return h},destroyRecord:function(k,h){var j=this.getRecordSetList(k);var l=null,m=null;for(l=0,m=j.size();l<m;l++){j.get(l).removeRecord(h)}},onRecordRemoved:function(k,j,h){var l=k.schemaName;this.destroyRecord(l,h)}}).$()});define("Indigox.Web.JsLib.Models.RecordSet",["Indigox.Web.JsLib.Proxy.Proxy","Indigox.Web.JsLib.Models.Model","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Models.Transaction","Indigox.Web.JsLib.Models.Record","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Core"],function(c,b,d,g,h,e){var a=b.prototype;var f="RecordAdded",j="RecordRemoved";var k=Namespace("Indigox.Web.JsLib.Models").Class("RecordSet").Extend(a).Constructor(function(l,m){a.constructor.apply(this,arguments);this.recordManager=l;this.schemaName=m;this.adapter=null;this.proxy=null;this.lastParams={};this.addRecords=false;this.data=[];this.dataIndexer={};this.listeners.registerListeners(f,j)}).Members({getSchema:function(){return this.recordManager.getDataSchema(this.schemaName)},setAdapter:function(l){this.adapter=l},getAdapter:function(){if(isNullOrUndefined(this.adapter)){var l={};l[this.schemaName]=this;this.adapter=this.recordManager.createDataAdapter(l,{})}return this.adapter},getIdentity:function(l){var n=this.recordManager.getDataSchema(this.schemaName);var m=n.getPrimaryKey();if(m){return m.toIdentity(l)}else{return null}},setAddRecords:function(l){this.addRecords=l},getAddRecords:function(){return this.addRecords},getTotalCount:function(l,m){this.getProxy().size(l,m)},load:function(l,m){m=e.createInstance(m);this.lastParams=l;if(this.getProxy()){this.getProxy().list(l,{handler:this.onProxyLoad,scope:this,args:[m]})}else{if(m){m.invoke()}}},reload:function(l){this.getProxy().list(this.lastParams,{handler:this.onProxyLoad,scope:this,args:[l]})},onProxyLoad:function(l,m){this.loadRecords(l,this.addRecords);if(m){m.invoke()}},createRecord:function(o){var m=this.getAdapter();var n=this.schemaName;var l=m.toRecord(n,o);return l},loadRecords:function(o,n){var l=this.getAdapter();var m=this.schemaName;if(!n&&this.data.length>0){this.clearRecord();this.setTransaction(null)}l.fillRecordSet(m,o);this.beginTransaction()},setProxy:function(m){if((m)&&(!(m instanceof c))){var l=m;m=Type.forAlias(l.proxyType).createInstance();m.configure(l)}this.proxy=m},getProxy:function(){return this.proxy},commit:function(l){l=e.createInstance(l);if(!this.transaction){throw new Error("recordSet has not loaded data, can't execute commit.")}this.transaction.commit(this.getProxy(),{handler:this.doCommit,scope:this,args:[l]})},doCommit:function(l,m){this.setTransaction(null);this.beginTransaction();if(m){m.invoke(l)}},convertRawData:function(l){var m=this.getAdapter(),n=this.schemaName;return m.toRawData(n,l)},buildRawData:function(){var l=this.getAdapter(),m=this.schemaName;return l.buildRawData(m)},getRecords:function(){return this.data},getRecord:function(l){if(isInt(l)){return this.data[l]}else{return this.dataIndexer[l]}},addRecord:function(l){return this.insertRecord(this.size(),l)},insertRecord:function(n,l){var p=null;var o;this.beginTransaction();if(!(l instanceof h)){p=l;l=this.createRecord(l);for(o in p){l.set(o,p[o])}}var m=this.getIdentity(l);if(m in this.dataIndexer){return this.dataIndexer[m]}this.data.splice(n,0,l);this.dataIndexer[m]=l;if(l.isDelete()){l.markForClean()}else{l.markForCreate()}if(p!=null){for(o in p){l.set(o,p[o])}}this.fireListener(f,[n,l]);if(this.transaction){this.transaction.process(l)}l.addListener(this);return l},removeRecord:function(o){if(o instanceof h){o=d.indexOf(this.data,o)}if(o<0){return}var l=null,n=this.data.splice(o,1);if(n.length>0){l=n[0];var m=this.getIdentity(l);delete this.dataIndexer[m];if(l.isCreate()){l.markForClean()}else{l.markForDelete()}this.fireListener(j,[o,l]);if(this.transaction){this.transaction.process(l)}l.removeListener(this)}return l},clearRecord:function(){if(this.data.length===0){return}var l=null,m=null;for(l=0,m=this.data.length;l<m;l++){this.removeRecord(0)}this.getAdapter().clearReference(this)},reset:function(){if(this.data.length===0){return}for(var n=this.data.length;n>0;n--){var l=this.data[0];var m=this.getIdentity(l);delete this.dataIndexer[m];this.data.splice(0,1);l.removeListener(this)}},size:function(){return this.data.length},beginTransaction:function(){if(!isNullOrUndefined(this.transaction)){return}this.setTransaction(new g(this));return this.transaction},setTransaction:function(l){if(l){this.addListener(this)}else{this.removeListener(this)}this.transaction=l},getTransaction:function(){return this.transaction},onFieldChanged:function(n,l,m){if(this.transaction){this.transaction.process(n)}}}).$()});define("Indigox.Web.JsLib.Models.Transaction",["Indigox.Web.JsLib.Utils.Configurable","Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Core"],function(d,c,a){var f=d.prototype;var e=0,g=-1;var b=Namespace("Indigox.Web.JsLib.Models").Class("Transaction").Extend(f).Constructor(function(h){this.recordSet=h;this.records=new c();this.successed=true}).Members({process:function(h){if(this.records.contains(h)){return}this.records.add(h)},commit:function(o,q){this.successed=true;var p=this.recordSet,m=null,h=null,k=this.records.clone();var l=null,j=k.size();if(j>0){for(l=0;l<j;l++){m=k.get(l);h=p.convertRawData(m);var n=new a(this.doCommit,this,[m,q]);if(m.isDirty()){if(m.isCreate()){o.create(h,n)}else{if(m.isUpdate()){o.update(h,n)}else{o.destroy(h,n)}}}else{this.doCommit(e,m,q)}}}else{q=a.createInstance(q);if(q){q.invoke(true)}}},doCommit:function(j,h,k){if(j==e){h.accept()}else{this.successed=false}this.records.remove(h);if(this.records.size()===0){k=a.createInstance(k);if(k){k.invoke(this.successed)}}},rollback:function(){var k=null,l=null;var j=this.records,h=null;for(k=0,l=j.size();k<l;k++){h=j.get(k);if(h.isDirty()){h.reject()}}this.recordSet.setTransaction(null)}}).$()});define("Indigox.Web.JsLib.Online.OnlineViewer",["Indigox.Web.JsLib.Utils.UrlUtil","Indigox.Web.JsLib.WebContexts.Context","Indigox.Web.JsLib.Core"],function(c,b){var a=Namespace("Indigox.Web.JsLib.Online").Class("OnlineViewer").Constructor(function(d){this.url=d}).Members({isSupportOnlineView:function(){var d=this.url;var f=["doc","docx","ppt","pptx","xls","xlsx","rtf","htm","html","pdf","jpg","jpeg","tif","tiff","bmp","gif","png","txt","odt","odg","odp","odf"];var e=new RegExp("\\.(?:"+f.join("|")+")(?:\\?|$)","i");return e.test(d)},getOnlineViewUrl:function(){var d=b.getInstance().getSetting("JsLib.UsePreview");if(d!="true"){return this.url}return c.join(b.getInstance().getSetting("JsLib.PreviewURL"),{src:this.url})}}).$()});define("Indigox.Web.JsLib.Proxy.ArrayProxy",["Indigox.Web.JsLib.Proxy.Proxy","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Core"],function(f,d,b,a){var c=f.prototype;var e=Namespace("Indigox.Web.JsLib.Proxy").Class("ArrayProxy").Extend(c).Constructor(function(g){c.constructor.apply(this,arguments);g=d.copyExist({array:[]},g);this.configure(g)}).Members({setArray:function(g){this.array=g},getArray:function(){return this.array},create:function(){},read:function(){},update:function(){},list:function(k,m){k=k||{};var j=[],l=this.array;if(!l){return}var g=null,h=null;for(g=0,h=l.length;g<h;g++){if(this.filter(l[g],k)){j.push(l[g])}}m=a.createInstance(m);if(m){m.invoke(j)}},filter:function(h,j){for(var g in j){if(isArray(j[g])){if(!b.contains(j[g],h[g])){return false}}if(h[g]!=j[g]){return false}}return true},destroy:function(){},size:function(){return this.data.length}}).$()});define("Indigox.Web.JsLib.Proxy.InstructionProxy",["Indigox.Web.JsLib.Proxy.Proxy","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.CQRS.Batch","Indigox.Web.JsLib.CQRS.AutoBatch","Indigox.Web.JsLib.Core"],function(g,f,a,e,d){var c=g.prototype;var b=Namespace("Indigox.Web.JsLib.Proxy").Class("InstructionProxy").Extend(c).Constructor(function(h){c.constructor.apply(this,arguments);h=f.copyExist({query:"",createCommand:"",updateCommand:"",deleteCommand:"",batch:null},h);this.configure(h)}).Members({setQuery:function(h){this.query=h},getQuery:function(){return this.query},setCreateCommand:function(h){this.createCommand=h},getCreateCommand:function(){return this.createCommand},setUpdateCommand:function(h){this.updateCommand=h},getUpdateCommand:function(){return this.updateCommand},setDeleteCommand:function(h){this.deleteCommand=h},getDeleteCommand:function(){return this.deleteCommand},getBatch:function(){return this.batch},setBatch:function(h){this.batch=h},create:function(j,h){this.executeCommand(this.createCommand,j,h)},update:function(j,h){this.executeCommand(this.updateCommand,j,h)},destroy:function(j,h){this.executeCommand(this.deleteCommand,j,h)},list:function(h,j){this.executeQuery("list",h,j)},single:function(h,j){this.executeQuery("single",h,j)},size:function(h,j){this.executeQuery("size",h,j)},executeQuery:function(l,n,o){var j=this.getQueryParams(n);var h=a.createInstance(o);if(this.query===""){if(h){h.invoke({})}return}var k=this.getBatch();var m=!isNullOrUndefined(k);if(!m){k=d.getCurrentBatch()}k[l]({name:this.query,properties:j,callback:function(p){if(h){h.invoke(p)}},errorCallback:function(p){if(h){h.invoke(p)}}})},getQueryParams:function(h){h=f.copy({},h);h.FirstResult=h.FirstResult||0;return h},executeCommand:function(l,n,m){var j=this.getBatch();var k=!isNullOrUndefined(j);if(!k){j=d.getCurrentBatch()}var h=a.createInstance(m);j.execute({name:l,properties:n,callback:function(o){if(h){h.invoke(0)}},errorCallback:function(o){if(h){h.invoke(1)}}});if(!k){j.commit()}}}).$()});define("Indigox.Web.JsLib.Proxy.Proxy",["Indigox.Web.JsLib.Utils.Configurable","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Proxy").Class("Proxy").Extend(b).Constructor(function(){b.constructor.apply(this,arguments)}).Members({create:function(){},read:function(){},update:function(){},destroy:function(){},list:function(){},size:function(){}}).$()});define("Indigox.Web.JsLib.Proxy.RemotingProxy",["Indigox.Web.JsLib.Proxy.Proxy","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Core"],function(e,d,a){var c=e.prototype;var b=Namespace("Indigox.Web.JsLib.Proxy").Class("RemotingProxy").Extend(c).Constructor(function(f){debug.warn("RemotingProxy is deprecated, please use InstructionProxy.");c.constructor.apply(this,arguments);f=d.copyExist({listMethod:"GetList",readMethod:"Read",createMethod:"Create",updateMethod:"Update",deleteMethod:"Delete",getTotalMethod:"GetTotalCount"},f);this.configure(f)}).Members({setService:function(f){this.service=f},getService:function(){return this.service},setListMethod:function(f){this.listMethod=f},getListMethod:function(){return this.listMethod},setReadMethod:function(f){this.readMethod=f},getReadMethod:function(){return this.readMethod},setCreateMethod:function(f){this.createMethod=f},getCreateMethod:function(){return this.createMethod},setUpdateMethod:function(f){this.updateMethod=f},getUpdateMethod:function(){return this.updateMethod},setDeleteMethod:function(f){this.deleteMethod=f},getDeleteMethod:function(){return this.deleteMethod},setGetTotalMethod:function(f){this.getTotalMethod=f},getGetTotalMethod:function(){return this.getTotalMethod},create:function(h,g){try{if(isFunction(this.createMethod)){this.createMethod(h)}else{this.service[this.createMethod](h)}g.invoke(0)}catch(f){g.invoke(1)}},update:function(h,g){try{if(isFunction(this.updateMethod)){this.updateMethod(h)}else{this.service[this.updateMethod](h)}g.invoke(0)}catch(f){debug.error("update error : ");debug.error(f);g.invoke(1)}},destroy:function(h,g){try{if(isFunction(this.deleteMethod)){this.deleteMethod(h)}else{this.service[this.deleteMethod](h)}g.invoke(0)}catch(f){g.invoke(1)}},read:function(f){if(isFunction(this.readMethod)){return this.readMethod.apply(this.service,f)}else{return this.service[this.readMethod].apply(this.service,f)}},list:function(g,j){var f=this.getQueryParams(g);var h=[];if(isFunction(this.listMethod)){h=this.listMethod.apply(this,f)}else{h=this.service[this.listMethod].apply(this.service,f)}j=a.createInstance(j);if(j){j.invoke(h)}},size:function(h,j){var f=this.getQueryParams(h);var g=0;if(isFunction(this.getTotalMethod)){g=this.getTotalMethod.apply(this.service,f)}else{g=this.service[this.getTotalMethod].apply(this.service,f)}j=a.createInstance(j);if(j){j.invoke(g)}},getQueryParams:function(k){k=d.copy({},k);var h=k.startindex||0;var j=k.pagesize;delete k.startindex;delete k.pagesize;var f=[];var g="";for(g in k){f.push(k[g])}f.push(h);if(j!=null){f.push(j)}return f}}).$()});define("Indigox.Web.JsLib.Serialization.JsonSerializer",["Indigox.Web.JsLib.Utils.Util","json2","Indigox.Web.JsLib.Core"],function(Util,JSON){var functionMatcher=/^\s*function\s*\([\s\S]*\)\s*\{[\s\S]*\}\s*$/;function tryParseDate(value){var d=new Date(value.slice(5,-1));if(d){return d}return value}function parseFunction(value){try{return eval("(function(){var f="+value+";return f;}());")}catch(e){debug.error(e);throw new Error("can't parse function string: "+value)}}function specialTypeConverter(key,value){if(typeof value==="string"){if(value.slice(0,5)==="Date("&&value.slice(-1)===")"){return tryParseDate(value)}if(functionMatcher.test(value)){return parseFunction(value)}}return value}var instance=null;var JsonSerializer=Namespace("Indigox.Web.JsLib.Serialization").Class("JsonSerializer").Static({getInstance:function(){if(instance===null){instance=new JsonSerializer()}return instance}}).Members({deserialize:function(text){try{return JSON.parse(text,specialTypeConverter)}catch(e){debug.error("Can't parse json text:\r\n"+text);throw new Error("Can't parse json text.")}},serialize:function(o){return JSON.stringify(o)}}).$()});define("Indigox.Web.JsLib.System.Application",["Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Utils.ErrorHandler","Indigox.Web.JsLib.Controls.PageUrlMonitor","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.Controls.Page","Indigox.Web.JsLib.Core"],function(a,e,b,d,c){var h=Namespace("Indigox.Web.JsLib.System").Class("Application").Constructor(function(){}).Members({onDomReady:function(){var k=Page();var j=c.getInstance().createUI(k);j.element=document.body;k.init()},onDocumentLoad:function(){var j=this;j.loadPage();new d().onUrlPathChanged(function(){j.loadPage()})},onDocumentUnload:function(){var j=this;j.unloadPage()},loadPage:function(){Page().load()},unloadPage:function(){Page().unload()},getWidgetZoneInfo:function(l){var m=Page().getUrlPath();var n=l.getName();var k="/_remoting/PageListQuery/List/jsonp?!callback=define";var j=new e();require([k],function(q){if(q.Status!==0){b.log(q.Error)}var p=g(q.Result,m);var o=f(p.WidgetZones,n);if(o){j.resolve(o.Widgets)}else{j.resolve([])}},function(o){console.error(o)});return j.promise()}}).$();var g=function(j,k){for(var l=0,m=j.length;l<m;l++){var n=j[l];if(n.Url.toLowerCase()===k.toLowerCase()){return n}}return null};var f=function(k,j){for(var m=0,n=k.length;m<n;m++){var l=k[m];if(l.Name.toLowerCase()===j.toLowerCase()){return l}}return null}});define("Indigox.Web.JsLib.UI.ControlUIs.AutoCompleteBoxCursor",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("AutoCompleteBoxCursor").Constructor(function(b){this.control=b;this.activeIndex=-1;this.increment=0}).Members({activeItemIndex:function(b){this.increase(b);if(this.isMovePrevious()&&this.cannotMovePrevious()){return}if(this.isMoveNext()&&this.cannotMoveNext()){return}if(this.isEmptyItems()){return}this.control.deactiveItem(this.activeIndex);this.activeIndex+=this.increment;this.control.activeItem(this.activeIndex)},selectItem:function(){var b=this.activeIndex;this.activeIndex=(b==-1?0:b);if(!this.isEmptyItems()){this.control.onSelectedChanged(this.control.getItems()[this.activeIndex])}this.activeIndex=-1},removePreviousCompeleteItem:function(){var b=this.control.getCompleteItems();if(b.length===0){return}this.control.removeCompleteItem(b[b.length-1])},reset:function(){this.activeIndex=-1},increase:function(b){this.increment=b},isMovePrevious:function(){return this.increment<0},cannotMovePrevious:function(){return this.activeIndex<=0},isMoveNext:function(){return this.increment>0},cannotMoveNext:function(){return this.activeIndex>=this.control.getItems().length-1},isEmptyItems:function(){return this.control.getItems().length===0}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.AutoCompleteBoxUI",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.ControlUIs.ListControlUI","Indigox.Web.JsLib.UI.ControlUIs.AutoCompleteBoxCursor","Indigox.Web.JsLib.Core"],function(b,e,c,a){var f=c.prototype;var d=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("AutoCompleteBoxUI").Extend(f).Constructor(function(g){f.constructor.call(this,g);this.moveCursor=new a(g)}).Static({createUI:function(g){return new d(g)}}).Members({activeItemIndex:function(g){this.moveCursor.activeItemIndex(g)},selectItem:function(){this.moveCursor.selectItem()},removePreviousCompeleteItem:function(){this.moveCursor.removePreviousCompeleteItem()},onCompleteItemAdding:function(j,g,k){if(!this.isInited()){return}var h=b.getInstance().createUI(k);if(k.isInited()){h.init()}},onCompleteItemAdded:function(h,g,j){this.insertChildElement("completeItems",g,j)},onCompleteItemRemoving:function(h,g,j){},onCompleteItemRemoved:function(h,g,j){this.removeChildElement("completeItems",g,j)},onIndexReset:function(g){this.moveCursor.reset()},createChildrenUI:function(){f.createChildrenUI.apply(this,arguments);var l=this.getControl();var j,m,h,g,k;j=l.getCompleteItems();for(g=0,k=j.length;g<k;g++){m=j[g];h=b.getInstance().createUI(m);if(m.isInited()){h.init()}}},renderChildren:function(){f.renderChildren.apply(this,arguments);var m=this.getControl();var l=new e(m,this.getMapping());var j,n,h,g,k;j=m.getCompleteItems();for(g=0,k=j.length;g<k;g++){n=j[g];h=b.getInstance().getUI(n);h.render();h.insertInto(l,"items",g)}},setChildrenRendered:function(){f.setChildrenRendered.apply(this,arguments);var l=this.getControl();var j,m,h,g,k;j=l.getCompleteItems();for(g=0,k=j.length;g<k;g++){m=j[g];h=b.getInstance().getUI(m);h.setRendered()}},disposeChildren:function(){f.disposeChildren.apply(this,arguments);var g=this.getControl();children=g.getCompleteItems();for(i=0,length=children.length;i<length;i++){child=children[i];childUI=b.getInstance().getUI(child);childUI.dispose()}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.AutoCompleteItemUI",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.ControlUI","jquery","Indigox.Web.JsLib.Core"],function(b,c,a,f){var e=a.prototype;var d=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("AutoCompleteItemUI").Extend(e).Constructor(function(g){e.constructor.call(this,g)}).Static({createUI:function(g){return new d(g)}}).Members({onPropertyChanged:function(l,k,j,g){e.onPropertyChanged.apply(this,arguments);if((k==="isActive")&&(j===true)&&(this._hasScroll())){var h=this.getElement().parentElement;borderTop=parseFloat(f.css(h,"borderTopWidth"))||0;paddingTop=parseFloat(f.css(h,"paddingTop"))||0;offset=f(this.getElement()).offset().top-f(h).offset().top-borderTop-paddingTop;scroll=f(h).scrollTop();elementHeight=f(h).height();itemHeight=f(this.getElement()).height();if(offset<0){f(h).scrollTop(scroll+offset)}else{if(offset+itemHeight>elementHeight){f(h).scrollTop(scroll+offset-elementHeight+itemHeight)}}}},_hasScroll:function(){var g=this.getElement().parentElement;return f(g).outerHeight()<f(g).prop("scrollHeight")}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.BadgeLinkMenuItemUI",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.Utils.DOMUtil","Indigox.Web.JsLib.UI.Renderer","Indigox.Web.JsLib.UI.RendererCache","Indigox.Web.JsLib.UI.DomReader","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.ControlUIs.NodeControlUI","Indigox.Web.JsLib.Core"],function(g,d,e,j,f,b,c){var a=c.prototype;var h=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("BadgeLinkMenuItemUI").Extend(a).Constructor(function(k){a.constructor.call(this,k)}).Static({createUI:function(k){return new h(k)}}).Members({renderHtml:function(){var l=this.buildHtml();this.setElement(d.buildElement(l.join("")));var k=this.getControl().getBadge();if(isNullOrUndefined(k)||k==0){d.addClass(d.element(" .badge",this.getElement()),"invisible")}},updateElement:function(l,k){a.updateElement.apply(this,arguments);if(l=="badge"){if(isNullOrUndefined(k)||k==0){d.addClass(d.element(" .badge",this.getElement()),"invisible")}else{d.removeClass(d.element(" .badge",this.getElement()),"invisible")}}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.CheckBoxItemUI",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","Indigox.Web.JsLib.Core"],function(a,c,b){var e=b.prototype;var d=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("CheckBoxItemUI").Extend(e).Constructor(function(f){e.constructor.call(this,f)}).Static({createUI:function(f){return new d(f)}}).Members({createChildrenUI:function(){var j=this.getControl();var k,g,f,h;k=j.getCheckBox();if(k){g=a.getInstance().createUI(k);if(k.isInited()){g.init()}}},renderChildren:function(){var k=this.getControl();var j=new c(k,this.getMapping());var l,g,f,h;l=k.getCheckBox();if(l){g=a.getInstance().getUI(l);g.render();g.replaceWith(j,"checkBox")}},setChildrenRendered:function(){var j=this.getControl();var k,g,f,h;k=j.getCheckBox();if(k){g=a.getInstance().getUI(k);g.setRendered()}},disposeChildren:function(){var j=this.getControl();var k,g,f,h;k=j.getCheckBox();if(k){g=a.getInstance().getUI(k);g.dispose()}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.ComboBoxUI",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.ControlUIs.ListControlUI","Indigox.Web.JsLib.Core"],function(a,d,c){var e=c.prototype;var b=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("ComboBoxUI").Extend(e).Constructor(function(f){e.constructor.call(this,f)}).Static({createUI:function(f){return new b(f)}}).Members({onNodeAdding:function(h,f,j){if(!this.isInited()){return}var g=a.getInstance().createUI(j);if(j.isInited()){g.init()}},onNodeAdded:function(g,f,h){this.insertChildElement("nodes",f,h)},onNodeRemoving:function(g,f,h){},onNodeRemoved:function(g,f,h){this.removeChildElement("nodes",f,h)},createChildrenUI:function(){e.createChildrenUI.apply(this,arguments);var k=this.getControl();var h,l,g,f,j;h=k.getNodes();for(f=0,j=h.length;f<j;f++){l=h[f];g=a.getInstance().createUI(l);if(l.isInited()){g.init()}}},renderChildren:function(){e.renderChildren.apply(this,arguments);var l=this.getControl();var k=new d(l,this.getMapping());var h,m,g,f,j;h=l.getNodes();for(f=0,j=h.length;f<j;f++){m=h[f];g=a.getInstance().getUI(m);g.render();g.insertInto(k,"items",f)}},setChildrenRendered:function(){e.setChildrenRendered.apply(this,arguments);var k=this.getControl();var h,l,g,f,j;h=k.getNodes();for(f=0,j=h.length;f<j;f++){l=h[f];g=a.getInstance().getUI(l);g.setRendered()}},disposeChildren:function(){e.disposeChildren.apply(this,arguments);children=control.getNodes();for(i=0,length=children.length;i<length;i++){child=children[i];childUI=a.getInstance().getUI(child);childUI.dispose()}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.ContentUI",["Indigox.Web.JsLib.DOM.Effect","Indigox.Web.JsLib.UI.Visitors.ManipulatorVisitor","Indigox.Web.JsLib.UI.RenderQueue","Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","Indigox.Web.JsLib.Core"],function(a,f,c,b){var e=b.prototype;var d=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("ContentUI").Extend(e).Constructor(function(g){e.constructor.call(this,g)}).Static({createUI:function(g){return new d(g)}}).Members({onChildAdding:function(){e.onChildAdding.apply(this,arguments);if(this.getElement()&&this.isRenderedToDocument()){c.getInstance().addListener(this,{onRendered:this.swap});this.fakeup()}},onChildRemoving:function(){e.onChildRemoving.apply(this,arguments);if(this.getElement()&&this.isRenderedToDocument()){c.getInstance().addListener(this,{onRendered:this.swap});this.fakeup()}},onLoading:function(){e.onLoading.apply(this,arguments);if(this.getElement()&&this.isRenderedToDocument()){c.getInstance().addListener(this,{onRendered:this.swap});this.fakeup()}},buildMapping:function(){var h=new f(this.getControl(),this.getSchema(),this.getElement(),this.getMediator(),this);var g=h.visit();return g}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.DataItemUI",["Indigox.Web.JsLib.Utils.DelayedTask","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.Schema","Indigox.Web.JsLib.UI.Visitors.ManipulatorVisitor","Indigox.Web.JsLib.UI.SchemaRegistry","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","Indigox.Web.JsLib.Core"],function(f,c,h,d,j,e,b){var a=b.prototype;var g=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("DataItemUI").Extend(a).Constructor(function(k){a.constructor.call(this,k)}).Static({createUI:function(k){return new g(k)}}).Members({getSchema:function(){if(isNullOrUndefined(this.schema)){if(!this.control.getParent()){return h.LI([],[])}var k=this.control.getParent().getItemTemplate();this.schema=j.getInstance().getSchema(k);this.schema.setAttributeNode(h.EVENT("mouseover","${onMouseOver}"));this.schema.setAttributeNode(h.EVENT("mouseout","${onMouseOut}"));this.schema.setAttributeNode(h.EVENT("click","${onClicked}"));this.schema.setAttributeNode(h.CSS("selected","${selected}"))}return this.schema},createChildrenUI:function(){a.createChildrenUI.apply(this,arguments)},renderChildren:function(){var p=this.getControl();var o=new c(p,this.getMapping());var m,q,l,k,n;m=p.getChildren();for(k=0,n=m.length;k<n;k++){q=m[k];l=e.getInstance().getUI(q);l.render();l.replaceWith(o,'getChild("'+q.name+'")')}},setChildrenRendered:function(){a.setChildrenRendered.apply(this,arguments)},renderHtml:function(){return a.renderHtml.apply(this,arguments)},buildHtml:function(){return a.buildHtml.apply(this,arguments)},onClicked:function(){this.getControl().toggleSelected()},buildMapping:function(){var l=new d(this.getControl(),this.getSchema(),this.getElement(),this.getMediator(),this);var k=l.visit();return k}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.DataListUI",["Indigox.Web.JsLib.UI.ControlUIs.ListControlUI","Indigox.Web.JsLib.UI.RenderQueue","Indigox.Web.JsLib.Core"],function(b,a){var d=b.prototype;var c=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("DataListUI").Extend(d).Constructor(function(e){d.constructor.call(this,e)}).Static({createUI:function(e){return new c(e)}}).Members({onItemAdding:function(f,e,g){d.onItemAdding.apply(this,arguments);if(this.getElement()&&this.isRenderedToDocument()){a.getInstance().addListener(this,{onRendered:this.swap});this.fakeup()}},onItemRemoving:function(f,e,g){d.onItemRemoving.apply(this,arguments);if(this.getElement()&&this.isRenderedToDocument()){a.getInstance().addListener(this,{onRendered:this.swap});this.fakeup()}},onLoading:function(){d.onLoading.apply(this,arguments);if(this.getElement()&&this.isRenderedToDocument()){a.getInstance().addListener(this,{onRendered:this.swap});this.fakeup()}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.DatePickerUI",["Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Utils.DOMUtil","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","jquery","jquery-datepicker","jquery-datepicker-lang","Indigox.Web.JsLib.Core"],function(c,b,a,f,d,h){var g=d.prototype;var e=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("DatePickerUI").Extend(g).Constructor(function(j){g.constructor.call(this,j)}).Static({createUI:function(j){return new e(j)}}).Members({parseElement:function(){var l=this.getElement();if(c.trim(b.getAttribute(l,"innerHTML"))===""){var k=this.buildHtml();var j=b.getAttribute(b.buildElement(k.join("")),"innerHTML");b.setAttribute(l,"innerHTML",j)}g.parseElement.apply(this,arguments)},buildHtml:function(){var k=g.buildHtml.apply(this,arguments);var j=b.buildElement(k.join(""));this.fillSelectOptions(j);return[j.outerHTML]},setRendered:function(){g.setRendered.apply(this,arguments);if(this.isRendered()){this.warpDateInput()}},warpDateInput:function(){var m=this.getControl();var l=this.getElement();var j=m.getMaxDate();var k=m.getMinDate();var n=h(".dateinput",l);n.datepicker({changeYear:true,changeMonth:true,minDate:k,maxDate:j,showAnim:""});if(m.getReadonly()){n.datepicker("disable")}else{n.datepicker("enable")}},fillSelectOptions:function(o){var n=h(".hoursinput",o);for(var p=0;p<24;p++){var q=(p<10)?("0"+p.toString()):p.toString();n.append('<option value="'+q+'">'+q+"</option>")}var l=h(".minutesinput",o);for(var j=0;j<60;j++){var k=(j<10)?("0"+j.toString()):j.toString();l.append('<option value="'+k+'">'+k+"</option>")}},showDatePicker:function(){h(".dateinput",this.getElement()).datepicker("show")},onPropertyChanged:function(n,m,l,j){if(m==="minDate"){var o=this.getControl();var k=o.getMinDate();h(".dateinput",this.getElement()).datepicker("option","minDate",new Date(k))}else{g.onPropertyChanged.apply(this,arguments)}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.DialogMobileUI",["Indigox.Web.JsLib.Utils.DOMUtil","Indigox.Web.JsLib.UI.Overlay","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.UI.ControlUI","Indigox.Web.JsLib.Core"],function(e,b,c,d){var g=c.el;var f=d.prototype;var a=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("DialogMobileUI").Extend(f).Constructor(function(h){f.constructor.call(this,h)}).Static({createUI:function(h){return new a(h)}}).Members({updateElement:function(j,h){f.updateElement.apply(this,arguments);if(j==="visible"){if(h){this.floatover()}else{this.restore()}}},floatover:function(){e.addClass(e.element(" .actionbar",document.body),"invisible");e.addClass(e.element("#viewport",document.body),"floatover")},restore:function(){e.removeClass(e.element(" .actionbar",document.body),"invisible");e.removeClass(e.element("#viewport",document.body),"floatover")},center:function(){}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.DialogUI",["Indigox.Web.JsLib.Utils.Browser","Indigox.Web.JsLib.UI.Overlay","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.UI.ControlUI","Indigox.Web.JsLib.Core"],function(g,a,b,c){var g=g.getInstance(),e=b.el;var d=c.prototype;var f=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("DialogUI").Extend(d).Constructor(function(h){d.constructor.call(this,h)}).Static({createUI:function(h){return new f(h)}}).Members({updateElement:function(k,j){d.updateElement.apply(this,arguments);if(k==="visible"){var h=this.getElement();if(j){this.hideFloat(h);this.center()}else{this.showFloat(h)}}},hideFloat:function(k){if(g.name==="IE"&&g.version==="6.0"){var s=k;var h=null,q=null;var n=null;var o=null,m=null,l=null,p=null;for(var r in this.elementVisible){h=document.getElementsByTagName(r);q=s.getElementsByTagName(r);for(o=0,l=h.length;o<l;o++){n=h.item(o);for(m=0,p=q.length;m<p;m++){if(n===q.item(m)){break}}if(m===p){this.elementVisible[r].push(n.style.visibility);n.style.visibility="hidden"}}}}},showFloat:function(k){if(g.name==="IE"&&g.version==="6.0"){var r=k;var h=null,q=null;var n=null;for(var s in this.elementVisible){h=document.getElementsByTagName(s);q=r.getElementsByTagName(s);for(var o=0,l=h.length;o<l;o++){n=h.item(o);for(var m=0,p=q.length;m<p;m++){if(n===q.item(m)){break}}if(m===p){n.style.visibility=this.elementVisible[s][o]}}}}},center:function(){e(this.getElement()).center()}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.DropDownMenuItemUI",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.Utils.DOMUtil","Indigox.Web.JsLib.UI.Renderer","Indigox.Web.JsLib.UI.RendererCache","Indigox.Web.JsLib.UI.DomReader","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.UI.ControlUIs.NodeControlUI","Indigox.Web.JsLib.Core"],function(k,g,h,l,j,d,c,e){var b=e.prototype;var f=c.el;var a=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("DropDownMenuItemUI").Extend(b).Constructor(function(m){b.constructor.call(this,m)}).Static({createUI:function(m){return new a(m)}}).Members({onLoaded:function(m){var o=this.getMediator();var n=document.body;f(n).addListener("mousedown",o.onMouseDown,o,[this]);b.onLoaded.apply(this,arguments)},dispose:function(){var n=this.getMediator();var m=document.body;f(m).removeListener("mousedown",n.onMouseDown);b.dispose.apply(this,arguments)}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.EditableCellUI",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","Indigox.Web.JsLib.Core"],function(b,d,c){var e=c.prototype;var a=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("EditableCellUI").Extend(e).Constructor(function(f){e.constructor.call(this,f)}).Static({createUI:function(f){return new a(f)}}).Members({createChildrenUI:function(){var j=this.getControl();var k,g,f,h;k=j.getEditingControl();if(k){g=b.getInstance().createUI(k);if(k.isInited()){g.init()}}},renderChildren:function(){var k=this.getControl();var j=new d(k,this.getMapping());var l,g,f,h;l=k.getEditingControl();if(l){g=b.getInstance().getUI(l);g.render();g.replaceWith(j,"editingControl")}},setChildrenRendered:function(){var j=this.getControl();var k,g,f,h;k=j.getEditingControl();if(k){g=b.getInstance().getUI(k);g.setRendered()}},disposeChildren:function(){var j=this.getControl();var k,g,f,h;k=j.getEditingControl();if(k){g=b.getInstance().getUI(k);g.dispose()}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.EditableRowUI",["Indigox.Web.JsLib.Utils.DOMUtil","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.Controls.Grid.EditableCell","Indigox.Web.JsLib.UI.ControlUIs.GridRowUI","Indigox.Web.JsLib.Core"],function(b,a,f,e){var d=e.prototype;var c=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("EditableRowUI").Extend(d).Constructor(function(g){d.constructor.call(this,g)}).Static({createUI:function(g){return new c(g)}}).Members({onEdit:function(g,q,u){var p=a.getInstance();var j=p.getUI(q).getElement();var l=b.getRelativePosition(j);this.getElement().style.position="absolute";this.getElement().style.top=l.Y+"px";this.getElement().style.left=l.X+"px";var s=q.getCells();var o=this.getControl();for(var n=0,k=s.length;n<k;n++){var m=s[n];if(!(m instanceof f)){var r=m.getColumn().getField();var t=o.cellMapping[r];var h=p.getUI(m).getElement().clientWidth;p.getUI(t).getElement().style.width=h+"px"}}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.FileUploadItemUI",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","Indigox.Web.JsLib.Core"],function(b,d,c){var e=c.prototype;var a=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("FileUploadItemUI").Extend(e).Constructor(function(f){e.constructor.call(this,f)}).Static({createUI:function(f){return new a(f)}}).Members({createChildrenUI:function(){var j=this.getControl();var k,g,f,h;k=j.getFileUpload();if(k){g=b.getInstance().createUI(k);if(k.isInited()){g.init()}}},renderChildren:function(){var k=this.getControl();var j=new d(k,this.getMapping());var l,g,f,h;l=k.getFileUpload();if(l){g=b.getInstance().getUI(l);g.render();g.replaceWith(j,"fileUpload")}},setChildrenRendered:function(){var j=this.getControl();var k,g,f,h;k=j.getFileUpload();if(k){g=b.getInstance().getUI(k);g.setRendered()}},disposeChildren:function(){var j=this.getControl();var k,g,f,h;k=j.getFileUpload();if(k){g=b.getInstance().getUI(k);g.dispose()}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.FileUploadUI",["Indigox.Web.JsLib.Serialization.JsonSerializer","Indigox.Web.JsLib.Connection.Ajax","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","jquery","Indigox.Web.JsLib.Core"],function(l,b,k,e,d,n){var j={progress:0,fileName:"",uploadedFiles:[],errorFiles:[]},c="__uploadFrame__",g="_identity";var h=(function(){var o=0;return{next:function(){return o++}}}());var m=new l();var a=d.prototype;var f=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("FileUploadUI").Extend(a).Constructor(function(o){a.constructor.call(this,o);this.frameName=c+h.next()}).Static({createUI:function(o){return new f(o)},settings:{queryUrl:"/editor/attachments/UploadProgress.ashx",uploadUrl:"/editor/attachments/upload.htm"}}).Members({createChildrenUI:function(){var r=this.getControl();var s,p,o,q;s=r.getProgressBar();if(s){p=k.getInstance().createUI(s);if(s.isInited()){p.init()}}},renderChildren:function(){var s=this.getControl();var r=new e(s,this.getMapping());var t,p,o,q;t=s.getProgressBar();if(t){p=k.getInstance().getUI(t);p.render();p.replaceWith(r,"progressBar")}},setChildrenRendered:function(){var r=this.getControl();var s,p,o,q;s=r.getProgressBar();if(s){p=k.getInstance().getUI(s);p.setRendered()}},disposeChildren:function(){var r=this.getControl();var s,p,o,q;s=r.getProgressBar();if(s){p=k.getInstance().getUI(s);p.dispose()}},interval:null,hidUploadFrameAdded:false,frameName:null,onUploadBegin:function(o,p){this.submitForm(o);this.createInterval(o,function(){o.fireListener("StateChanged")})},onStateChanged:function(o,p){this.queryState(o)},onUploadCompleted:function(o,p){this.cancelInterval(o)},onUploadErrorCompleted:function(o,p){this.cancelInterval(o)},onCanceled:function(o,p){this.cancelInterval(o);this.stopFrameRequest(o)},createInterval:function(p,o){if(this.hasInterval(p)){throw ("the interval already created, please review your code.")}this.interval=window.setInterval(o,1000)},cancelInterval:function(o){if(this.hasInterval(o)){this.interval=window.clearInterval(this.interval)}},hasInterval:function(o){return(false||this.interval)},submitForm:function(t){var r=this.getElement();var s=r.getElementsByTagName("form")[0];var o=this.frameName;var q=' style="width: 0px; height: 0px; visibility: hidden;"';if(!this.hidUploadFrameAdded){n(document.body).append('<iframe id="'+o+'" name="'+o+'"'+q+"></iframe>");this.hidUploadFrameAdded=true}s.target=o;s.action=f.settings.uploadUrl;s.method="POST";s.enctype="multipart/form-data";s.encoding="multipart/form-data";var p=n('<input type="hidden" name="uploadProgressIdentity" value="::DJ_UPLOAD_ID::'+t.uniqueIdentifier+'" />');n(s).prepend(p);s.submit();p.remove()},queryState:function(p){var o=new b({url:f.settings.queryUrl,data:{DJUploadStatus:"::DJ_UPLOAD_ID::"+p.uniqueIdentifier,rnd:Math.random().toString().replace(".","")}});o.send().done(function(q){var s=m.deserialize(q);if(s.empty){p.setProgress(0)}else{p.setProgress(s.progress);if(s.uploadedFiles&&s.uploadedFiles.length===1){var r=s.uploadedFiles[0];p.setValue(r);p.complete()}else{if(s.errorFiles&&s.errorFiles.length===1){p.error("upload faild.")}}}this.isQuerying=false}).fail(function(q){p.error("web error: "+q);this.isQuerying=false})},stopFrameRequest:function(p){var o=this.frameName;var q=window.frames[o];q.location.replace("about:blank")}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.GridRowUI",["Indigox.Web.JsLib.UI.ControlUI","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.Core"],function(b,a,c){var e=b.prototype;var d=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("GridRowUI").Extend(e).Constructor(function(f){e.constructor.call(this,f)}).Static({createUI:function(f){return new d(f)}}).Members({onCellAdding:function(h,f,j){if(!this.isInited()){return}var g=a.getInstance().createUI(j);if(j.isInited()){g.init()}},onCellAdded:function(g,f,h){this.insertChildElement("cells",f,h)},onCellRemoving:function(g,f,h){},onCellRemoved:function(g,f,h){this.removeChildElement("cells",f,h)},createChildrenUI:function(){var k=this.getControl();var h,l,g,f,j;h=k.getCells();for(f=0,j=h.length;f<j;f++){l=h[f];g=a.getInstance().createUI(l);if(l.isInited()){g.init()}}},renderChildren:function(){var l=this.getControl();var k=new c(l,this.getMapping());var h,m,g,f,j;h=l.getCells();for(f=0,j=h.length;f<j;f++){m=h[f];g=a.getInstance().getUI(m);g.render();g.insertInto(k,"cells",f)}},setChildrenRendered:function(){var k=this.getControl();var h,l,g,f,j;h=k.getCells();for(f=0,j=h.length;f<j;f++){l=h[f];g=a.getInstance().getUI(l);g.setRendered()}},disposeChildren:function(){var k=this.getControl();var h,l,g,f,j;h=k.getCells();for(f=0,j=h.length;f<j;f++){l=h[f];g=a.getInstance().getUI(l);g.dispose()}},setRendered:function(){e.setRendered.apply(this,arguments)}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.GridViewUI",["Indigox.Web.JsLib.UI.Overlay","Indigox.Web.JsLib.UI.ControlUI","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.RenderQueue","Indigox.Web.JsLib.Core"],function(a,c,b,e,d){var f=c.prototype;var g=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("GridViewUI").Extend(f).Constructor(function(h){f.constructor.call(this,h)}).Static({createUI:function(h){return new g(h)}}).Members({createChildrenUI:function(){var m=this.getControl();var k,n,j,h,l;n=m.getHeader();if(n){j=b.getInstance().createUI(n);if(n.isInited()){j.init()}}k=m.getRows();for(h=0,l=k.length;h<l;h++){n=k[h];j=b.getInstance().createUI(n);if(n.isInited()){j.init()}}k=m.getFooters();for(h=0,l=k.length;h<l;h++){n=k[h];j=b.getInstance().createUI(n);if(n.isInited()){j.init()}}},renderChildren:function(){var n=this.getControl();var m=new e(n,this.getMapping());var k,o,j,h,l;o=n.getHeader();if(o){j=b.getInstance().getUI(o);j.render();j.replaceWith(m,"header")}k=n.getRows();for(h=0,l=k.length;h<l;h++){o=k[h];j=b.getInstance().getUI(o);j.render();j.insertInto(m,"rows",h)}k=n.getFooters();for(h=0,l=k.length;h<l;h++){o=k[h];j=b.getInstance().getUI(o);j.render();j.insertInto(m,"footers",h)}},setChildrenRendered:function(){var m=this.getControl();var k,n,j,h,l;n=m.getHeader();if(n){j=b.getInstance().getUI(n);j.setRendered()}k=m.getRows();for(h=0,l=k.length;h<l;h++){n=k[h];j=b.getInstance().getUI(n);j.setRendered()}k=m.getFooters();for(h=0,l=k.length;h<l;h++){n=k[h];j=b.getInstance().getUI(n);j.setRendered()}},disposeChildren:function(){var m=this.getControl();var k,n,j,h,l;n=m.getHeader();if(n){j=b.getInstance().getUI(n);j.dispose()}k=m.getRows();for(h=0,l=k.length;h<l;h++){n=k[h];j=b.getInstance().getUI(n);j.dispose()}k=m.getFooters();for(h=0,l=k.length;h<l;h++){n=k[h];j=b.getInstance().getUI(n);j.dispose()}},insertChildElement:function(j,h,k){f.insertChildElement.apply(this,arguments)},onRowAdding:function(k,h,l){if(!this.isInited()){return}var j=b.getInstance().createUI(l);if(l.isInited()){j.init()}},onRowAdded:function(j,h,k){this.insertChildElement("rows",h,k)},onRowRemoving:function(j,h,k){},onRowRemoved:function(j,h,k){this.removeChildElement("rows",h,k)},onFooterAdding:function(k,h,l){if(!this.isInited()){return}var j=b.getInstance().createUI(l);if(l.isInited()){j.init()}},onFooterAdded:function(j,h,k){this.insertChildElement("footers",h,k)},onFooterRemoving:function(j,h,k){},onFooterRemoved:function(j,h,k){this.removeChildElement("footers",h,k)},onLoading:function(){f.onLoading.apply(this,arguments)},enterFullView:function(h){a.getInstance().overlay(this.getElement())},leaveFullView:function(h){a.getInstance().restore(this.getElement())}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.HierarchyControlUI",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.ControlUI","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.RenderQueue","Indigox.Web.JsLib.UI.ChildAddedChange","Indigox.Web.JsLib.UI.ChildRemovedChange","Indigox.Web.JsLib.Core"],function(c,b,e,d,h,a){var f=b.prototype;var g=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("HierarchyControlUI").Extend(f).Constructor(function(j){f.constructor.call(this,j)}).Static({createUI:function(j){return new g(j)}}).Members({onNodeAdding:function(l,j,m){if(!this.isInited()){return}var k=c.getInstance().createUI(m);if(m.isInited()){k.init()}if(this.getElement()&&this.isRenderedToDocument()){d.getInstance().addListener(this,{onRendered:this.swap});this.fakeup()}},onNodeAdded:function(k,j,l){this.insertChildElement("childNodes",j,l)},onNodeRemoving:function(k,j,l){if(this.getElement()&&this.isRenderedToDocument()){d.getInstance().addListener(this,{onRendered:this.swap});this.fakeup()}},onNodeRemoved:function(k,j,l){this.removeChildElement("childNodes",j,l)},onLoading:function(){f.onLoading.apply(this,arguments);if(this.getElement()&&this.isRenderedToDocument()){d.getInstance().addListener(this,{onRendered:this.swap});this.fakeup()}},createChildrenUI:function(){var n=this.getControl();var l,o,k,j,m;l=n.getChildNodes();for(j=0,m=l.length;j<m;j++){o=l[j];k=c.getInstance().createUI(o);if(o.isInited()){k.init()}}},renderChildren:function(){var o=this.getControl();var n=new e(o,this.getMapping());var l,p,k,j,m;l=o.getChildNodes();for(j=0,m=l.length;j<m;j++){p=l[j];k=c.getInstance().getUI(p);k.render();k.insertInto(n,"childNodes",j)}},setChildrenRendered:function(){var n=this.getControl();var l,o,k,j,m;l=n.getChildNodes();for(j=0,m=l.length;j<m;j++){o=l[j];k=c.getInstance().getUI(o);k.setRendered()}},disposeChildren:function(){var n=this.getControl();var l,o,k,j,m;l=n.getChildNodes();for(j=0,m=l.length;j<m;j++){o=l[j];k=c.getInstance().getUI(o);k.dispose()}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.ListControlUI",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.ControlUI","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.RenderQueue","Indigox.Web.JsLib.UI.ChildAddedChange","Indigox.Web.JsLib.UI.ChildRemovedChange","Indigox.Web.JsLib.Core"],function(c,b,f,e,h,a){var g=b.prototype;var d=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("ListControlUI").Extend(g).Constructor(function(j){g.constructor.call(this,j)}).Static({createUI:function(j){return new d(j)}}).Members({onItemAdding:function(l,j,m){if(!this.isInited()){return}var k=c.getInstance().createUI(m);if(m.isInited()){k.init()}},onItemAdded:function(k,j,l){this.insertChildElement("items",j,l)},onItemRemoving:function(k,j,l){},onItemRemoved:function(k,j,l){this.removeChildElement("items",j,l)},createChildrenUI:function(){var n=this.getControl();var l,o,k,j,m;l=n.getItems();for(j=0,m=l.length;j<m;j++){o=l[j];k=c.getInstance().createUI(o);if(o.isInited()){k.init()}}},renderChildren:function(){var o=this.getControl();var n=new f(o,this.getMapping());var l,p,k,j,m;l=o.getItems();for(j=0,m=l.length;j<m;j++){p=l[j];k=c.getInstance().getUI(p);k.render();k.insertInto(n,"items",j)}},setChildrenRendered:function(){var n=this.getControl();var l,o,k,j,m;l=n.getItems();for(j=0,m=l.length;j<m;j++){o=l[j];k=c.getInstance().getUI(o);k.setRendered()}},disposeChildren:function(){var n=this.getControl();var l,o,k,j,m;l=n.getItems();for(j=0,m=l.length;j<m;j++){o=l[j];k=c.getInstance().getUI(o);k.dispose()}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.LiteralUI",["Indigox.Web.JsLib.Utils.Browser","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.UI.DomReader","Indigox.Web.JsLib.Utils.DOMUtil","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.UI.Renderer","Indigox.Web.JsLib.UI.RendererCache","Indigox.Web.JsLib.UI.Visitors.BuildRendererVisitor","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.Manipulators.HTMLManipulator","Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","Indigox.Web.JsLib.Core"],function(o,c,j,f,l,g,n,a,k,m,d){var o=o.getInstance(),e=c.el;var b=d.prototype;var h=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("LiteralUI").Extend(b).Constructor(function(p){b.constructor.call(this,p)}).Static({createUI:function(p){return new h(p)}}).Members({updateElement:function(q,p){if(q==="html"){f.setAttribute(this.getElement(),"innerHTML",this.getControl().getHtml())}else{b.updateElement.apply(this,arguments)}},getMapping:function(){if(!this.mapping){this.mapping=this.buildMapping();var p=new m(this.getElement(),"innerHTML");this.mapping["${html}"]=[p]}return this.mapping},renderHtml:function(){var q=this.control,s=this.getSchema();var u=n.getInstance().get(s);if(u===null){u=new g();var t=new a(q,s,u);t.visit();n.getInstance().put(s,u)}var p=[];u.renderHtml(q,p);var r=p.length;p.splice(r-1,0,this.getControl().getHtml());this.setElement(f.buildElement(p.join("")))}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.LoadMaskUI",["Indigox.Web.JsLib.Utils.Browser","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.UI.ControlUI","Indigox.Web.JsLib.Core"],function(g,a,b){var g=g.getInstance(),f=a.el;var e={"6.0":true,"7.0":true};var d=b.prototype;var c=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("LoadMaskUI").Extend(d).Constructor(function(h){d.constructor.call(this,h)}).Static({createUI:function(h){return new c(h)}}).Members({onShow:function(h){if(g.name==="IE"&&g.version in e){document.documentElement.style.overflow="visible"}},onHide:function(h){if(g.name==="IE"&&g.version in e){document.documentElement.style.removeAttribute("overflow")}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.LyncContactUI",["Indigox.Web.JsLib.Utils.LyncUtil","Indigox.Web.JsLib.DOM.Effect","Indigox.Web.JsLib.UI.Mediators.LyncContactMediator","Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","Indigox.Web.JsLib.Core"],function(c,a,g,f,b){var d=b.prototype;var e=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("LyncContactUI").Extend(d).Constructor(function(h){d.constructor.call(this,h)}).Static({createUI:function(h){return new e(h)}}).Members({onLoaded:function(j){d.onLoaded.apply(this,arguments);c.addListener(this);var h=this.getControl().getValue();if(h){this.getControl().setPresence(c.getPresence(h.Email))}},onUnload:function(){d.onUnload.apply(this,arguments);c.removeListener(this)},onLyncStatusChange:function(l,k,j){var h=this.getControl().getValue();if(!h){return}if(k==h.Email){this.getControl().setPresence(j)}},updateElement:function(k,j){var h=this.getControl().getValue();if(k==="value"){if(h){this.getControl().setPresence(c.getPresence(h.Email))}}else{d.updateElement.apply(this,arguments)}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.MenuUI",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Utils.DOMUtil","Indigox.Web.JsLib.UI.Renderer","Indigox.Web.JsLib.UI.RendererCache","Indigox.Web.JsLib.UI.DomReader","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.ControlUIs.HierarchyControlUI","Indigox.Web.JsLib.Core"],function(g,f,c,d,j,e,b,h){var a=h.prototype;var k=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("MenuUI").Extend(a).Constructor(function(l){a.constructor.call(this,l)}).Static({createUI:function(l){return new k(l)}}).Members({parseElement:function(){var n=this.getElement();if(f.trim(c.getAttribute(n,"innerHTML"))==""){var m=this.buildHtml();var l=c.getAttribute(c.buildElement(m.join("")),"innerHTML");c.setAttribute(n,"innerHTML",l)}a.parseElement.apply(this,arguments)}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.NodeControlUI",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.ChildAddedChange","Indigox.Web.JsLib.UI.ChildRemovedChange","Indigox.Web.JsLib.DOM.Effect","Indigox.Web.JsLib.UI.ControlUI","Indigox.Web.JsLib.Core"],function(e,f,h,d,a,c){var g=c.prototype;var b=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("NodeControlUI").Extend(g).Constructor(function(j){g.constructor.call(this,j)}).Static({createUI:function(j){return new b(j)}}).Members({onNodeAdding:function(l,j,m){if(!this.isInited()){return}var k=e.getInstance().createUI(m);if(m.isInited()){k.init()}},onNodeAdded:function(k,j,l){this.insertChildElement("childNodes",j,l)},onNodeRemoving:function(k,j,l){},onNodeRemoved:function(k,j,l){this.removeChildElement("childNodes",j,l)},createChildrenUI:function(){var n=this.getControl();var l,o,k,j,m;l=n.getChildNodes();for(j=0,m=l.length;j<m;j++){o=l[j];k=e.getInstance().createUI(o);if(o.isInited()){k.init()}}},renderChildren:function(){var o=this.getControl();var n=new f(o,this.getMapping());var l,p,k,j,m;l=o.getChildNodes();for(j=0,m=l.length;j<m;j++){p=l[j];k=e.getInstance().getUI(p);k.render();k.insertInto(n,"childNodes",j)}},setChildrenRendered:function(){var n=this.getControl();var l,o,k,j,m;l=n.getChildNodes();for(j=0,m=l.length;j<m;j++){o=l[j];k=e.getInstance().getUI(o);k.setRendered()}},disposeChildren:function(){var n=this.getControl();var l,o,k,j,m;l=n.getChildNodes();for(j=0,m=l.length;j<m;j++){o=l[j];k=e.getInstance().getUI(o);k.dispose()}},onExpanded:function(j){},onCollapsed:function(j){}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs",["Indigox.Web.JsLib.UI.ControlUIs.AutoCompleteBoxUI","Indigox.Web.JsLib.UI.ControlUIs.AutoCompleteItemUI","Indigox.Web.JsLib.UI.ControlUIs.BadgeLinkMenuItemUI","Indigox.Web.JsLib.UI.ControlUIs.CheckBoxItemUI","Indigox.Web.JsLib.UI.ControlUIs.ContentUI","Indigox.Web.JsLib.UI.ControlUIs.ComboBoxUI","Indigox.Web.JsLib.UI.ControlUIs.DataItemUI","Indigox.Web.JsLib.UI.ControlUIs.DataListUI","Indigox.Web.JsLib.UI.ControlUIs.DatePickerUI","Indigox.Web.JsLib.UI.ControlUIs.DialogMobileUI","Indigox.Web.JsLib.UI.ControlUIs.DialogUI","Indigox.Web.JsLib.UI.ControlUIs.DropDownMenuItemUI","Indigox.Web.JsLib.UI.ControlUIs.EditableCellUI","Indigox.Web.JsLib.UI.ControlUIs.EditableRowUI","Indigox.Web.JsLib.UI.ControlUIs.FileUploadItemUI","Indigox.Web.JsLib.UI.ControlUIs.FileUploadUI","Indigox.Web.JsLib.UI.ControlUIs.GridRowUI","Indigox.Web.JsLib.UI.ControlUIs.GridViewUI","Indigox.Web.JsLib.UI.ControlUIs.HierarchyControlUI","Indigox.Web.JsLib.UI.ControlUIs.ListControlUI","Indigox.Web.JsLib.UI.ControlUIs.LiteralUI","Indigox.Web.JsLib.UI.ControlUIs.LoadMaskUI","Indigox.Web.JsLib.UI.ControlUIs.LyncContactUI","Indigox.Web.JsLib.UI.ControlUIs.MenuUI","Indigox.Web.JsLib.UI.ControlUIs.NodeControlUI","Indigox.Web.JsLib.UI.ControlUIs.PageUI","Indigox.Web.JsLib.UI.ControlUIs.PagingMobileUI","Indigox.Web.JsLib.UI.ControlUIs.PagingUI","Indigox.Web.JsLib.UI.ControlUIs.PanelUI","Indigox.Web.JsLib.UI.ControlUIs.RadioBoxItemUI","Indigox.Web.JsLib.UI.ControlUIs.RichTextViewUI","Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","Indigox.Web.JsLib.UI.ControlUIs.TemplateUI","Indigox.Web.JsLib.UI.ControlUIs.TinyMceUI","Indigox.Web.JsLib.UI.ControlUIs.TooltipUI","Indigox.Web.JsLib.UI.ControlUIs.UserSelectMobileUI","Indigox.Web.JsLib.UI.ControlUIs.UUMUserSelectUI","Indigox.Web.JsLib.UI.ControlUIs.UUVUserSelectUI","Indigox.Web.JsLib.UI.ControlUIs.ValidatorUI","Indigox.Web.JsLib.UI.ControlUIs.WidgetUI","Indigox.Web.JsLib.UI.ControlUIs.WidgetZoneUI"],function(D,r,k,P,N,m,b,u,g,G,h,w,t,s,z,c,K,A,l,J,C,q,y,j,I,H,F,E,B,M,f,O,L,e,o,v,d,p,n,a,x){return{AutoCompleteBoxUI:D,AutoCompleteItemUI:r,BadgeLinkMenuItemUI:k,CheckBoxItemUI:P,ContentUI:N,ComboBoxUI:m,DataItemUI:b,DataListUI:u,DatePickerUI:g,DialogMobileUI:G,DialogUI:h,DropDownMenuItemUI:w,EditableCellUI:t,EditableRowUI:s,FileUploadItemUI:z,FileUploadUI:c,GridRowUI:K,GridViewUI:A,HierarchyControlUI:l,ListControlUI:J,LiteralUI:C,LoadMaskUI:q,LyncContactUI:y,MenuUI:j,NodeControlUI:I,PageUI:H,PagingMobileUI:F,PagingUI:E,PanelUI:B,RadioBoxItemUI:M,RichTextViewUI:f,SimpleControlUI:O,TemplateUI:L,TinyMceUI:e,TooltipUI:o,UserSelectMobileUI:v,UUMUserSelectUI:d,UUVUserSelectUI:p,ValidatorUI:n,WidgetUI:a,WidgetZoneUI:x}});define("Indigox.Web.JsLib.UI.ControlUIs.PageUI",["Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Utils.DOMUtil","Indigox.Web.JsLib.UI.RenderQueue","Indigox.Web.JsLib.UI.Visitors.ManipulatorVisitor","Indigox.Web.JsLib.Controls.Html.LoadMask","Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","Indigox.Web.JsLib.Core"],function(f,g,c,j,e,h,b){var a=b.prototype;var d=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("PageUI").Extend(a).Constructor(function(k){a.constructor.call(this,k)}).Static({createUI:function(k){return new d(k)}}).Members({onLoading:function(k){a.onLoading.apply(this,arguments);debug.time("Page Load");j.getInstance().begin();this.getControl().mask()},onLoaded:function(k){a.onLoaded.apply(this,arguments);j.getInstance().end();debug.timeEnd("Page Load");this.getControl().unmask();this.getControl().getLoadMask().setMode(h.TRANSPARENT);window.setTimeout("scroll(0,0);",100)},onUnload:function(k){this.dispose()},buildMapping:function(){var l=new e(this.getControl(),this.getSchema(),this.getElement(),this.getMediator(),this);var k=l.visit();return k}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.PagingMobileUI",["Indigox.Web.JsLib.Utils.DOMUtil","Indigox.Web.JsLib.UI.RenderQueue","Indigox.Web.JsLib.UI.ControlUIs.PagingUI","Indigox.Web.JsLib.Core"],function(b,c,d){var e=d.prototype;var a=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("PagingMobileUI").Extend(e).Constructor(function(f){e.constructor.call(this,f);this.working=false}).Static({createUI:function(f){return new a(f)}}).Members({parseElement:function(h){if(b.getAttribute(h,"innerHTML")==""){var g=this.buildHtml();var f=b.getAttribute(b.buildElement(g.join("")),"innerHTML");b.setAttribute(h,"innerHTML",f)}e.parseElement.apply(this,arguments)},updateElement:function(h,g){e.updateElement.apply(this,arguments);if(h=="isLastPage"){if(g==true){var f=this.getElement();b.setAttribute(b.element(".nextpage",f),"innerHTML","全部数据加载完成")}else{var f=this.getElement();b.setAttribute(b.element(".nextpage",f),"innerHTML","更多")}}if(h=="modelLoading"){if(g==true){c.getInstance().addListener(this,{onRender:this.fakeup,onRendered:this.swap})}else{debug.log(this.working);if(this.working==false){c.getInstance().removeListener(this)}}}},swap:function(){e.swap.apply(this,arguments);this.working=false},fakeup:function(){e.fakeup.apply(this,arguments);this.working=true}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.PagingUI",["Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Utils.DOMUtil","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.UI.DomReader","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.Renderer","Indigox.Web.JsLib.UI.Schemas.EventSchema","Indigox.Web.JsLib.UI.RendererCache","Indigox.Web.JsLib.UI.Visitors.MappingVisitor","Indigox.Web.JsLib.UI.Visitors.EventVisitor","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.ControlUI","Indigox.Web.JsLib.Core"],function(p,t,o,n,g,q,u,d,r,c,v,j){var m=0,s=1,k=2,l=3,f=4,a=5;var b=o.el;var e=j.prototype;var h=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("PagingUI").Extend(e).Constructor(function(w){e.constructor.call(this,w)}).Static({createUI:function(w){return new h(w)}}).Members({parseElement:function(){var y=this.getElement();if(p.trim(t.getAttribute(y,"innerHTML"))==""){var x=this.buildHtml();var w=t.getAttribute(t.buildElement(x.join("")),"innerHTML");t.setAttribute(y,"innerHTML",w)}e.parseElement.apply(this,arguments)},buildMapping:function(){var x=new r(this.getControl(),this.getSchema(),this.getElement());var w=x.visit();return w}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.PanelUI",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomReader","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.RenderQueue","Indigox.Web.JsLib.UI.ControlUI","Indigox.Web.JsLib.Core"],function(b,g,d,c,a){var e=a.prototype;var f=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("PanelUI").Extend(e).Constructor(function(h){e.constructor.call(this,h)}).Static({createUI:function(h){return new f(h)}}).Members({onChildAdding:function(){e.onChildAdding.apply(this,arguments);if(this.getElement()&&this.isRenderedToDocument()){c.getInstance().addListener(this,{onRendered:this.swap});this.fakeup()}},onChildRemoving:function(){e.onChildRemoving.apply(this,arguments);if(this.getElement()&&this.isRenderedToDocument()){c.getInstance().addListener(this,{onRendered:this.swap});this.fakeup()}},onLoading:function(){e.onLoading.apply(this,arguments);if(this.getElement()&&this.isRenderedToDocument()){c.getInstance().addListener(this,{onRendered:this.swap});this.fakeup()}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.RadioBoxItemUI",["Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.Core"],function(c,a,d){var e=c.prototype;var b=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("RadioBoxItemUI").Extend(e).Constructor(function(f){e.constructor.call(this,f)}).Static({createUI:function(f){return new b(f)}}).Members({createChildrenUI:function(){var j=this.getControl();var k,g,f,h;k=j.getRadioBox();if(k){g=a.getInstance().createUI(k);if(k.isInited()){g.init()}}},renderChildren:function(){var k=this.getControl();var j=new d(k,this.getMapping());var l,g,f,h;l=k.getRadioBox();if(l){g=a.getInstance().getUI(l);g.render();g.replaceWith(j,"radioBox")}},setChildrenRendered:function(){var j=this.getControl();var k,g,f,h;k=j.getRadioBox();if(k){g=a.getInstance().getUI(k);g.setRendered()}},disposeChildren:function(){var j=this.getControl();var k,g,f,h;k=j.getRadioBox();if(k){g=a.getInstance().getUI(k);g.dispose()}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.RichTextViewUI",["Indigox.Web.JsLib.Utils.Browser","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Utils.DOMUtil","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.UI.DomReader","Indigox.Web.JsLib.UI.Overlay","Indigox.Web.JsLib.UI.Renderer","Indigox.Web.JsLib.UI.RendererCache","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.Visitors.BuildRendererVisitor","Indigox.Web.JsLib.Manipulators.HTMLManipulator","Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","Indigox.Web.JsLib.Core"],function(p,d,g,l,j,b,h,o,k,a,n,e){var p=p.getInstance(),f=d.el;var c=e.prototype;var m=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("RichTextViewUI").Extend(c).Constructor(function(q){c.constructor.call(this,q)}).Static({createUI:function(q){return new m(q)}}).Members({getMapping:function(){if(!this.mapping){this.mapping=this.buildMapping();var q=new n(this.getElement().children[1],"innerHTML");this.mapping["${value}"]=[q]}return this.mapping},renderHtml:function(){var r=this.control,t=this.getSchema();var v=o.getInstance().get(t);if(v===null){v=new h();var u=new a(r,t,v);u.visit();o.getInstance().put(t,v)}var q=[];v.renderHtml(r,q);var s=q.length;q.splice(s-2,0,this.getControl().getHtml());this.setElement(g.buildElement(q.join("")))},enterFullView:function(q){b.getInstance().overlay(this.getElement())},leaveFullView:function(q){b.getInstance().restore(this.getElement())}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI",["Indigox.Web.JsLib.UI.ControlUI","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("SimpleControlUI").Extend(c).Constructor(function(d){c.constructor.call(this,d)}).Static({createUI:function(d){return new b(d)}}).Members({}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.TemplateUI",["Indigox.Web.JsLib.UI.SchemaRegistry","Indigox.Web.JsLib.UI.SchemaFactory","Indigox.Web.JsLib.UI.DomReader","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.Visitors.ManipulatorVisitor","Indigox.Web.JsLib.UI.ControlUI","Indigox.Web.JsLib.Core"],function(g,e,h,b,f,a){var d=a.prototype;var c=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("TemplateUI").Extend(d).Constructor(function(j){d.constructor.call(this,j)}).Static({createUI:function(j){return new c(j)}}).Members({getSchema:function(){if(this.schema==null){var j=new e(this.getElement());var k=j.createSchema();this.schema=k;g.getInstance().register(this.getControl(),k)}return this.schema},buildMapping:function(){var k=new f(this.getControl(),this.getSchema(),this.getElement(),this.getMediator(),this);var j=k.visit();return j},getMediator:function(){return null},render:function(){},insertInto:function(){},replaceWith:function(){},removeFrom:function(){d.removeFrom.apply(this,arguments)},insertChildElement:function(){},removeChildElement:function(){}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.TinyMceUI",["Indigox.Web.JsLib.Utils.DelayedTask","Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","tinymce","Indigox.Web.JsLib.Core"],function(f,c){var a=window.document;var b=(typeof tinyMCE!=="undefined");var e=c.prototype;function g(l,j,k,m){var h="/editor/tinymce/customfileupload.htm";if(h.indexOf("?")<0){h=h+"?type="+k}else{h=h+"&type="+k}tinyMCE.activeEditor.windowManager.open({file:h,title:"File Upload",width:320,height:200,resizable:"yes",inline:"yes",close_previous:"no",popup_css:false},{window:m,input:l});return false}tinyMCE.init({mode:"none",theme:"advanced",plugins:"autolink,lists,table,inlinepopups,preview,media,searchreplace,contextmenu,paste,fullscreen,noneditable,xhtmlxtras,advlist",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,formatselect,fontselect,fontsizeselect,removeformat,|,forecolor,backcolor",theme_advanced_buttons2:"cut,copy,paste,pastetext,|,bullist,numlist,|,outdent,indent,|,link,unlink,image,|,search,replace,|,charmap,|,fullscreen,code",theme_advanced_buttons3:"",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"none",theme_advanced_resizing:true,theme_advanced_resize_horizontal:false,file_browser_callback:g,dialog_type:"modal",paste_auto_cleanup_on_paste:true,paste_strip_class_attributes:"all",paste_remove_styles_if_webkit:false,paste_retain_style_properties:"*",extended_valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang],-span[!style],-strong,#td[colspan|rowspan|align|valign|bgcolor|background|bordercolor|scope]",content_css:"/editor/tinymce/contents.css",theme_advanced_font_sizes:"一号=34px,小一=32px,二号=29px,小二=24px,三号=21px,小三=20px,四号=18px,小四=16px,五号=14px,小五=12px,六号=10px,小六=8px",theme_advanced_fonts:"宋体=宋体;楷体=楷体;黑体=黑体;华文行楷=华文行楷;华文细黑=华文细黑;华文新魏=华文新魏;微软雅黑=微软雅黑;Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_default_foreground_color:"#0000ff",theme_advanced_default_background_color:"#ffff99",convert_urls:false,language:"cn"});window.myFileBrowser=g;var d=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("TinyMceUI").Extend(e).Constructor(function(h){e.constructor.call(this,h);this.maxHeight=null;this.interval=null;this.updating=false;this.editorLoaded=false}).Static({createUI:function(h){return new d(h)}}).Members({setRendered:function(){e.setRendered.apply(this,arguments);if(this.isRendered()){if((this.getControl().mode.indexOf("html")>=0)&&b){this.initEditor()}}},onUnload:function(){if(this.editorLoaded){this.disposeEditor()}},onPropertyChanged:function(l,k,j,h){if(this.updating){return}e.onPropertyChanged.apply(this,arguments)},updateElement:function(l,k){if(l=="value"){var h=this.getElement();if(isNullOrUndefined(k)){k=""}if(this.editorLoaded===true){var j=tinyMCE.get(h.id);if(j){j.setContent(k)}else{h.value=k}}else{h.value=k}}else{if(l=="mode"){if(this.editorLoaded){throw new Error("不允许在富文本编辑控件加载后修改 mode 属性")}}else{e.updateElement.apply(this,arguments)}}},initEditor:function(){this.doInitEditor()},doInitEditor:function(){var h=this.getElement();var j=new tinyMCE.Editor(h.id,tinyMCE.settings);j.render();this.listenEditorValueChanged(j);this.editorLoaded=true},disposeEditor:function(){var h=this.getElement();var j=tinyMCE.get(h.id);j.destroy();this.editorLoaded=false},listenEditorValueChanged:function(h){var k=this.getControl();var j=this;h.onChange.add(function(n,m){j.updating=true;k.setValue(m.content);j.updating=false})}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.TooltipUI",["Indigox.Web.JsLib.Utils.DOMUtil","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.Utils.DelayedTask","Indigox.Web.JsLib.UI.ControlUI","Indigox.Web.JsLib.Core"],function(d,a,c,h,b){var g=a.el;var f=b.prototype;var e=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("TooltipUI").Extend(f).Constructor(function(j){f.constructor.call(this,j);this.showTask=null;this.hideTask=null;this.hoverControl=null}).Static({createUI:function(j){return new e(j)}}).Members({onShown:function(k,j,l){this.getElement().style.position="absolute";this.getElement().style.top=l+3+"px";this.getElement().style.left=j+"px"},onControlAdded:function(m,n){var l=c.getInstance().getUI(n);if(l){var k=l.getElement();g(k).addListener("mouseover",this.getMediator().onMouseOver,this.getMediator(),[this,n]);g(k).addListener("mouseout",this.getMediator().onMouseOut,this.getMediator(),[this,n])}else{var j=new h(function(){this.onControlAdded(m,n)},this,[m,n]);j.delay(100)}},show:function(k,j,l){if(this.hoverControl!=k){this.showTask=new h(function(m){m.showtip(j,l);this.showTask=null;this.hoverControl=m},this,[k]);this.showTask.delay(500)}else{if(this.hideTask){this.hideTask.cancel();this.hideTask=null}}},hide:function(j){if(this.hoverControl==j){this.hideTask=new h(function(k){k.hidetip();this.hideTask=null;this.hoverControl=null},this,[j]);this.hideTask.delay(500)}else{if(this.showTask){this.showTask.cancel();this.showTask=null}}},onUnload:function(){if(this.showTask){this.showTask.cancel();this.showTask=null}if(this.hideTask){this.hideTask.cancel();this.hideTask=null}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.UserSelectMobileUI",["Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomReader","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.Controls.Html.Dialog","Indigox.Web.JsLib.Controls.Widgets.WidgetZone","Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","Indigox.Web.JsLib.Core"],function(j,f,e,d,h,k,c){var b=c.prototype;var a=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("UserSelectMobileUI").Extend(b).Constructor(function(l){b.constructor.call(this,l)}).Static({createUI:function(l){return new a(l)}}).Members({onOpenDialog:function(l,n){var m=this.getControl();g(m.value,m.mode,m.multi,new j(this.onDialogClosed,this))},onDialogClosed:function(l,m){var o=this.getControl();if(l===h.DIALOG_RESULT_OK){var n=m;o.setValue(n)}}}).$();function g(n,p,o,q){var m=$.Dialog("userSelectDialog").first();if(m==null){var l=new k();l.name="UserSelectWidgetZone";Page().addChild(l);m=$.Dialog("userSelectDialog").first()}if(m==null){debug.error("can't find dialog.");return}m.open({value:n,mode:p,multi:o},q)}});define("Indigox.Web.JsLib.UI.ControlUIs.UUMUserSelectUI",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.ChildAddedChange","Indigox.Web.JsLib.UI.ChildRemovedChange","Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","Indigox.Web.JsLib.Core"],function(c,g,b,d){var e=d.prototype;var f=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("UUMUserSelectUI").Extend(e).Constructor(function(h){e.constructor.call(this,h)}).Static({createUI:function(h){return new f(h)}}).Members({onOpenDialog:function(j,l){var k=this.control;var h=a(k.value,k.mode,k.multi);if(h!=null){k.setValue(h)}}}).$();function a(n,m,l){var h="/UUM/Dialog.htm#/Selection/UserSelect.htm";var k="dialogWidth:800px;dialogHeight:560px";var j={value:n,mode:m,multi:l};return window.showModalDialog(h,j,k)}});define("Indigox.Web.JsLib.UI.ControlUIs.UUVUserSelectUI",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.ChildAddedChange","Indigox.Web.JsLib.UI.ChildRemovedChange","Indigox.Web.JsLib.UI.ControlUIs.SimpleControlUI","/editor/UUV/js/common.js","/editor/UUV/js/UUVSelectedCtrol.js","Indigox.Web.JsLib.Core"],function(b,g,a,d){var f=d.prototype;var c=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("UUVUserSelectUI").Extend(f).Constructor(function(h){f.constructor.call(this,h)}).Static({createUI:function(h){return new c(h)}}).Members({onOpenDialog:function(j,l){var k=this.control;var h=e(k.value,k.mode,k.multi);if(h!=null){k.setValue(h)}}}).$();function e(k,r,s){var w=[];var n=[];if(k){for(var p=0,l=k.length;p<l;p++){w.push(k[p].UserID);n.push(k[p].UserName)}}var q=r;var m="OR1000000000";var j="600";var x="600";var h="/editor/UUV/SelectUnify.aspx";var u=UUV_UcSelecting_ShowModalDialogSPRoot(h,m,w.join(","),n.join(","),s,q,j,x);if(isNullOrUndefined(u)||isNullOrUndefined(u.valueValue)){return null}if(""+u.valueValue===""){return[]}var t=u.valueValue.split(",");var o=u.textValue.split(",");var v=[];for(var p=0,l=t.length;p<l;p++){v.push({UserID:t[p],UserName:o[p]})}return v}});define("Indigox.Web.JsLib.UI.ControlUIs.ValidatorUI",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomReader","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.Utils.Browser","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.UI.ControlUI","Indigox.Web.JsLib.Core"],function(h,g,d,j,c,b){var j=j.getInstance(),f=c.el;var a=b.prototype;var e=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("ValidatorUI").Extend(a).Constructor(function(k){a.constructor.call(this,k)}).Static({createUI:function(k){return new e(k)}}).Members({hideFloat:function(l){if(j.name==="IE"&&j.version==="6.0"){var t=l;var k=null,r=null;var o=null;var p=null,n=null,m=null,q=null;for(var s in this.elementVisible){k=document.getElementsByTagName(s);r=t.getElementsByTagName(s);for(p=0,m=k.length;p<m;p++){o=k.item(p);for(n=0,q=r.length;n<q;n++){if(o===r.item(n)){break}}if(n===q){this.elementVisible[s].push(o.style.visibility);o.style.visibility="hidden"}}}}},showFloat:function(l){if(j.name==="IE"&&j.version==="6.0"){var s=l;var k=null,r=null;var o=null;for(var t in this.elementVisible){k=document.getElementsByTagName(t);r=s.getElementsByTagName(t);for(var p=0,m=k.length;p<m;p++){o=k.item(p);for(var n=0,q=r.length;n<q;n++){if(o===r.item(n)){break}}if(n===q){o.style.visibility=this.elementVisible[t][p]}}}}},updateElement:function(m,l){a.updateElement.apply(this,arguments);if(m==="visible"){var k=this.getElement();if(l){this.hideFloat(k);this.center()}else{this.showFloat(k)}}},center:function(){f(this.getElement()).center();f(this.getElement()).top()}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.WidgetResourceLoader",["Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Utils.ErrorHandler","Indigox.Web.JsLib.Core"],function(c,a){var b=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("WidgetResourceLoader").Constructor(function(d){this.widget=d}).Members({getWidget:function(){return this.widget},loadResources:function(){var f=this.getWidget();var d=new c();f.setPending(d);var g=f.getResources();if(g){var e=this;require(g,function(){var h=[].slice.call(arguments);e.afterLoadResources(h);d.resolve()})}d.done(function(){f.setPending(null)});return d.promise()},afterLoadResources:function(d){var e=this.getWidget();var f=e.getResources();this.invokeCallbacks(e,f,d)},invokeCallbacks:function(h,j,g){for(var e=0,f=g.length;e<f;e++){var k=g[e];if(typeof(k)!=="function"){debug.error("widget ["+h.name+"] resource ["+j[e]+"] is not a callback function.")}else{try{k(h)}catch(d){debug.error("Load widget ["+h.name+"] failed.");a.log(d)}}}}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.WidgetUI",["Indigox.Web.JsLib.Utils.DOMUtil","Indigox.Web.JsLib.Utils.ErrorHandler","Indigox.Web.JsLib.UI.Visitors.ManipulatorVisitor","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.ControlUIs.WidgetResourceLoader","Indigox.Web.JsLib.UI.ControlUI","Indigox.Web.JsLib.Core"],function(f,a,h,e,d,c){var g=c.prototype;var b=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("WidgetUI").Extend(g).Constructor(function(j){g.constructor.call(this,j)}).Static({createUI:function(j){return new b(j)}}).Members({init:function(){this.fillHtml();this.loadResources();g.init.apply(this,arguments)},fillHtml:function(){var j=this.buildHtml();this.setElement(f.buildElement(j.join("")));var k=this.getControl().getPresentation();if(!k){return}f.createElement(k,this.getElement())},loadResources:function(){var k=this.getControl();var j=new d(k);j.loadResources()},buildMapping:function(){var k=new h(this.getControl(),this.getSchema(),this.getElement(),this.getMediator(),this);var j=k.visit();return j}}).$()});define("Indigox.Web.JsLib.UI.ControlUIs.WidgetZoneUI",["Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.UI.ControlUI","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.ChildAddedChange","Indigox.Web.JsLib.UI.ChildRemovedChange","Indigox.Web.JsLib.UI.RenderQueue","Indigox.Web.JsLib.Core"],function(n,b,k,d,c,j,o){var e=0,l=1,p=2,h=3,m=4,f=5;var a=b.prototype;var g=Namespace("Indigox.Web.JsLib.UI.ControlUIs").Class("WidgetZoneUI").Extend(a).Constructor(function(q){a.constructor.call(this,q)}).Static({createUI:function(q){return new g(q)}}).Members({onWidgetAdding:function(s,q,t){if(!this.isInited()){return}var r=k.getInstance().createUI(t);if(t.isInited()){r.onInit()}},onWidgetAdded:function(s,q,r){this.insertChildElement("widgets",q,r)},onWidgetRemoving:function(r,q,s){},onWidgetRemoved:function(s,q,r){this.removeChildElement("widgets",q,r)},onLoading:function(q){this.ready();if(this.getElement()&&this.isRenderedToDocument()){o.getInstance().addListener(this,{onRendered:this.swap});this.fakeup()}},createChildrenUI:function(){var u=this.getControl();var s,v,r,q,t;s=u.getWidgets();for(q=0,t=s.length;q<t;q++){v=s[q];r=k.getInstance().getUI(v);if(v.isInited()){r.init()}}},renderChildren:function(){var v=this.getControl();var u=new d(v,this.getMapping());var s,w,r,q,t;s=v.getWidgets();for(q=0,t=s.length;q<t;q++){w=s[q];r=k.getInstance().createUI(w);r.render();r.insertInto(u,"widgets",q)}},setChildrenRendered:function(){var u=this.getControl();var s,v,r,q,t;s=u.getWidgets();for(q=0,t=s.length;q<t;q++){v=s[q];r=k.getInstance().getUI(v);r.setRendered()}},disposeChildren:function(){var u=this.getControl();var s,v,r,q,t;s=u.getWidgets();for(q=0,t=s.length;q<t;q++){v=s[q];r=k.getInstance().getUI(v);r.dispose()}}}).$()});define("Indigox.Web.JsLib.UI.Mappings.AttributeMapping",["Indigox.Web.JsLib.UI.Mappings.Mapping","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.UI.Mappings").Class("AttributeMapping").Extend(c).Constructor(function(e,f,d){c.constructor.apply(this,arguments)}).Members({write:function(e){var d=this.getElement();if(d.hasAttribute(this.attribute)){d.setAttribute(this.attribute,e)}},read:function(){var d=this.getElement();return d.getAttribute(this.attribute)}}).$()});define("Indigox.Web.JsLib.UI.Mappings.ControlMapping",["Indigox.Web.JsLib.UI.Mappings.Mapping","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.UI.Mappings").Class("ControlMapping").Extend(c).Constructor(function(e,f,d){c.constructor.apply(this,arguments)}).Members({write:function(d){var e=this.getElement();if(e.firstChild()){e.element.replaceChild(d,e.firstChild())}else{e.element.appendChild(d)}},read:function(){return this.getElement().firstChild()}}).$()});define("Indigox.Web.JsLib.UI.Mappings.CssMapping",["Indigox.Web.JsLib.UI.Mappings.Mapping","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.UI.Mappings").Class("CssMapping").Extend(b).Constructor(function(e,f,d){b.constructor.apply(this,arguments)}).Members({write:function(f){var e=this.getElement();if(isBoolean(f)){if(f===true&&!e.hasClass(this.attribute)){e.addClass(this.attribute)}else{if(f===false&&e.hasClass(this.attribute)){e.removeClass(this.attribute)}}}else{var d=this.getValue(e);if(f===d){return}if(!isNullOrUndefined(d)){e.removeClass(this.getClass(this.attribute,d))}if(!isNullOrUndefined(f)){e.addClass(this.getClass(this.attribute,f))}}},read:function(){var e=this.getElement();var d=this.getValue(e);if(isNullOrUndefined(d)){d=e.hasClass(this.attribute)}return d},getValue:function(f){var e=f.getAttribute("className");var g=new RegExp("(^|\\s+)"+this.attribute+"-(\\w+)","g");var d=g.exec(e);if(d){return d[2]}return null},getClass:function(d,e){return[d,"-",e].join("")}}).$()});define("Indigox.Web.JsLib.UI.Mappings.ForEachMapping",["Indigox.Web.JsLib.UI.Mappings.Mapping","Indigox.Web.JsLib.UI.DomTraversal","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.Core"],function(a,c,b){var d=a.prototype;var e=Namespace("Indigox.Web.JsLib.UI.Mappings").Class("ForEachMapping").Extend(d).Constructor(function(g,h,f,j){d.constructor.apply(this,arguments);this.iterable=j;this.children=[]}).Members({insert:function(f,h){var j=this.getElement();var g=this.getChildren();if(f>=g.length||g.length===0){j.element.appendChild(h)}else{j.element.insertBefore(h,g[f])}},remove:function(f){var h=this.getElement();var g=this.getChildren();if(g.length>f){h.element.removeChild(g[f])}},read:function(){return this.getChildren()},getChildren:function(){var h=[];var j=this.getElement();if(this.iterable==true){if(this.children.length==0){var f=new c(j.element);var g=f.getLastChild(j.element);var k=false;f.nextNode();if(g!=null){while(!k&&f.currentNode()){k=f.currentNode()===g;if(b.getInstance().isMarkAsControl(f.currentNode())){this.children.push(f.currentNode())}f.nextNode()}}}h=this.children}else{h=j.children()}return h}}).$()});define("Indigox.Web.JsLib.UI.Mappings.Mapping",["Indigox.Web.JsLib.DOM.Element","jquery","Indigox.Web.JsLib.Core"],function(b,d){var c=b.el;var a=Namespace("Indigox.Web.JsLib.UI.Mappings").Class("Mapping").Constructor(function(f,g,e){this.element=c(f);this.attribute=g;this.tag=e}).Members({getElement:function(){var e=this.element;if(this.tag!=""){e=c(d(this.element.element).find(this.tag)[0]);window.getElementCount++}return e},write:function(e){},read:function(e){}}).$()});define("Indigox.Web.JsLib.UI.Mappings.StyleMapping",["Indigox.Web.JsLib.UI.Mappings.Mapping","Indigox.Web.JsLib.Core"],function(b){var c=b.prototype;var a=Namespace("Indigox.Web.JsLib.UI.Mappings").Class("StyleMapping").Extend(c).Constructor(function(e,f,d){c.constructor.apply(this,arguments)}).Members({write:function(e){var d=this.getElement();d.setStyle(this.attribute,e)},read:function(){var d=this.getElement();return d.getStyle(this.attribute)}}).$()});define("Indigox.Web.JsLib.UI.Mappings.TextMapping",["Indigox.Web.JsLib.UI.Mappings.Mapping","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.UI.Mappings").Class("TextMapping").Extend(c).Constructor(function(e,f,d){c.constructor.apply(this,arguments)}).Members({write:function(e){var d=this.getElement();if(d.element!=null){d.setText(e)}},read:function(){var d=this.getElement();if(d.firstChild!=null){return d.getText()}return null}}).$()});define("Indigox.Web.JsLib.UI.Mediators.AccordionItemMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("AccordionItemMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onClick:function(h,j,g){var f=h.nodeName.toLowerCase();if(f=="dt"){g.getControl().toggleCollapse();this.stopBubble(j)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.AutoCompleteBoxMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Core"],function(e,b){var d=e.prototype;var a=null;var c=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("AutoCompleteBoxMediator").Extend(d).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new c()}return a}}).Members({onBlur:function(g,h,f){debug.log("onBlur")},onKeyUp:function(j,k,h){var g=j.nodeName.toLowerCase();if(g=="span"){switch(k.keyCode){case 38:h.activeItemIndex(-1);break;case 40:h.activeItemIndex(1);break;case 9:h.activeItemIndex(1);break;case 32:if(h.getControl().getItems().length>0){h.selectItem()}else{var l=b.el(j).getText();h.getControl().search(l,f);this.stopBubble(k)}case 13:h.selectItem();break;default:var l=b.el(j).getText();var f=false;if(k.keyCode==186){l=l.substring(0,l.length-1);f=true}h.getControl().search(l,f);this.stopBubble(k)}}},onKeyDown:function(j,k,h){switch(k.keyCode){case 32:case 13:var f=j.nodeName.toLowerCase();if(f=="span"){k.preventDefault()}this.stopBubble(k);break;case 9:var f=j.nodeName.toLowerCase();var g=h.getControl().getItems();if(f=="span"&&g.length>0){k.preventDefault()}this.stopBubble(k);break;case 8:var f=j.nodeName.toLowerCase();var g=h.getControl().getCompleteItems();var l=b.el(j).getText();if(f=="span"&&g.length>0&&(l==""||l==null||l==undefined)){h.removePreviousCompeleteItem();k.preventDefault()}this.stopBubble(k);break}},onClicked:function(g,h,f){jQuery(f.getElement()).find("span")[0].focus()}}).$()});define("Indigox.Web.JsLib.UI.Mediators.AutoCompleteItemMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("AutoCompleteItemMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onClicked:function(g,h,f){f.getControl().select();this.stopBubble(h)}}).$()});define("Indigox.Web.JsLib.UI.Mediators.ButtonMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("ButtonMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onClick:function(g,h,f){f.getControl().click();this.stopBubble(h)}}).$()});define("Indigox.Web.JsLib.UI.Mediators.ButtonMenuItemMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.UI.Overlay","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Core"],function(g,c,d,e){var f=g.prototype;var b=null;var a=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("ButtonMenuItemMediator").Extend(f).Constructor(function(){}).Static({getInstance:function(){if(!b){b=new a()}return b}}).Members({onClick:function(j,l,h){var m=this.getClassList(j);if(e.indexOf(m,"actionbutton")!=-1){var k=h.getControl();if(!k.hasChildNodes()){k.setSelected(true)}k.click();this.stopBubble(l)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.ButtonMenuItemMobileMediator",["Indigox.Web.JsLib.UI.Mediators.MenuItemMobileMediator","Indigox.Web.JsLib.UI.Overlay","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Core"],function(f,c,e,d){var h=d.el;var g=f.prototype;var b=null;var a=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("ButtonMenuItemMobileMediator").Extend(g).Constructor(function(){}).Static({getInstance:function(){if(!b){b=new a()}return b}}).Members({onClick:function(k,m,j){var l=j.getControl();g.onClick.apply(this,arguments);l.click();this.stopBubble(m)}}).$()});define("Indigox.Web.JsLib.UI.Mediators.ButtonMobileMediator",["Indigox.Web.JsLib.UI.Mediators.ButtonMediator","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Core"],function(c,b){var f=b.el;var e=c.prototype;var a=null;var d=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("ButtonMobileMediator").Extend(e).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new d()}return a}}).Members({onTouchStart:function(h,j,g){f(g.getElement()).addClass("pressed");this.stopBubble(j)},onTouchEnd:function(h,j,g){f(g.getElement()).removeClass("pressed");this.stopBubble(j)}}).$()});define("Indigox.Web.JsLib.UI.Mediators.CheckBoxMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var b=d.prototype;var a=null;var c=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("CheckBoxMediator").Extend(b).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new c()}return a}}).Members({onClick:function(h,j,g){var f=h.nodeName.toLowerCase();if(f=="input"){g.getControl().click();this.stopBubble(j)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.ComboBoxMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var b=null;var a=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("ComboBoxMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!b){b=new a()}return b}}).Members({onKeyUp:function(h,j,g){var f=h.nodeName.toLowerCase();if(f=="input"){g.getControl().search(h.value);this.stopBubble(j)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.ComboItemMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("ComboItemMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onClicked:function(g,h,f){f.getControl().select();this.stopBubble(h)}}).$()});define("Indigox.Web.JsLib.UI.Mediators.ComboNodeMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("ComboNodeMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onClicked:function(h,j,g){var f=h.nodeName.toLowerCase();if(f=="input"){g.getControl().remove();this.stopBubble(j)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.CompleteItemMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("CompleteItemMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onClicked:function(h,j,g){var f=h.nodeName.toLowerCase();if(f=="button"){g.getControl().remove();this.stopBubble(j)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.CurrencyMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("CurrencyMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onChange:function(h,j,g){var f=h.nodeName.toLowerCase();if(f=="input"){g.getControl().setValue(j.target.value);this.stopBubble(j)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.DataItemMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("DataItemMediator").Extend(c).Constructor(function(){this.showTask=null;this.hideTask=null}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onClicked:function(g,j,f){var h=f.getControl();h.click();this.stopBubble(j)}}).$()});define("Indigox.Web.JsLib.UI.Mediators.DatePickerMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Core"],function(e,c){var d=e.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("DatePickerMediator").Extend(d).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onChange:function(g,h,f){var j=this.getClassList(g);if(c.indexOf(j,"dateinput")!=-1){f.getControl().setDate(g.value);this.stopBubble(h)}else{if(c.indexOf(j,"hoursinput")!=-1){f.getControl().setHours(g.value);this.stopBubble(h)}else{if(c.indexOf(j,"minutesinput")!=-1){f.getControl().setMinutes(g.value);this.stopBubble(h)}else{if(c.indexOf(j,"secondsinput")!=-1){f.getControl().setSeconds(g.value);this.stopBubble(h)}}}}},onClick:function(g,h,f){var j=this.getClassList(g);if(c.indexOf(j,"selectdatebutton")!=-1){f.showDatePicker();this.stopBubble(h)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.DialogMediator",["Indigox.Web.JsLib.UI.ControlMediator","jquery-resize","Indigox.Web.JsLib.Core"],function(d){var b=d.prototype;var a=null;var c=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("DialogMediator").Extend(b).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new c()}return a}}).Members({onClick:function(g,h,f){if(this.isCloseButton(g)){f.getControl().close();this.stopBubble(h)}},onResize:function(g,h,f){f.center()},isCloseButton:function(f){var e=f.nodeName.toLowerCase();var g=f.parentElement.nodeName.toLowerCase();return(e==="input"&&g==="h1")}}).$()});define("Indigox.Web.JsLib.UI.Mediators.DropDownlistMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("DropDownlistMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onChange:function(g,h,f){f.getControl().change(g.value);this.stopBubble(h)}}).$()});define("Indigox.Web.JsLib.UI.Mediators.DropDownMenuItemMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.UI.Overlay","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Core"],function(g,b,c,e){var f=g.prototype;var a=null;var d=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("DropDownMenuItemMediator").Extend(f).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new d()}return a}}).Members({onClick:function(j,l,h){var m=this.getClassList(j);if(e.indexOf(m,"dropdownbutton")!=-1){h.getControl().toggleChildMenu();this.stopBubble(l)}else{if(e.indexOf(m,"actionbutton")!=-1){var k=h.getControl();if(!k.hasChildNodes()){k.setSelected(true)}k.click();this.hideAll(k);this.stopBubble(l)}}},onMouseDown:function(k,m,j){var l=j.getControl();var h=l.getRoot();if(this.isParent(k,document.getElementById(h.id))){return false}this.hideAll(l)},hideAll:function(k){var j=k.getParent(),h=k.getRoot();while(j!=h){j.hideChildMenu();j=j.parent}},isParent:function(j,h){while(!isNullOrUndefined(j)&&j.tagName.toUpperCase()!="BODY"){if(j==h||j.id.toUpperCase()=="UI-DATEPICKER-DIV"){return true}j=j.parentNode}return false}}).$()});define("Indigox.Web.JsLib.UI.Mediators.FieldContainerMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("FieldContainerMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onClick:function(k,l,j){var g=k.nodeName.toLowerCase();var f=k.parentNode.nodeName.toLowerCase();var h=j.getControl().getCollapsible();if((g=="dt"||(g=="label"&&f=="dt"))&&h===true){j.getControl().collapse()}this.stopBubble(l)}}).$()});define("Indigox.Web.JsLib.UI.Mediators.FileUploadMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Core"],function(e,c){var d=e.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("FileUploadMediator").Extend(d).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onChange:function(k,m,j){var n=this.getClassList(k);if(c.indexOf(n,"fileupload-fileselect")!=-1){var l=j.getControl();var h=/[^\\]+$/g;var g=k.value;var f=h.exec(g)[0];l.setText(f);l.upload();this.stopBubble(m)}},onClick:function(g,j,f){var h=f.getControl();var k=this.getClassList(g);if(c.indexOf(k,"fileupload-removebutton")!=-1){h.remove();this.stopBubble(j)}else{if(c.indexOf(k,"fileupload-cancelbutton")!=-1){h.cancel();h.remove();this.stopBubble(j)}}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.GridRowMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var b=null;var a=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("GridRowMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!b){b=new a()}return b}}).Members({onClick:function(g,h,f){f.getControl().click();this.stopBubble(h)}}).$()});define("Indigox.Web.JsLib.UI.Mediators.GridViewMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Core"],function(g,b,c){var e=b.el;var d=g.prototype;var a=null;var f=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("GridViewMediator").Extend(d).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new f()}return a}}).Members({onClick:function(j,k,h){var l=this.getClassList(j);if(c.indexOf(l,"toolbar-enterfullview")!=-1){h.enterFullView();this.stopBubble(k)}else{if(c.indexOf(l,"toolbar-leavefullview")!=-1){h.leaveFullView();this.stopBubble(k)}}},onTouchStart:function(j,k,h){var l=this.getClassList(j);if(c.indexOf(l,"toolbar-enterfullview")!=-1||c.indexOf(l,"toolbar-leavefullview")!=-1){e(j).addClass("pressed");this.stopBubble(k)}},onTouchEnd:function(j,k,h){var l=this.getClassList(j);if(c.indexOf(l,"toolbar-enterfullview")!=-1||c.indexOf(l,"toolbar-leavefullview")!=-1){e(j).removeClass("pressed");this.stopBubble(k)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.HyperLinkMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var b=d.prototype;var a=null;var c=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("HyperLinkMediator").Extend(b).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new c()}return a}}).Members({onClick:function(g,h,f){this.stopBubble(h)}}).$()});define("Indigox.Web.JsLib.UI.Mediators.LyncContactMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Utils.LyncUtil","Indigox.Web.JsLib.Core"],function(g,b,c){var e=b.el;var d=g.prototype;var a=null;var f=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("LyncContactMediator").Extend(d).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new f()}return a}}).Members({onMouseover:function(l,m,k){var h=k.getControl().getValue();var j=e(l);c.showCard(h.Email,j.getClientLeft()+j.getOuterWidth()+2,j.getClientTop()+j.getOuterHeight()+2)},onMouseout:function(j,k,h){c.hideCard()}}).$()});define("Indigox.Web.JsLib.UI.Mediators.MenuItemMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.UI.Overlay","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.Core"],function(f,b,c){var e=f.prototype;var a=null;var d=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("MenuItemMediator").Extend(e).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new d()}return a}}).Members({onMouseover:function(h,j,g){if(g.getControl().getRoot().getActionMode()==1){return}g.getControl().showChildMenu()},onMouseout:function(h,j,g){if(g.getControl().getRoot().getActionMode()==1){return}g.getControl().hideChildMenu()},onClick:function(h,k,g){var j=g.getControl();if(!j.hasChildNodes()){j.setSelected(true)}if(g.getControl().getRoot().getActionMode()==1){g.getControl().toggleChildMenu()}this.stopBubble(k)}}).$()});define("Indigox.Web.JsLib.UI.Mediators.MenuItemMobileMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.UI.Overlay","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.Utils.AsyncUtil","Indigox.Web.JsLib.Core"],function(h,c,a,g,d){var e=c.el;var b=h.prototype;var j=null;var f=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("MenuItemMobileMediator").Extend(b).Constructor(function(){}).Static({getInstance:function(){if(!j){j=new f()}return j}}).Members({onClick:function(m,o,l){var n=l.getControl();if(n.hasChildNodes()){n.toggleChildMenu()}if(!n.hasChildNodes()){var k=this;d.invokeAsync(function(){k.restore(n)},100);n.setSelected(true)}this.stopBubble(o)},onTouchStart:function(l,m,k){e(k.getElement()).addClass("pressed");this.stopBubble(m)},onTouchEnd:function(l,m,k){e(k.getElement()).removeClass("pressed");this.stopBubble(m)},restore:function(n){var m=n.getParent(),l=n.getRoot(),k=g.getInstance().findElement(l);while(m!=l){m.hideChildMenu();m=m.parent}a.getInstance().restore(k)}}).$()});define("Indigox.Web.JsLib.UI.Mediators.MenuMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.UI.Overlay","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Core"],function(h,d,c,e){var g=h.prototype;var f=d.el;var g=h.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("MenuMediator").Extend(g).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onClick:function(l,m,k){var j=l.nodeName.toLowerCase();if(j=="span"){c.getInstance().overlay(k.getElement());this.stopBubble(m)}var n=this.getClassList(l);if(e.indexOf(n,"menu-popout")!=-1){c.getInstance().overlay(k.getElement());this.stopBubble(m)}else{if(e.indexOf(n,"menu-hide")!=-1){c.getInstance().restore(k.getElement());this.stopBubble(m)}}},onTouchStart:function(k,l,j){var m=this.getClassList(k);if(e.indexOf(m,"menu-popout")!=-1||e.indexOf(m,"menu-hide")!=-1){f(k).addClass("pressed");this.stopBubble(l)}},onTouchEnd:function(k,l,j){var m=this.getClassList(k);if(e.indexOf(m,"menu-popout")!=-1||e.indexOf(m,"menu-hide")!=-1){f(k).removeClass("pressed");this.stopBubble(l)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators",["Indigox.Web.JsLib.UI.Mediators.AccordionItemMediator","Indigox.Web.JsLib.UI.Mediators.AutoCompleteBoxMediator","Indigox.Web.JsLib.UI.Mediators.AutoCompleteItemMediator","Indigox.Web.JsLib.UI.Mediators.ButtonMediator","Indigox.Web.JsLib.UI.Mediators.ButtonMenuItemMediator","Indigox.Web.JsLib.UI.Mediators.ButtonMenuItemMobileMediator","Indigox.Web.JsLib.UI.Mediators.ButtonMobileMediator","Indigox.Web.JsLib.UI.Mediators.ComboBoxMediator","Indigox.Web.JsLib.UI.Mediators.ComboItemMediator","Indigox.Web.JsLib.UI.Mediators.ComboNodeMediator","Indigox.Web.JsLib.UI.Mediators.CompleteItemMediator","Indigox.Web.JsLib.UI.Mediators.CurrencyMediator","Indigox.Web.JsLib.UI.Mediators.CheckBoxMediator","Indigox.Web.JsLib.UI.Mediators.DatePickerMediator","Indigox.Web.JsLib.UI.Mediators.DropDownlistMediator","Indigox.Web.JsLib.UI.Mediators.DropDownMenuItemMediator","Indigox.Web.JsLib.UI.Mediators.DataItemMediator","Indigox.Web.JsLib.UI.Mediators.DialogMediator","Indigox.Web.JsLib.UI.Mediators.FieldContainerMediator","Indigox.Web.JsLib.UI.Mediators.FileUploadMediator","Indigox.Web.JsLib.UI.Mediators.GridRowMediator","Indigox.Web.JsLib.UI.Mediators.GridViewMediator","Indigox.Web.JsLib.UI.Mediators.LyncContactMediator","Indigox.Web.JsLib.UI.Mediators.MenuMediator","Indigox.Web.JsLib.UI.Mediators.MenuItemMediator","Indigox.Web.JsLib.UI.Mediators.MenuItemMobileMediator","Indigox.Web.JsLib.UI.Mediators.RadioBoxMediator","Indigox.Web.JsLib.UI.Mediators.PagingMediator","Indigox.Web.JsLib.UI.Mediators.PagingMobileMediator","Indigox.Web.JsLib.UI.Mediators.PanelMediator","Indigox.Web.JsLib.UI.Mediators.RichTextBoxMediator","Indigox.Web.JsLib.UI.Mediators.RichTextViewMediator","Indigox.Web.JsLib.UI.Mediators.SPFileUploadMediator","Indigox.Web.JsLib.UI.Mediators.ToolbarMediator","Indigox.Web.JsLib.UI.Mediators.TextBoxMediator","Indigox.Web.JsLib.UI.Mediators.TreeNodeMediator","Indigox.Web.JsLib.UI.Mediators.TooltipMediator","Indigox.Web.JsLib.UI.Mediators.UserSelectMediator","Indigox.Web.JsLib.UI.Mediators.HyperLinkMediator","Indigox.Web.JsLib.UI.Mediators.ValidatorMediator"],function(g,O,j,k,v,o,u,l,M,J,c,A,G,e,D,N,F,z,H,a,C,y,B,p,s,f,w,t,I,r,b,d,K,L,E,h,x,n,q,m){return{AccordionItemMediator:g,AutoCompleteBoxMediator:O,AutoCompleteItemMediator:j,ButtonMediator:k,ButtonMenuItemMediator:v,ButtonMenuItemMobileMediator:o,ButtonMobileMediator:u,ComboBoxMediator:l,ComboItemMediator:M,ComboNodeMediator:J,CompleteItemMediator:c,CurrencyMediator:A,CheckBoxMediator:G,DatePickerMediator:e,DropDownlistMediator:D,DropDownMenuItemMediator:N,DataItemMediator:F,DialogMediator:z,FieldContainerMediator:H,FileUploadMediator:a,GridRowMediator:C,GridViewMediator:y,LyncContactMediator:B,MenuMediator:p,MenuItemMediator:s,MenuItemMobileMediator:f,RadioBoxMediator:w,PagingMediator:t,PagingMobileMediator:I,PanelMediator:r,RichTextBoxMediator:b,RichTextViewMediator:d,SPFileUploadMediator:K,ToolbarMediator:L,TextBoxMediator:E,TreeNodeMediator:h,TooltipMediator:x,UserSelectMediator:n,HyperLinkMediator:q,ValidatorMediator:m}});define("Indigox.Web.JsLib.UI.Mediators.PagingMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Core"],function(e,b){var c=e.prototype;var a=null;var d=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("PagingMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new d()}return a}}).Members({onClick:function(g,h,f){var j=this.getClassList(g);if(b.indexOf(j,"firstpage")!=-1){f.getControl().moveFirst();this.stopBubble(h)}else{if(b.indexOf(j,"prevpage")!=-1){f.getControl().previousPage();this.stopBubble(h)}else{if(b.indexOf(j,"nextpage")!=-1){f.getControl().nextPage();this.stopBubble(h)}else{if(b.indexOf(j,"lastpage")!=-1){f.getControl().moveLast();this.stopBubble(h)}}}}},onChange:function(h,j,g){var f=h.nodeName.toLowerCase();if(f=="input"){g.getControl().moveTo(h.value);this.stopBubble(j)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.PagingMobileMediator",["Indigox.Web.JsLib.UI.Mediators.PagingMediator","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Core"],function(f,b){var e=b.el;var d=f.prototype;var a=null;var c=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("PagingMobileMediator").Extend(d).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new c()}return a}}).Members({onTouchStart:function(j,k,h){var g=j.nodeName.toLowerCase();if(g=="a"){e(j).addClass("pressed");this.stopBubble(k)}},onTouchEnd:function(j,k,h){var g=j.nodeName.toLowerCase();if(g=="a"){e(j).removeClass("pressed");this.stopBubble(k)}},onClick:function(j,k,h){var g=j.nodeName.toLowerCase();if(g=="a"){h.getControl().nextPage();this.stopBubble(k)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.PanelMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("PanelMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onClick:function(h,j,g){var f=h.nodeName.toLowerCase();if(f=="h1"){g.getControl().toggleCollapse();this.stopBubble(j)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.RadioBoxMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("RadioBoxMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onClick:function(h,j,g){var f=h.nodeName.toLowerCase();if(f=="input"){g.getControl().click();this.stopBubble(j)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.RichTextBoxMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var b=d.prototype;var a=null;var c=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("RichTextBoxMediator").Extend(b).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new c()}return a}}).Members({onChange:function(g,h,f){f.getControl().setValue(h.target.value);this.stopBubble(h)}}).$()});define("Indigox.Web.JsLib.UI.Mediators.RichTextViewMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Core"],function(g,c,d){var f=c.el;var e=g.prototype;var b=null;var a=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("RichTextViewMediator").Extend(e).Constructor(function(){}).Static({getInstance:function(){if(!b){b=new a()}return b}}).Members({onClick:function(j,k,h){var l=this.getClassList(j);if(d.indexOf(l,"toolbar-enterfullview")!=-1){h.enterFullView();this.stopBubble(k)}else{if(d.indexOf(l,"toolbar-leavefullview")!=-1){h.leaveFullView();this.stopBubble(k)}}},onTouchStart:function(j,k,h){var l=this.getClassList(j);if(d.indexOf(l,"toolbar-enterfullview")!=-1||d.indexOf(l,"toolbar-leavefullview")!=-1){f(j).addClass("pressed");this.stopBubble(k)}},onTouchEnd:function(j,k,h){var l=this.getClassList(j);if(d.indexOf(l,"toolbar-enterfullview")!=-1||d.indexOf(l,"toolbar-leavefullview")!=-1){f(j).removeClass("pressed");this.stopBubble(k)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.SPFileUploadMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Utils.UrlUtil","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.WebContexts.Context","Indigox.Web.JsLib.Core"],function(b,s,k,o){var t=true,g=o.getInstance().getSetting("File.SharePoint.SiteUrl");var v=[o.getInstance().getSetting("File.SharePoint.SiteUrl")+"/"+o.getInstance().getSetting("File.SharePoint.FolderName")],f=[o.getInstance().getSetting("File.SharePoint.SiteUrl")],r=["doc","docx","xls","xlsx","ppt","pptx","txt"],n=["png","jpg","jpeg","gif","bpm"],c=["doc","xls","ppt"],j=["doc","docx","xls","xlsx","ppt","pptx"];var a,u,h;var m={};function d(y){if(!isNullOrUndefined(y)&&m[y]!==true){var x=document.createElement("script");x.type="text/javascript";x.src=y;var w=document.head||document.getElementsByTagName("head")[0]||document.documentElement;w.appendChild(x);m[y]=true}}var q=null;var e=b.prototype;var p=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("SPFileUploadMediator").Extend(e).Constructor(function(){if(t){d(g+"/_layouts/2052/init.js");d(g+"/_layouts/2052/core.js")}}).Static({getInstance:function(){if(!q){q=new p()}return q}}).Members({onChange:function(A,C,z){var D=this.getClassList(A);if(k.indexOf(D,"fileupload-fileselect")!=-1){var B=z.getControl();var y=/[^\\]+$/g;var x=A.value;var w=y.exec(x)[0];B.setText(w);B.upload();this.stopBubble(C)}},onClick:function(x,z,w){var y=w.getControl();var A=this.getClassList(x);if(k.indexOf(A,"fileupload-removebutton")!=-1){y.remove();this.stopBubble(z)}else{if(k.indexOf(A,"fileupload-cancelbutton")!=-1){y.cancel();this.stopBubble(z)}else{if(k.indexOf(A,"fileupload-viewbutton")!=-1){this.viewFile(w);this.stopBubble(z)}else{if(k.indexOf(A,"fileupload-permissionbutton")!=-1){this.setFilePermission(w);this.stopBubble(z)}else{if(k.indexOf(A,"fileupload-filelink")!=-1){this.clickFileLink(x,z,w);this.stopBubble(z)}}}}}},onMousedown:function(y,z,x){var w=y.nodeName.toLowerCase();if(w=="a"){if(t){if(l.onMousedown(y,z.originalEvent)){z.preventDefault()}}this.stopBubble(z)}},onFocus:function(y,z,x){var w=y.nodeName.toLowerCase();if(w=="a"){if(t){if(l.onFocus(y,z.originalEvent)){z.preventDefault()}}this.stopBubble(z)}},clickFileLink:function(x,y,w){if(t){if(l.onClick(x,y.originalEvent)){y.preventDefault()}}},viewFile:function(z){var x=new RegExp("^("+f.join("|")+")","ig");var w=z.control.value.fileUrl;var A=x.exec(w)[1];var y=null;if((/(\.doc|\.docx)$/ig).test(w)){y=A+"/_layouts/WordViewer.aspx";s.open(y,{id:w})}else{if((/(\.xls|\.xlsx)$/ig).test(w)){y=A+"/_layouts/xlviewer.aspx";s.open(y,{id:w})}else{if((/(\.ppt|\.pptx)$/ig).test(w)){y=A+"/_layouts/PowerPoint.aspx";s.open(y,{PowerPointView:"ReadingView",PresentationId:w})}else{alert("仅支持在浏览器中查看 offcice 文档。")}}}},setFilePermission:function(z){var x=new RegExp("^("+v.join("|")+")","ig");var w=z.control.value.fileUrl;var A=x.exec(w)[1];if(w.indexOf(g)!==0){alert("仅支持在设置 SharePoint 文档权限。")}else{var y=g+"/sps/Vtron.BPM.SPWebService/Permission.ashx";s.open(y,{web:A,url:w})}}}).$();var l=(function(){function w(E){for(var D=0,F=r.length;D<F;D++){if(E==r[D]){return true}}return false}function x(E){for(var D=0,F=n.length;D<F;D++){if(E==n[D]){return true}}return false}function C(E){for(var D=0,F=c.length;D<F;D++){if(E==c[D]){return true}}return false}function A(E){for(var D=0,F=j.length;D<F;D++){if(E==j[D]){return true}}return false}function B(E){var F=/\.([^\.\?\/]+)(\?|$)/g;var D=F.exec(E);if(D==null){return""}return D[1].toLowerCase()}function z(D){for(var E=0,F=f.length;E<F;E++){if(D.indexOf(f[E])===0){return true}}return false}var y={onClick:function(G,F){var D=G.href;if(z(D)){var E=B(D);if(A(E)){if(C(E)){return h(G,F,"TRUE","FALSE","TRUE","SharePoint.OpenDocuments.3","1","SharePoint.OpenDocuments","","","","1073741823","0","0","0x7fffffffffffffff","","")}else{return h(G,F,"TRUE","FALSE","FALSE","SharePoint.OpenDocuments.3","1","SharePoint.OpenDocuments","","","","1073741823","0","0","0x7fffffffffffffff","","")}}else{if(w(E)){return h(G,F,"TRUE","FALSE","FALSE","SharePoint.OpenDocuments.3","1","SharePoint.OpenDocuments","","","","6","0","0","0x1b03c4312ef","","")}else{if(x(E)){return h(G,F,"TRUE","FALSE","FALSE","","1","SharePoint.OpenDocuments","","","","6","0","0","0x1b03c4312ef","","")}else{return h(G,F,"TRUE","FALSE","FALSE","","1","","","","","6","0","0","0x1b03c4312ef","","")}}}}},onMousedown:function(G,F){var D=G.href;if(z(D)){var E=B(D);if(x(D)||w(D)){return a(G,F,"1","SharePoint.OpenDocuments","")}else{return a(G,F,"1","","")}}},onFocus:function(F,E){var D=F.href;if(z(D)){u(F)}}};return y}())});define("Indigox.Web.JsLib.UI.Mediators.TextBoxMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("TextBoxMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onChange:function(g,h,f){f.getControl().setValue(h.target.value);this.stopBubble(h)},onClicked:function(g,h,f){f.getControl().click(h);this.stopBubble(h)}}).$()});define("Indigox.Web.JsLib.UI.Mediators.ToolbarMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("ToolbarMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onClick:function(h,j,g){var f=h.nodeName.toLowerCase();if(f=="input"){g.getControl().addRow();this.stopBubble(j)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.TooltipMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var b=d.prototype;var a=null;var c=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("TooltipMediator").Extend(b).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new c()}return a}}).Members({onMouseOver:function(g,j,f,h){f.show(h,j.pageX,j.pageY);this.stopBubble(j)},onMouseOut:function(g,j,f,h){f.hide(h);this.stopBubble(j)}}).$()});define("Indigox.Web.JsLib.UI.Mediators.TreeNodeMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Core"],function(g,b,d){var f=g.prototype;var e=b.el;var a=null;var c=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("TreeNodeMediator").Extend(f).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new c()}return a}}).Members({onClick:function(j,k,h){var l=this.getClassList(j);if(d.indexOf(l,"hitarea")!=-1){h.getControl().toggleCollapse();this.stopBubble(k)}else{if(d.indexOf(l,"clickarea")!=-1){h.getControl().click();this.stopBubble(k)}}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.UserSelectMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var a=null;var b=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("UserSelectMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({onClick:function(h,j,g){var f=h.nodeName.toLowerCase();if(f=="ul"||f=="input"){g.getControl().openDialog();this.stopBubble(j)}}}).$()});define("Indigox.Web.JsLib.UI.Mediators.ValidatorMediator",["Indigox.Web.JsLib.UI.ControlMediator","Indigox.Web.JsLib.Core"],function(d){var c=d.prototype;var b=null;var a=Namespace("Indigox.Web.JsLib.UI.Mediators").Class("ValidatorMediator").Extend(c).Constructor(function(){}).Static({getInstance:function(){if(!b){b=new a()}return b}}).Members({onClick:function(h,j,g){var f=h.nodeName.toLowerCase();if(f=="input"){g.getControl().hide();this.stopBubble(j)}}}).$()});define("Indigox.Web.JsLib.UI.Schemas.AttributeSchema",["Indigox.Web.JsLib.UI.NodeSchema","Indigox.Web.JsLib.Core"],function(c){var b=c.prototype;var a=Namespace("Indigox.Web.JsLib.UI.Schemas").Class("AttributeSchema").Extend(b).Constructor(function(e,d){this.name=e;this.variable=d}).Members({getName:function(){return this.name},getVariable:function(){return this.variable},accept:function(e,d){return e.visitAttribute(this,d)}}).$()});define("Indigox.Web.JsLib.UI.Schemas.ControlSchema",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.UI.NodeSchema","Indigox.Web.JsLib.Core"],function(a,d){var c=d.prototype;var b=Namespace("Indigox.Web.JsLib.UI.Schemas").Class("ControlSchema").Extend(c).Constructor(function(e){this.variable=e}).Members({getVariable:function(){return this.variable},accept:function(f,e){return f.visitControl(this,e)}}).$()});define("Indigox.Web.JsLib.UI.Schemas.CssSchema",["Indigox.Web.JsLib.UI.NodeSchema","Indigox.Web.JsLib.Core"],function(c){var a=c.prototype;var b=Namespace("Indigox.Web.JsLib.UI.Schemas").Class("CssSchema").Extend(a).Constructor(function(e,d){this.name=e;this.variable=d}).Members({getName:function(){return this.name},getVariable:function(){return this.variable},accept:function(e,d){return e.visitCss(this,d)}}).$()});define("Indigox.Web.JsLib.UI.Schemas.ElementSchema",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.UI.NodeSchema","Indigox.Web.JsLib.Core"],function(b,d){var c=d.prototype;var a=Namespace("Indigox.Web.JsLib.UI.Schemas").Class("ElementSchema").Extend(c).Constructor(function(g,e,f){c.constructor.call(this,f);this.nodeName=g;this.attributes=new b(e)}).Members({getNodeName:function(){return this.nodeName},setAttributeNode:function(h){var e=this.getAttributes(),f=null,g=e.length;for(f=0;f<g;f++){if(e[f].getName()===h.getName()){this.attributes.set(f,h);return}}this.attributes.add(h)},getAttributeNode:function(f){var e=this.getAttributes(),g=null,h=e.length;for(g=0;g<h;g++){if(e[g].getName()===f){return e[g]}}return null},hasAttribute:function(e){return this.getAttributeNode(e)!==null},getAttributes:function(){return this.attributes.toArray()},accept:function(f,e){return f.visitElement(this,e)}}).$()});define("Indigox.Web.JsLib.UI.Schemas.EventSchema",["Indigox.Web.JsLib.UI.NodeSchema","Indigox.Web.JsLib.Core"],function(c){var a=c.prototype;var b=Namespace("Indigox.Web.JsLib.UI.Schemas").Class("EventSchema").Extend(a).Constructor(function(d,e){this.name=d;this.handler=e}).Members({getName:function(){return this.name},getHandler:function(){return this.handler},accept:function(e,d){return e.visitEvent(this,d)}}).$()});define("Indigox.Web.JsLib.UI.Schemas.ForEachSchema",["Indigox.Web.JsLib.UI.NodeSchema","Indigox.Web.JsLib.Core"],function(c){var a=c.prototype;var b=Namespace("Indigox.Web.JsLib.UI.Schemas").Class("ForEachSchema").Extend(a).Constructor(function(d,e,f){a.constructor.call(this,f);this.variable=d;this.iterable=e}).Members({getVariable:function(){return this.variable},getIterable:function(){return this.iterable},accept:function(e,d){return e.visitForEach(this,d)}}).$()});define("Indigox.Web.JsLib.UI.Schemas",["Indigox.Web.JsLib.UI.Schemas.AttributeSchema","Indigox.Web.JsLib.UI.Schemas.ControlSchema","Indigox.Web.JsLib.UI.Schemas.CssSchema","Indigox.Web.JsLib.UI.Schemas.ElementSchema","Indigox.Web.JsLib.UI.Schemas.EventSchema","Indigox.Web.JsLib.UI.Schemas.ForEachSchema","Indigox.Web.JsLib.UI.Schemas.StyleSchema","Indigox.Web.JsLib.UI.Schemas.TextSchema"],function(d,c,h,b,f,e,g,a){return{AttributeSchema:d,ControlSchema:c,CssSchema:h,ElementSchema:b,EventSchema:f,ForEachSchema:e,StyleSchema:g,TextSchema:a}});define("Indigox.Web.JsLib.UI.Schemas.StyleSchema",["Indigox.Web.JsLib.UI.NodeSchema","Indigox.Web.JsLib.Core"],function(c){var a=c.prototype;var b=Namespace("Indigox.Web.JsLib.UI.Schemas").Class("StyleSchema").Extend(a).Constructor(function(e,d){this.name=e;this.variable=d}).Members({getName:function(){return this.name},getVariable:function(){return this.variable},accept:function(e,d){return e.visitStyle(this,d)}}).$()});define("Indigox.Web.JsLib.UI.Schemas.TextSchema",["Indigox.Web.JsLib.UI.NodeSchema","Indigox.Web.JsLib.Core"],function(c){var b=c.prototype;var a=Namespace("Indigox.Web.JsLib.UI.Schemas").Class("TextSchema").Extend(b).Constructor(function(d){this.variable=d}).Members({getVariable:function(){return this.variable},accept:function(e,d){return e.visitText(this,d)}}).$()});define("Indigox.Web.JsLib.UI.Visitors.BuildRendererVisitor",["Indigox.Web.JsLib.UI.Schemas.StyleSchema","Indigox.Web.JsLib.UI.Schemas.CssSchema","Indigox.Web.JsLib.UI.Schemas.ControlSchema","Indigox.Web.JsLib.UI.Schemas.AttributeSchema","Indigox.Web.JsLib.UI.Schemas.ElementSchema","Indigox.Web.JsLib.UI.Schemas.ForEachSchema","Indigox.Web.JsLib.UI.Schemas.EventSchema","Indigox.Web.JsLib.UI.Schemas.TextSchema","Indigox.Web.JsLib.UI.SchemaRegistry","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.Renderer","Indigox.Web.JsLib.UI.RendererCache","Indigox.Web.JsLib.UI.SchemaVisitor","Indigox.Web.JsLib.Core"],function(e,f,g,d,n,q,m,b,p,k,h,o,l){var j={area:true,base:true,basefont:true,br:true,col:true,frame:true,hr:true,img:true,input:true,isindex:true,link:true,meta:true,param:true};var c=l.prototype;var a=Namespace("Indigox.Web.JsLib.UI.Visitors").Class("BuildRendererVisitor").Extend(c).Constructor(function(r,s,t){c.constructor.call(this,r,s);this.renderer=t}).Members({visit:function(){var r=this.schema;return r.accept(this,this.renderer)},visitElement:function(u,w){var z=w;var s=u.getNodeName(),v=u.getAttributes(),A=u.getChildNodes();z.setTagName(s);if(s.toLowerCase() in j){z.setEndTag(false)}for(var x=0,t=v.length;x<t;x++){if(!(v[x] instanceof m)){v[x].accept(this,z)}}for(x=0,t=A.length;x<t;x++){var r=A[x];if(r instanceof n){var y=new h();r.accept(this,y);z.addChild(y)}else{r.accept(this,z)}}return null},visitText:function(s,u){var t=u;var r=s.getVariable();t.addChild(r);return null},visitEvent:function(r,s){},visitForEach:function(r,s){},visitControl:function(r,s){},visitAttribute:function(t,v){var u=v;var s=t.getName();var r=t.getVariable();if(this.isStaticProperty(r)){u.addStaticAttribute(s,r)}else{u.addAttribute(s,r)}return null},visitStyle:function(t,v){var u=v;var s=t.getName();var r=t.getVariable();if(this.isStaticProperty(r)){u.addStaticStyle(s,r)}else{u.addStyle(s,r)}return null},visitCss:function(t,v){var u=v;var s=t.getName();var r=t.getVariable();if(this.isStaticProperty(r)){u.addStaticCss(s,r)}else{u.addCss(s,r)}return null},isStaticProperty:function(r){return !(/\$\{([^\}]+)\}/.test(r))}}).$()});define("Indigox.Web.JsLib.UI.Visitors.EventVisitor",["Indigox.Web.JsLib.UI.SchemaVisitor","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Core"],function(a,b){var e=a.prototype;var d=b.el;var c=Namespace("Indigox.Web.JsLib.UI.Visitors").Class("EventVisitor").Extend(e).Constructor(function(g,h,f,k,j){e.constructor.call(this,g,h);this.element=f;this.mediator=k;this.ui=j}).Members({visit:function(){this.schema.accept(this,this.element);return this.mapping},visitElement:function(j,k){var f=j.getAttributes();for(var g=0,h=f.length;g<h;g++){f[g].accept(this,k)}},visitEvent:function(j,k){var f=k;var h=j.getName(),g=j.getHandler().replace("${","").replace("}","");if(!isNullOrUndefined(this.mediator[g])){d(f).addListener(h,this.mediator[g],this.mediator,[this.ui])}}}).$()});define("Indigox.Web.JsLib.UI.Visitors.ManipulatorVisitor",["Indigox.Web.JsLib.UI.DomTraversal","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Collection.Hashtable","Indigox.Web.JsLib.UI.Schemas.ControlSchema","Indigox.Web.JsLib.Manipulators.AttributeManipulator","Indigox.Web.JsLib.Manipulators.ControlManipulator","Indigox.Web.JsLib.Manipulators.CssManipulator","Indigox.Web.JsLib.Manipulators.ForEachManipulator","Indigox.Web.JsLib.Manipulators.StyleManipulator","Indigox.Web.JsLib.Manipulators.TextNodeManipulator","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.UI.SchemaVisitor","Indigox.Web.JsLib.Core"],function(o,k,n,c,f,q,h,b,a,m,p,e,l){var g=e.el;var d=l.prototype;var j=Namespace("Indigox.Web.JsLib.UI.Visitors").Class("ManipulatorVisitor").Extend(d).Constructor(function(s,t,r,v,u){d.constructor.call(this,s,t);this.domTraversal=new o(r);this.mapping={};this.element=r;this.mediator=v;this.ui=u}).Members({visit:function(){this.schema.accept(this,this.element);return this.mapping},visitElement:function(w,x){var u=x,t=this.domTraversal.nextNode();var r=w.getAttributes(),y=w.getChildNodes();var s=null,v=null;for(s=0,v=r.length;s<v;s++){r[s].accept(this,t)}for(s=0,v=y.length;s<v;s++){y[s].accept(this,t)}},visitText:function(u,v){var t=v,w;if(t.firstChild){if(g(t.firstChild).isEmptyText()){w=t.firstChild}else{w=this.domTraversal.nextNode()}}else{w=document.createTextNode("");t.appendChild(w)}if(g(w).isText()){var s=u.getVariable();var r=new p(w,"");this.addManipulator(s,r)}},visitForEach:function(t,v){var y=v,r=this.domTraversal.getLastChild(y);var z=t.getChildNodes();var w=[];var s=false;var u=t.getVariable();if(r!=null){while(!s&&this.domTraversal.currentNode()){s=this.domTraversal.currentNode()===r;if(k.getInstance().isMarkAsControl(this.domTraversal.currentNode())){w.push(this.domTraversal.currentNode())}this.domTraversal.nextNode()}}var x=new a(w,y);this.addManipulator(u,x)},visitControl:function(w,x){var u=this.domTraversal.currentNode();var v=this.domTraversal.getLastChild(x);var s=x;var t=w.getVariable();var r=null;if(v){if(u){if(k.getInstance().isMarkAsControl(u)){r=new h(u,s)}else{throw new Error("the element can not match the schema for ("+t+")")}}else{r=new h(null,s,null)}this.domTraversal.nextNode()}else{r=new h(null,s,null)}this.addManipulator(t,r)},visitEvent:function(r,s){},visitAttribute:function(v,w){var t=w;var u=v.getName(),s=v.getVariable();if(g(t).hasAttribute(u)){var r=new q(t,u);this.addManipulator(s,r)}},visitStyle:function(v,w){var t=w;var u=v.getName(),s=v.getVariable();if(g(t).getStyle(u)!=null){var r=new m(t,u);this.addManipulator(s,r)}},visitCss:function(v,w){var t=w;var u=v.getName(),s=v.getVariable();if(u==="className"){debug.warn("warning")}else{if(g(t).hasAttribute("className")){var r=new b(t,u);this.addManipulator(s,r)}}},addManipulator:function(s,r){if(s in this.mapping){var t=this.mapping[s];if(n.indexOf(t,r)==-1){t.push(r)}}else{this.mapping[s]=[r]}}}).$()});define("Indigox.Web.JsLib.UI.Visitors.MappingVisitor",["Indigox.Web.JsLib.UI.Schemas.StyleSchema","Indigox.Web.JsLib.UI.Schemas.CssSchema","Indigox.Web.JsLib.UI.Schemas.ControlSchema","Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.UI.Schemas.AttributeSchema","Indigox.Web.JsLib.UI.Schemas.ElementSchema","Indigox.Web.JsLib.UI.Schemas.ForEachSchema","Indigox.Web.JsLib.UI.Schemas.EventSchema","Indigox.Web.JsLib.UI.Schemas.TextSchema","Indigox.Web.JsLib.UI.SchemaRegistry","Indigox.Web.JsLib.UI.Mappings.AttributeMapping","Indigox.Web.JsLib.UI.Mappings.CssMapping","Indigox.Web.JsLib.UI.Mappings.ControlMapping","Indigox.Web.JsLib.UI.Mappings.ForEachMapping","Indigox.Web.JsLib.UI.Mappings.StyleMapping","Indigox.Web.JsLib.UI.Mappings.TextMapping","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.Renderer","Indigox.Web.JsLib.UI.RendererCache","Indigox.Web.JsLib.UI.SchemaVisitor","Indigox.Web.JsLib.Core"],function(f,q,s,m,n,t,k,v,l,b,u,a,g,d,j,r,w,o,c,h){var e=h.prototype;var p=Namespace("Indigox.Web.JsLib.UI.Visitors").Class("MappingVisitor").Extend(e).Constructor(function(y,z,x){e.constructor.call(this,y,z);this.element=x;this.mapping={}}).Members({visit:function(){this.schema.accept(this,this.context);return this.mapping},getTag:function(D){var x="";if(D.getParentNode()){x=D.getNodeName();var y=D.getAttributes();for(var A=0,C=y.length;A<C;A++){if(y[A] instanceof q){var B=y[A].getName();var z=y[A].getVariable();if(this.isStaticProperty(z)){if(z==true){x="."+B}else{x="."+B+"-"+z}}}}}return x},visitElement:function(B,C){var x=this.getTag(B);var y=B.getAttributes(),D=B.getChildNodes();for(var z=0,A=y.length;z<A;z++){y[z].accept(this,x)}for(z=0,A=D.length;z<A;z++){D[z].accept(this,x)}},visitText:function(z,A){var x=A;var y=z.getVariable();if(!this.isStaticProperty(y)){this.addMapping(y,new r(this.element,null,x))}},visitEvent:function(x,y){},visitForEach:function(z,B){var x=B;var y=z.getVariable();var A=z.getIterable();if(!this.isStaticProperty(y)){this.addMapping(y,new d(this.element,null,x,A))}},visitControl:function(z,A){var x=A;var y=z.getVariable();if(!this.isStaticProperty(y)){this.addMapping(y,new g(this.element,null,x))}},visitAttribute:function(A,B){var x=B;var z=A.getName();var y=A.getVariable();if(!this.isStaticProperty(y)){this.addMapping(y,new u(this.element,z,x))}},visitStyle:function(A,B){var x=B;var z=A.getName();var y=A.getVariable();if(!this.isStaticProperty(y)){this.addMapping(y,new j(this.element,z,x))}},visitCss:function(A,B){var x=B;var z=A.getName();var y=A.getVariable();if(!this.isStaticProperty(y)){this.addMapping(y,new a(this.element,z,x))}},isStaticProperty:function(x){return !(/\$\{([^\}]+)\}/.test(x))},addMapping:function(y,x){if(y in this.mapping){var z=this.mapping[y];if(m.indexOf(z,x)==-1){z.push(x)}}else{this.mapping[y]=[x]}}}).$()});define("Indigox.Web.JsLib.UI.ChangeSet",["Indigox.Web.JsLib.Utils.DelayedTask","Indigox.Web.JsLib.Core"],function(b){var a=Namespace("Indigox.Web.JsLib.UI").Class("ChangeSet").Constructor(function(c){this.controlUI=c;this.changes=[]}).Members({add:function(c){this.changes.push(c)},commit:function(){var d=this.changes;var f=this.controlUI;for(var c=0,e=d.length;c<e;c++){d[c].process(f)}this.changes=[]}}).$()});define("Indigox.Web.JsLib.UI.ChildAddedChange",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.UI").Class("ChildAddedChange").Constructor(function(c,b,d){this.property=c;this.index=b;this.child=d}).Members({process:function(b){b.handleChildAdded(this.property,this.index,this.child)}}).$()});define("Indigox.Web.JsLib.UI.ChildRemovedChange",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.UI").Class("ChildRemovedChange").Constructor(function(c,b,d){this.property=c;this.index=b;this.child=d}).Members({process:function(b){b.handleChildRemoved(this.property,this.index,this.child)}}).$()});define("Indigox.Web.JsLib.UI.ControlMediator",["Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Core"],function(b){var a=null;var c=b.el;var d=Namespace("Indigox.Web.JsLib.UI").Class("ControlMediator").Constructor(function(){}).Static({getInstance:function(){if(!a){a=new d()}return a}}).Members({getClassList:function(f){var e=c(f);return e.getClassList()},stopBubble:function(f){if(f&&f.stopPropagation){f.stopPropagation()}else{window.event.cancelBubble=true}}}).$()});define("Indigox.Web.JsLib.UI.ControlUI",["Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Utils.DelayedTask","Indigox.Web.JsLib.Utils.DOMUtil","Indigox.Web.JsLib.Utils.ListenersSupport","Indigox.Web.JsLib.Expression.ExpressionEvaluator","Indigox.Web.JsLib.Controls.Control","Indigox.Web.JsLib.UI.SchemaRegistry","Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.UI.DomReader","Indigox.Web.JsLib.UI.DomWriter","Indigox.Web.JsLib.UI.ChangeSet","Indigox.Web.JsLib.UI.Mappings.AttributeMapping","Indigox.Web.JsLib.UI.Mappings.CssMapping","Indigox.Web.JsLib.UI.Mappings.ControlMapping","Indigox.Web.JsLib.UI.Mappings.ForEachMapping","Indigox.Web.JsLib.UI.Mappings.StyleMapping","Indigox.Web.JsLib.UI.Mappings.TextMapping","Indigox.Web.JsLib.UI.PropertyChange","Indigox.Web.JsLib.UI.ChildAddedChange","Indigox.Web.JsLib.UI.ChildRemovedChange","Indigox.Web.JsLib.UI.Visitors.ManipulatorVisitor","Indigox.Web.JsLib.UI.Visitors.MappingVisitor","Indigox.Web.JsLib.UI.Visitors.EventVisitor","Indigox.Web.JsLib.UI.Visitors.BuildRendererVisitor","Indigox.Web.JsLib.UI.Renderer","Indigox.Web.JsLib.UI.RendererCache","Indigox.Web.JsLib.UI.MappingCache","Indigox.Web.JsLib.UI.RenderQueue","Indigox.Web.JsLib.UI.MediatorRegistry","Indigox.Web.JsLib.Manipulators.ControlManipulator","Indigox.Web.JsLib.Manipulators.ForEachManipulator","Indigox.Web.JsLib.Core"],function(j,h,a,T,R,b,Q,t,w,K,F,e,g,r,p,z,m,O,l,u,D,H,M,n,L,c,f,J,A,B,k,C,V){var o=h.el;var v=0,E=1,s=2,P=3,I=4,S=5;var q="Created",N="Inited",y="Ready",x="Prerendered",U="Rendered",d="Disposed";var G=Namespace("Indigox.Web.JsLib.UI").Class("ControlUI").Constructor(function(W){this.control=W;this.schema=null;this.element=null;this.mapping=null;this.changeset=new g(this);this.delayedTask=null;this.installed=false;this.state=v;this.stateText="created";this.fackupElement=null;this.fackuping=false;this.eventAttached=false;this.initListeners()}).Static({createUI:function(W){return new G(W)}}).Members({initListeners:function(){this.listeners=new b(this);this.registerListeners()},registerListeners:function(){this.listeners.registerListeners(q,N,y,x,U,d)},addListener:function(X,W){if(this.listeners&&X!=null){this.listeners.addListener(X,W)}},removeListener:function(W){if(this.listeners&&W!=null){this.listeners.removeListener(W)}},fireListener:function(X,W){if(this.listeners){this.listeners.fire(X,W)}},getSchema:function(){if(isNullOrUndefined(this.schema)){var W=Type.forInstance(this.control).getAlias();this.schema=w.getInstance().getSchema(W)}return this.schema},getMediator:function(){var W=Type.forInstance(this.control).getAlias();return k.getInstance().getMediator(W)},getElement:function(){return this.element},setElement:function(W){this.element=W},getControl:function(){return this.control},getMapping:function(){if(!this.mapping){this.mapping=this.buildMapping()}return this.mapping},buildMapping:function(){var Z=this.getSchema();var aa=this.getElement();var X={};var ad=A.getInstance().get(Z);if(ad===null){var ac=new n(this.getControl(),Z,aa);X=ac.visit();A.getInstance().put(Z,X)}else{for(var ae in ad){X[ae]=[];var W=ad[ae];for(var ab=0,Y=W.length;ab<Y;ab++){var af=null;var ag=W[ab];if(ag instanceof r){af=new r(aa,ag.attribute,ag.tag)}else{if(ag instanceof z){af=new z(aa,ag.attribute,ag.tag)}else{if(ag instanceof p){af=new p(aa,ag.attribute,ag.tag)}else{if(ag instanceof m){af=new m(aa,ag.attribute,ag.tag)}else{if(ag instanceof O){af=new O(aa,ag.attribute,ag.tag)}else{if(ag instanceof l){af=new l(aa,ag.attribute,ag.tag)}}}}}}X[ae].push(af)}}}return X},needParseChildren:function(){return true},parseElement:function(){this.parseSelf();if(this.needParseChildren()){this.parseChildren()}},parseSelf:function(){var aa=this.getControl();var Y=this.getMapping();var W=new F(Y);for(var Z in Y){var X=Y[Z][0];if(!(X instanceof C)&&!(X instanceof V)&&!(X instanceof z)&&!(X instanceof m)){var ab=new Q(Z);if(ab.isProperty()){ab.setProperty(aa,W.read(Z))}}}},parseChildren:function(){var Z=this.getControl();var X=this.getMapping();for(var Y in X){var W=X[Y][0];var aa=new Q(Y);if(W instanceof C||W instanceof z){this.parsePropertyChild(Z,X,W,Y,aa)}else{if(W instanceof V||W instanceof m){this.parseCollectionChild(Z,X,W,Y,aa)}}}},parsePropertyChild:function(aa,X,ad,ae,W){var ac=K.getInstance();var ab=ad.read();if(ab){var Y=ac.createControl(ab);if(ab.id){Y.setName(ab.id)}var Z=ac.createUI(Y);Z.element=ab;if(W.isProperty()){W.setProperty(aa,Y)}else{if(ae.indexOf("getChild")>-1){this.control.addChild(Y)}}}},parseCollectionChild:function(af,Y,ah,ai,W){var ag=K.getInstance();var X=ah.read();if(X.length>0){var ab=[];for(var ad=0,aa=X.length;ad<aa;ad++){var ae=X[ad];var Z=ag.createControl(ae);if(ae.id){Z.setName(ae.id)}var ac=ag.createUI(Z);ac.element=ae;ab.push(Z)}if(W.isProperty()){W.setProperty(af,ab)}}},renderHtml:function(){var W=this.buildHtml();this.setElement(R.buildElement(W.join("")))},buildHtml:function(){var X=this.control,Y=this.getSchema();var Z=this.getRenderer(X,Y);var W=[];Z.renderHtml(X,W);return W},getRenderer:function(W,X){var Z=J.getInstance().get(X);if(Z===null){Z=new f();var Y=new c(W,X,Z);Y.visit();J.getInstance().put(X,Z)}return Z},render:function(){if(this.getElement()){return}if(this.getState()>=P){return}this.markup();this.renderChildren()},renderChildren:function(){var ab=this.getControl();var aa=new e(ab,this.getMapping());var Y,ac,X,W,Z;if(ab.getChildren){Y=ab.getChildren();for(W=0,Z=Y.length;W<Z;W++){ac=Y[W];X=K.getInstance().getUI(ac);X.render();X.insertInto(aa,"children",W)}}},setRendered:function(){if(this.getState()===P&&this.isRenderedToDocument()){this.attachEvent();this.setState(I);this.setChildrenRendered()}},setChildrenRendered:function(){var aa=this.getControl();var Y,ab,X,W,Z;if(aa.getChildren){Y=aa.getChildren();for(W=0,Z=Y.length;W<Z;W++){ab=Y[W];X=K.getInstance().getUI(ab);X.setRendered()}}},attachEvent:function(){if(this.eventAttached===false){var W=new L(this.getControl(),this.getSchema(),this.getElement(),this.getMediator(),this);W.visit();this.eventAttached=true}},markup:function(){B.getInstance().offer(new j(this.doMarkup,this))},doMarkup:function(){this.renderHtml();this.setState(P)},insertInto:function(Y,X,W){B.getInstance().offer(new j(this.doInsertInto,this,[Y,X,W]))},doInsertInto:function(Y,X,W){if(!this.getElement()||o(this.getElement()).parentNode()){return}if(this.getState()>=I){return}Y.insert(X,W,this.getElement());this.setRendered()},replaceWith:function(X,W){B.getInstance().offer(new j(this.doReplaceWith,this,[X,W]))},doReplaceWith:function(X,W){if(this.getState()!==P){return}X.writeProperty(W,this.getElement());this.setRendered()},removeFrom:function(Y,X,W){B.getInstance().offer(new j(this.doRemoveFrom,this,[Y,X,W]))},doRemoveFrom:function(Y,X,W){if(!this.getElement()||o(this.getElement()).parentNode()===null){return}Y.remove(X,W)},insertChildElement:function(Z,W,aa){if(!this.getElement()){return}if(this.getState()>=S){return}var X=K.getInstance().getUI(aa);var Y=new e(this.getControl(),this.getMapping());X.render();X.insertInto(Y,Z,W)},removeChildElement:function(Z,W,aa){if(!this.getElement()){return}if(this.getState()>=S){return}var X=K.getInstance().getUI(aa);var Y=new e(this.getControl(),this.getMapping());X.removeFrom(Y,Z,W);X.dispose()},replaceChildElement:function(Y,Z){if(!this.getElement()){return}if(this.getState()>=S){return}var W=K.getInstance().getUI(Z);W.render();var X=new e(this.getControl(),this.getMapping());W.replaceWith(X,Y)},updateElement:function(Y,X){if(!this.getElement()){return}if(this.getState()>=S){return}X=this.getSafeValue(Y,X);var W=new e(this.getControl(),this.getMapping());W.writeProperty(Y,X)},getSafeValue:function(X,W){if(X==="value"){return[W].join("")}return W},handleChildAdded:function(X,W,Y){debug.warn("call deprecated method: Indigox.Web.JsLib.UI.ControlUI.handleChildAdded()");this.insertChildElement(X,W,Y)},handleChildRemoved:function(X,W,Y){debug.warn("call deprecated method: Indigox.Web.JsLib.UI.ControlUI.handleChildRemoved()");this.removeChildElement(X,W,Y)},handlePropertyChange:function(X,W){debug.warn("call deprecated method: Indigox.Web.JsLib.UI.ControlUI.handlePropertyChange()");if(W instanceof t){this.replaceChildElement(X,W)}else{this.updateElement(X,W)}},onPropertyChanging:function(aa,Z,Y,W){if(this.isControlProperty(Y,W)){var ab=Y;if(this.getState()<E){return}var X=K.getInstance().createUI(ab);if(ab.isInited()){X.onInit()}}},onPropertyChanged:function(Z,Y,X,W){if(this.isControlProperty(X,W)){var aa=X;this.replaceChildElement(Y,aa)}else{this.updateElement(Y,X)}},isControlProperty:function(X,W){return(X instanceof t)||(W instanceof t)},onInit:function(W){this.init()},onLoading:function(W){this.ready()},onLoaded:function(W){},onUnload:function(W){},onChildAdding:function(Y,W,Z){if(this.getState()<E){return}var X=K.getInstance().createUI(Z);if(Z.isInited()){X.onInit()}},onChildAdded:function(X,W,Y){this.insertChildElement("children",W,Y)},onChildRemoving:function(X,W,Y){},onChildRemoved:function(X,W,Y){if(!this.getElement()){return}this.removeChildElement("children",W,Y)},dispose:function(){this.disposeChildren();this.setState(S);K.getInstance().uninstallUI(this.getControl(),this)},disposeChildren:function(){var aa=this.getControl();var Y,ab,X,W,Z;if(aa.getChildren){Y=aa.getChildren();for(W=0,Z=Y.length;W<Z;W++){ab=Y[W];X=K.getInstance().getUI(ab);X.dispose()}}},setState:function(W){this.state=W;switch(W){case v:this.stateText="created";this.fireListener(q,[this]);break;case E:this.stateText="inited";this.fireListener(N,[this]);break;case s:this.stateText="ready";this.fireListener(y,[this]);break;case P:this.stateText="prerendered";this.fireListener(x,[this]);break;case I:this.stateText="rendered";this.fireListener(U,[this]);break;case S:this.stateText="disposed";this.fireListener(d,[this]);break;default:this.stateText="unkown";break}},getState:function(){return this.state},isInited:function(){return(this.getState()>=E)},isRendered:function(){return(this.getState()===I)},isRenderedToDocument:function(){var X=this.getElement();var W=document.body;var Y=X.parentElement;while(Y){if(Y==W){return true}Y=Y.parentElement}return false},init:function(){if(this.getState()!==v){return}this.createChildrenUI();if(this.getElement()){this.parseElement()}this.setState(E)},ready:function(){this.setState(s);if(this.getElement()){this.setState(P);if(this.isRenderedToDocument()){this.setRendered()}}},createChildrenUI:function(){var aa=this.getControl();var Y,ab,X,W,Z;if(aa.getChildren){Y=aa.getChildren();for(W=0,Z=Y.length;W<Z;W++){ab=Y[W];X=K.getInstance().createUI(ab);if(ab.isInited()){X.init()}}}},acceptChange:function(W){this.changeset.add(W);if(this.delayedTask){this.delayedTask.cancel()}this.delayedTask=new T(function(){this.changeset.commit();this.delayedTask=null},this,[]);this.delayedTask.delay(100)},fakeup:function(){var Y=this.getControl();if(!this.fackuping){var X=this.getElement();var W=X.cloneNode(true);X.parentElement.replaceChild(W,X);this.fackuping=true;this.fackupElement=W;this.setState(P)}else{}},swap:function(){var Y=this.getControl();if(this.fackuping){var X=this.getElement();var W=this.getFakeupElement();W.parentElement.replaceChild(X,W);this.fackuping=false;this.fackupElement=null;this.setRendered()}else{}B.getInstance().removeListener(this)},getFakeupElement:function(){return this.fackupElement}}).$()});define("Indigox.Web.JsLib.UI.DomReader",["Indigox.Web.JsLib.Expression.Expression","Indigox.Web.JsLib.Expression.ExpressionEvaluator","Indigox.Web.JsLib.Mappings.MappingFactory","Indigox.Web.JsLib.Manipulators.ControlManipulator","Indigox.Web.JsLib.Manipulators.ForEachManipulator","Indigox.Web.JsLib.Invokers.FieldSetterInvoker","Indigox.Web.JsLib.Invokers.PropertySetterInvoker","Indigox.Web.JsLib.Core"],function(f,e,d,b,a,c,g){var h=Namespace("Indigox.Web.JsLib.UI").Class("DomReader").Constructor(function(j){this.mapping=j}).Members({read:function(k){if(k in this.mapping){var j=this.mapping[k][0];if(!(j instanceof b)&&!(j instanceof a)){return this.getMappedValue(k,j.read())}else{return j.read()}}},readSelf:function(){var l=null,j=[];for(l in this.mapping){j=this.mapping[l];var k=j[0];if(!(k instanceof b)&&!(k instanceof a)){var m=new e(l);if(m.isProperty()){m.setProperty(this.control,this.getMappedValue(l,k.read()))}}}},readChidren:function(){var l=null,j=[];for(l in this.mapping){j=this.mapping[l];var k=j[0];if(k instanceof b||k instanceof a){var m=new e(l);if(m.isProperty()){m.setProperty(this.control,k.read())}else{if(l.indexOf("getChild")>-1){this.control.addChild(k.read())}}}}},getMappedValue:function(l,k){var j=d.getInstance().getMapping(l.replace(/\$\{([^\}]+)\}/,"$1"));if(j!=d.getInstance().getDefaultMapping()){return j.unmap(k)}else{return k}}}).$()});define("Indigox.Web.JsLib.UI.DomTraversal",["Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.DOM.TreeWalker","Indigox.Web.JsLib.DOM.NodeFilter","Indigox.Web.JsLib.Core"],function(a,c,g){var f=a.el;var d=/control-([\w|$]\w*)/;var e=g.SHOW_ELEMENT|g.SHOW_TEXT;var b=Namespace("Indigox.Web.JsLib.UI").Class("DomTraversal").Constructor(function(h){this.treeWalker=new c(h,e,{acceptNode:function(j){if(f(j).isEmptyText()){return g.FILTER_REJECT}return g.FILTER_ACCEPT}},false);this.current=h}).Members({isMarkAsControl:function(j){var h=this.getControlAlias(j);return h!==null},getControlAlias:function(k){var j=k.className;var h;if(h=d.exec(j)){return h[1]}return null},parentNode:function(){var j=this.treeWalker;var h=j.getCurrentNode();return j.getParentNode(h)},firstChild:function(){var j=this.treeWalker;var h=j.getCurrentNode();return j.getFirstChild(h)},getLastChild:function(j){var k=this.treeWalker;var h=k.getLastChild(j);while(h!=null&&!this.isMarkAsControl(h)&&k.getLastChild(h)!=null){h=k.getLastChild(h)}return h},lastChild:function(){var j=this.treeWalker;var h=j.getCurrentNode();return j.getLastChild(h)},previousSibling:function(){var j=this.treeWalker;var h=j.getCurrentNode();return j.getPreviousSibling(h)},nextSibling:function(){var j=this.treeWalker;var h=j.getCurrentNode();return j.getNextSibling(h)},previousNode:function(){var j=this.treeWalker;var h=j.getCurrentNode();this.current=j.previousNode();return h},nextNode:function(){var l=this.treeWalker;var k=l.getCurrentNode();var h=null;if(k!=l.rootNode&&this.isMarkAsControl(k)){h=l.getNextSibling(k);if(isNullOrUndefined(h)){var j=l.getParentNode(k);while(j!=null){h=l.getNextSibling(j);if(isNullOrUndefined(h)){j=l.getParentNode(j)}else{break}}}if(isNullOrUndefined(h)){this.current=null;return null}l.setCurrentNode(h);this.current=l.getCurrentNode()}else{this.current=l.nextNode()}return k},currentNode:function(){return this.current},isEnd:function(){return !this.currentNode()}}).$()});define("Indigox.Web.JsLib.UI.DomWriter",["Indigox.Web.JsLib.DOM.NodeFilter","Indigox.Web.JsLib.Mappings.MappingFactory","Indigox.Web.JsLib.Core"],function(d,a){var c=d.SHOW_ELEMENT|d.SHOW_TEXT;var b=Namespace("Indigox.Web.JsLib.UI").Class("DomWriter").Constructor(function(f,e){this.control=f;this.mapping=e}).Members({writeProperty:function(k,j){j=this.getMappedValue(k,j);var f=["${",k,"}"].join("");if(f in this.mapping){var e=this.mapping[f];for(var g=0,h=e.length;g<h;g++){e[g].write(j)}}},insert:function(l,g,j){var f=["${",l,"}"].join("");if(f in this.mapping){var e=this.mapping[f];for(var h=0,k=e.length;h<k;h++){e[h].insert(g,j)}}},remove:function(k,g){var f=["${",k,"}"].join("");if(f in this.mapping){var e=this.mapping[f];for(var h=0,j=e.length;h<j;h++){e[h].remove(g)}}},getMappedValue:function(g,f){var e=a.getInstance().getMapping(g);if(e!=a.getInstance().getDefaultMapping()){return e.map(f)}else{return f}}}).$()});define("Indigox.Web.JsLib.UI.MappingCache",["Indigox.Web.JsLib.Collection.Hashtable","Indigox.Web.JsLib.Core"],function(b){var a=null;var c=Namespace("Indigox.Web.JsLib.UI").Class("MappingCache").Constructor(function(){this.cache=new b()}).Static({getInstance:function(){if(!a){a=new c()}return a}}).Members({get:function(d){return this.cache.get(d)},contains:function(d){return this.cache.containsKey(d)},put:function(d,e){this.cache.put(d,e)}}).$()});define("Indigox.Web.JsLib.UI.MediatorRegistry",["Indigox.Web.JsLib.Collection.Hashtable","Indigox.Web.JsLib.Controls.Control","Indigox.Web.JsLib.Utils.ConditionalConfig","Indigox.Web.JsLib.Core"],function(b,e,d){var a=null;var c=Namespace("Indigox.Web.JsLib.UI").Class("MediatorRegistry").Constructor(function(){this.aliasMappings={};this.defaultMediator=null}).Static({getInstance:function(){if(!a){a=new c()}return a}}).Members({register:function(g,h,f){if(arguments.length<3){f=arguments[1];h=null}if(arguments.length<2){f=arguments[0];h=null;g=null}if(isNullOrUndefined(g)){this.defaultMediator=f}else{if(this.aliasMappings[g]==null){this.aliasMappings[g]=new d()}this.aliasMappings[g].addConfig(h,f)}},unregister:function(f){delete this.aliasMappings[f]},getMediator:function(g){var f=null;if(g in this.aliasMappings){f=this.aliasMappings[g].getConfig()}if(isNullOrUndefined(f)){f=this.defaultMediator}if(!isNullOrUndefined(f)){return f.getInstance()}}}).$()});define("Indigox.Web.JsLib.UI.NodeSchema",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Core"],function(a){var b=Namespace("Indigox.Web.JsLib.UI").Class("NodeSchema").Constructor(function(e){this.parentNode=null;this.childNodes=new a();if(e){var d=e.length;for(var c=0;c<d;c++){this.addChild(e[c])}}}).Members({getParentNode:function(){return this.parentNode},addChild:function(c){if(isNullOrUndefined(c)){throw new Error("argument 'node' is null.")}var d=this.childNodes;if(!d.contains(c)){d.add(c)}c.parentNode=this},removeChild:function(c){if(isNullOrUndefined(c)){throw new Error("argument 'node' is null.")}if(c.parentNode!==this){throw new Error("childNodes does not contains node")}c.parentNode=null;var d=this.childNodes;if(d.contains(c)){d.remove(c)}},getChildNodes:function(){return this.childNodes.toArray()},hasChildNodes:function(){return this.childNodes.size()>0},accept:function(d,c){}}).$()});define("Indigox.Web.JsLib.UI.Overlay",["Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Core"],function(c){var d=c.el;var a=null;var b=Namespace("Indigox.Web.JsLib.UI").Class("Overlay").Constructor(function(){}).Static({getInstance:function(){if(!a){a=new b()}return a}}).Members({overlay:function(g){var e=window.document.body,h=d(g),f=d(e);f.addClass("overlaid");h.addClass("overlaying")},restore:function(g){var e=window.document.body,h=d(g),f=d(e);f.removeClass("overlaid");h.removeClass("overlaying")}}).$()});define("Indigox.Web.JsLib.UI.PropertyChange",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.UI").Class("PropertyChange").Constructor(function(c,b){this.property=c;this.value=b}).Members({process:function(b){b.handlePropertyChange(this.property,this.value)}}).$()});define("Indigox.Web.JsLib.UI.Renderer",["Indigox.Web.JsLib.UI.UIManager","Indigox.Web.JsLib.Expression.ExpressionEvaluator","Indigox.Web.JsLib.Mappings.MappingFactory","Indigox.Web.JsLib.UI.SchemaRegistry","Indigox.Web.JsLib.Expression.Expression","Indigox.Web.JsLib.Collection.Hashtable","Indigox.Web.JsLib.Core"],function(c,d,b,g,e,a){window.count=0;var f=Namespace("Indigox.Web.JsLib.UI").Class("Renderer").Constructor(function(){this.staticClasses={};this.staticStyles={};this.staticAttributes={};this.classMapping={};this.styleMapping={};this.attributeMapping={};this.children=[];this.endTag=true;this.tagName=""}).Members({setTagName:function(h){if(!isNullOrUndefined(h)){this.tagName=h}},setEndTag:function(h){if(!isNullOrUndefined(h)){this.endTag=h}},addCss:function(j,h){this.classMapping[j]=h},addStaticCss:function(h,j){this.staticClasses[h]=j},addStyle:function(j,h){this.styleMapping[j]=h},addStaticStyle:function(h,j){this.staticStyles[h]=j},addAttribute:function(j,h){this.attributeMapping[j]=h},addStaticAttribute:function(h,j){this.staticAttributes[h]=j},addChild:function(h){this.children.push(h)},renderHtml:function(j,h){h.push("<"+this.tagName+" ");this.renderAttribute(j,h);this.renderCss(j,h);this.renderStyle(j,h);if(this.endTag===false){h.push("/>")}else{h.push(">");this.renderChildren(j,h);h.push("</"+this.tagName+">")}},renderCss:function(m,j){var h=[];for(var k in this.staticClasses){window.count++;this.putClass(h,k,this.staticClasses[k])}for(var k in this.classMapping){var l=this.getMappedValue(this.classMapping[k],m);this.putClass(h,k,l)}if(h.length){j.push('class="'+h.join("")+'" ')}},putClass:function(h,j,k){if(k){if(isBoolean(k)){h.push(j+" ")}else{h.push(j+"-"+k+" ")}}},renderStyle:function(m,h){var k=[];for(var j in this.staticStyles){window.count++;this.putStyle(k,j,this.staticStyles[j])}for(var j in this.styleMapping){var l=this.getMappedValue(this.styleMapping[j],m);this.putStyle(k,j,l)}if(k.length){h.push('style="'+k.join("")+'" ')}},putStyle:function(j,h,k){if(k){k=k.toString();j.push(h+":"+k.replace(/[\"]/g,"'")+";")}},renderAttribute:function(l,h){for(var j in this.staticAttributes){window.count++;this.putAttribute(h,j,this.staticAttributes[j])}for(var j in this.attributeMapping){var k=this.getMappedValue(this.attributeMapping[j],l);this.putAttribute(h,j,k)}},putAttribute:function(h,j,k){if(!isNullOrUndefined(k)){if(isBoolean(k)){if(k===true){h.push(j+'="'+j+'"')}}else{h.push(j+'="'+k+'" ')}}},renderChildren:function(m,k){var j=this.children;for(var h=0,l=j.length;h<l;h++){var n=j[h];if(n instanceof f){n.renderHtml(m,k)}else{this.renderText(m,n,k)}}},renderText:function(k,h,j){var l=this.getMappedValue(h,k);j.push(l)},getMappedValue:function(j,l){var n=j.replace(/\$\{([^\}]+)\}/,"$1");var o=new d(j);var k=o.evaluate(l);var h=b.getInstance().getMapping(n);var m=h.map(k);return m}}).$()});define("Indigox.Web.JsLib.UI.RendererCache",["Indigox.Web.JsLib.Collection.Hashtable","Indigox.Web.JsLib.Core"],function(c){var b=null;var a=Namespace("Indigox.Web.JsLib.UI").Class("RendererCache").Constructor(function(){this.cache=new c()}).Static({getInstance:function(){if(!b){b=new a()}return b}}).Members({get:function(d){return this.cache.get(d)},contains:function(d){return this.cache.containsKey(d)},put:function(d,e){this.cache.put(d,e)}}).$()});define("Indigox.Web.JsLib.UI.RenderQueue",["Indigox.Web.JsLib.Collection.Queue","Indigox.Web.JsLib.Utils.DelayedTask","Indigox.Web.JsLib.Utils.ListenersSupport","Indigox.Web.JsLib.Core"],function(f,h,b){var d="Render",g="Rendered";var a=null;var e=0;var c=Namespace("Indigox.Web.JsLib.UI").Class("RenderQueue").Constructor(function(){this.initListeners();this.queue=new f();this.begun=false;this.executing=false;this.autoBegun=false;this.delayedEnd=null}).Static({getInstance:function(){if(!a){a=new c()}return a}}).Members({begin:function(){this.fireListener(d);this.begun=true},autoBegin:function(){debug.log("RenderQueue auto begin...");this.fireListener(d);this.begun=true;this.autoBegun=true;this.delayedEnd=new h(this.end,this,[])},end:function(){if(this.queue.size()===0&&!this.executing){this.fireListener(g)}this.begun=false;this.autoBegun=false;debug.log(e+"ms\tRenderQueue");window.fakeuptime=0;window.swaptime=0;e=0},offer:function(j){if(!this.begun){this.autoBegin()}this.queue.offer(j);this.execute();if(this.autoBegun){this.delayedEnd.delay(100)}},execute:function(){if(!this.executing){this.doExecute()}},doExecute:function(){this.executing=true;try{while(this.queue.size()>0){var m=this.queue.poll();var j=new Date();m.invoke();var k=new Date();e+=k.getTime()-j.getTime()}}catch(l){debug.log(l)}this.executing=false;if(!this.begun){this.fireListener(g)}},initListeners:function(){this.listeners=new b(this);this.registerListeners()},registerListeners:function(){this.listeners.registerListeners(d,g)},addListener:function(k,j){if(this.listeners&&k!=null){this.listeners.addListener(k,j)}},removeListener:function(j){if(this.listeners&&j!=null){this.listeners.removeListener(j)}},fireListener:function(k,j){if(this.listeners){this.listeners.fire(k,j)}}}).$()});define("Indigox.Web.JsLib.UI.Schema",["Indigox.Web.JsLib.UI.Schemas","Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.UI").Class("Schema").Static({EL:function(e,c,d){var b=Type.forFullName("Indigox.Web.JsLib.UI.Schemas.ElementSchema").getClass();return new b(e,c,d)},EACH:function(c,d,e){var b=Type.forFullName("Indigox.Web.JsLib.UI.Schemas.ForEachSchema").getClass();return new b(c,d,e)},CTRL:function(c){var b=Type.forFullName("Indigox.Web.JsLib.UI.Schemas.ControlSchema").getClass();return new b(c)},TEXT:function(c){var b=Type.forFullName("Indigox.Web.JsLib.UI.Schemas.TextSchema").getClass();return new b(c)},ATTR:function(d,c){var b=Type.forFullName("Indigox.Web.JsLib.UI.Schemas.AttributeSchema").getClass();return new b(d,c)},CSS:function(d,c){var b=Type.forFullName("Indigox.Web.JsLib.UI.Schemas.CssSchema").getClass();return new b(d,c)},STYLE:function(d,c){var b=Type.forFullName("Indigox.Web.JsLib.UI.Schemas.StyleSchema").getClass();return new b(d,c)},EVENT:function(c,d){var b=Type.forFullName("Indigox.Web.JsLib.UI.Schemas.EventSchema").getClass();return new b(c,d)}}).$();(function(){var c=["a","abbr","acronym","address","applet","area","b","base","basefont","bdo","big","blockquote","body","br","button","caption","center","cite","code","col","colgroup","dd","del","dfn","dir","div","dl","dt","em","fieldset","font","form","frame","frameset","head","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","map","menu","meta","noframes","noscript","object","ol","optgroup","option","p","param","pre","q","s","samp","script","select","small","span","strike","strong","sub","sup","table","tbody","td","textarea","tfoot","th","thead","title","tr","tt","u","ul","marquee"];var d,e,b;for(d=0,e=c.length;d<e;d++){b=c[d].toUpperCase();if(typeof a[b]==="undefined"){a[b]=(function(f){return function(g,h){return a.EL(f.toLowerCase(),g,h)}}(b))}else{debug.warn('Element "'+c[d]+'" has been added, please review the tags array, and remove the duplicated items.')}}}())});define("Indigox.Web.JsLib.UI.SchemaFactory",["Indigox.Web.JsLib.UI.DomTraversal","Indigox.Web.JsLib.UI.Schema","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Core"],function(c,d,a){var g=a.el;var e=/control-([\w|$]\w*)/;var h={"for":"htmlFor","class":"className"};var b={id:true,"class":true,style:true};var f=Namespace("Indigox.Web.JsLib.UI").Class("SchemaFactory").Constructor(function(j){this.element=j;this.traversal=new c(j)}).Members({isMarkAsControl:function(k){var j=this.getControlAlias(k);return j!==null},getControlAlias:function(l){var k=l.className;var j;if(j=e.exec(k)){return j[1]}return null},createSchema:function(){var u=this.traversal,l=u.lastChild(),r=u.nextNode();var p=d.EL(r.nodeName,[],[]);var s=null,m=null;var k=null,v=null,w=null,j=null;var q=g(r).getSpecifiedAttributes();for(s=0,m=q.length;s<m;s++){k=q[s];if(k in b){continue}if(k in h){k=h[q[s]]}v=g(r).getAttribute(k);w=d.ATTR(k,v);p.setAttributeNode(w)}var x=g(r).getSpecifiedStyles();for(s=0,m=x.length;s<m;s++){k=x[s];v=g(r).getStyle(k);w=d.STYLE(k,v);p.setAttributeNode(w)}var o=g(r).getClassList();var t=null;for(s=0,m=o.length;s<m;s++){t=/(^|\s+)(\w+)-(\w+)(\s+|$)/.exec(o[s]);if(t){k=t[2];v=t[3]}else{k=o[s];v=true}w=d.CSS(k,v);p.setAttributeNode(w)}var n=null;for(;l&&n!==l;){n=u.currentNode();if(g(n).isElement()){if(this.isMarkAsControl(n)){j=d.CTRL('${getChild("'+n.id+'")}');u.nextNode()}else{j=this.createSchema()}}else{j=d.TEXT(n.nodeValue);u.nextNode()}p.addChild(j)}return p}}).$()});define("Indigox.Web.JsLib.UI.SchemaRegistry",["Indigox.Web.JsLib.Collection.Hashtable","Indigox.Web.JsLib.Controls.Control","Indigox.Web.JsLib.Utils.ConditionalConfig","Indigox.Web.JsLib.Core"],function(b,d,c){var a=null;var e=Namespace("Indigox.Web.JsLib.UI").Class("SchemaRegistry").Constructor(function(){this.aliasMappings={};this.controlMappings=new b();this.builtinAttributes=[]}).Static({getInstance:function(){if(!a){a=new e()}return a}}).Members({builtinAttribute:function(f){var g=null,h=f.length;for(g=0;g<h;g++){this.builtinAttributes.push(f[g])}},applyBuiltinAttributes:function(j){var f=this.builtinAttributes,g=null,h=f.length;for(var g=0;g<h;g++){j.setAttributeNode(f[g])}},register:function(g,h,f){if(arguments.length<3){f=arguments[1];h=null}this.applyBuiltinAttributes(f);if(g instanceof d){this.controlMappings.put(g,f)}else{if(this.aliasMappings[g]==null){this.aliasMappings[g]=new c()}this.aliasMappings[g].addConfig(h,f)}},unregister:function(f){if(f instanceof d){this.controlMappings.remove(f)}else{delete this.aliasMappings[f]}},getSchema:function(f){if(f instanceof d){return this.controlMappings.get(f)}if(f in this.aliasMappings){return this.aliasMappings[f].getConfig()}return null}}).$()});define("Indigox.Web.JsLib.UI.SchemaVisitor",["Indigox.Web.JsLib.Expression.ExpressionEvaluator","Indigox.Web.JsLib.Mappings.MappingFactory","Indigox.Web.JsLib.Core"],function(c,b){var a=Namespace("Indigox.Web.JsLib.UI").Class("SchemaVisitor").Constructor(function(d,e){this.context=d;this.schema=e}).Members({getMappedValue:function(e){if(/\$\{([^\}]+)\}/.test(e)){var g=this.context;var h=e.replace(/\$\{([^\}]+)\}/,"$1");var j=new c(e);var f=j.evaluate(g);var d=b.getInstance().getMapping(h);return d.map(f)}else{return e}},setMappedValue:function(g,f){var e=null;var d=b.getInstance().getMapping(g);e=d.unmap(f);throw"NotImplementedException"},visit:function(){},visitElement:function(d,e){},visitText:function(d,e){},visitForEach:function(d,e){},visitControl:function(d,e){},visitAttribute:function(d,e){},visitStyle:function(d,e){},visitCss:function(d,e){}}).$()});define("Indigox.Web.JsLib.UI.UIManager",["Indigox.Web.JsLib.Controls.UIEngine","Indigox.Web.JsLib.Utils.ConditionalConfig","Indigox.Web.JsLib.Collection.Hashtable","Indigox.Web.JsLib.Core"],function(c,f,b){var e=/control-([\w|$]\w*)/;var a=null;var d=Namespace("Indigox.Web.JsLib.UI").Class("UIManager").Constructor(function(){this.uiMappings={}}).Static({getInstance:function(){if(!a){a=new d()}return a}}).Members({registerUI:function(g,j,h){if(arguments.length<3){h=arguments[1];j=null}if(!this.uiMappings[g]){this.uiMappings[g]=new f()}this.uiMappings[g].addConfig(j,h)},unregisterUI:function(g){if(g in this.uiMappings){delete this.uiMappings[g]}},createControl:function(h){var j=null;if(h===document.body){j=Page()}else{if(this.isMarkAsControl(h)){var g=this.getControlAlias(h);if(g==="page"){j=Page()}else{j=Type.forAlias(g).createInstance()}}else{throw new Error("the root element is not mark as control, please check the program.")}}return j},findElement:function(h){var g=this.getUI(h);if(g){return g.getElement()}return null},createUI:function(j){if(isNullOrUndefined(j)){throw new Error("control is null.")}var g=this.findUIClass(j);var h=g.createUI(j);this.installUI(j,h);return h},getUI:function(k){var g=k.listeners.getListeners();for(var h=0,j=g.length;h<j;h++){if(g[h] instanceof Type.forFullName("Indigox.Web.JsLib.UI.ControlUI").getClass()){return g[h]}}return null},installUI:function(h,g){h.addListener(g)},uninstallUI:function(h,g){h.removeListener(g);h=null;g=null},isMarkAsControl:function(h){var g=this.getControlAlias(h);return g!==null},getControlAlias:function(j){var h=j.className;var g;if(g=e.exec(h)){return g[1]}return null},findUIClass:function(k){if(!k){return null}var g;if(isObject(k)){g=k.constructor}else{g=k}var h=Type.forClass(g).getAlias();var j=null;if(h in this.uiMappings){j=this.uiMappings[h].getConfig()}if(isNullOrUndefined(j)){return this.findUIClass(g.superclass)}return j},isParentUILoaded:function(j){var g=j.getParent();if(!g){return false}var h=d.getInstance().getUI(g);if(!h){return false}return h.isLoaded()}}).$()});define("Indigox.Web.JsLib.Utils.ArrayUtil",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.Utils").Class("ArrayUtil").Static({contains:function(c,b){return a.indexOf(c,b)>-1},indexOf:function(e,d){if(e.indexOf){return e.indexOf(d)}var b=null,c=null;for(b=0,c=e.length;b<c;b++){if(e[b]===d){return b}}return -1},remove:function(d,c){var b=this.indexOf(d,c);d.splice(b,1)},removeAt:function(c,b){c.splice(b,1)},equal:function(f,e){if(f.length!=e.length){return false}var b=true;var c=null,d=null;for(c=0,d=f.length;c<d;++c){if(this.indexOf(e,f[c])==-1){b=false;break}}return b}}).$()});define("Indigox.Web.JsLib.Utils.AsyncUtil",["Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Core"],function(a){var b=Namespace("Indigox.Web.JsLib.Utils").Class("AsyncUtil").Static({invokeAsync:function(e,d,c){if(arguments.length===1){d=null;c=0}else{if(arguments.length===2){if(isNumber(arguments[1])){c=arguments[1];d=null}else{c=0}}}if(d){if(isFunction(d)){d=new a({handler:d})}else{if(!(d instanceof a)){d=new a(d)}}}if(isString(e)){setTimeout(e,c)}else{if(isFunction(e)){setTimeout(function(){e();if(d){d.invoke()}},c)}else{if(isObject(e)){if(!(e instanceof a)){e=new a(e)}setTimeout(function(){e.invoke();if(d){d.invoke()}},c)}}}},until:function(d,e){if(isNullOrUndefined(e)){throw Error("argument 'callback' is null.")}if(isFunction(d)){d=new a({handler:d})}else{if(!(d instanceof a)){d=new a(d)}}var c=d.invoke();if(c){if(isFunction(e)){e=new a({handler:e})}else{if(!(e instanceof a)){e=new a(e)}}e.invoke()}else{window.setTimeout((function(f){return function(){b.until(d,f)}}(e)),100)}}}).$()});define("Indigox.Web.JsLib.Utils.AuthorizationHeaderUtil",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.Utils").Class("AuthorizationHeaderUtil").Static({getParam:function(g,e){var d="";if(g.split(" ").length>1){var f=g.split(" ")[1].split(",");for(var b=0,c=f.length;b<c;b++){if(f[b].split("=")[0]==(e)){d=f[b].substring(e.length+1);break}}}return d.replace(/\"/g,"")}}).$()});define("Indigox.Web.JsLib.Utils.Browser",["Indigox.Web.JsLib.Utils.ObjectUtil","Indigox.Web.JsLib.Core"],function(d){var c=null;function b(h){if(/Pad|Tablet/i.test(h)){return true}if(/WebView/i.test(h)&&!(/Mobile/i.test(h))){return true}if(/Android/i.test(h)&&!(/Mobile/i.test(h))){return true}return false}function a(h){if(/Mobi|Mobile|Phone/i.test(h)){return true}if(/Android/i.test(h)){return true}return false}var g=Namespace("Indigox.Web.JsLib.Utils").Class("Browser").Constructor(function(){this.userAgent=navigator.userAgent;var h=this.userAgent.match(new RegExp("((?:"+d.getValues(g.BROWSER_PREFIXES).join(")|(?:")+"))([\\d\\._]+)"));var j=this.userAgent.match(new RegExp("((?:"+d.getValues(g.ENGINE_PREFIXES).join(")|(?:")+"))([\\d\\._]+)"));this.name="Other";this.version="";this.engine="Other";this.engineVersion="";this.deviceType=g.pc;if(h){this.name=g.BROWSERS[d.getKey(g.BROWSER_PREFIXES,h[1])];this.version=h[2]}if(j){this.engine=g.ENGINES[d.getKey(g.ENGINE_PREFIXES,j[1])];this.engineVersion=j[2]}if(b(this.userAgent)){this.deviceType=g.DEVICE_TYPES.tablet}else{if(a(this.userAgent)){this.deviceType=g.DEVICE_TYPES.mobile}}}).Static({getInstance:function(){if(isNullOrUndefined(c)){c=new g()}return c},BROWSERS:{ie:"IE",firefox:"Firefox",safari:"Safari",chrome:"Chrome",opera:"Opera",other:"Other"},ENGINES:{webkit:"WebKit",gecko:"Gecko",presto:"Presto",trident:"Trident",other:"Other"},DEVICE_TYPES:{mobile:"mobile",tablet:"tablet",pc:"pc"},BROWSER_PREFIXES:{ie:"MSIE ",firefox:"Firefox/",chrome:"Chrome/",safari:"Version/",opera:"Opera/"},ENGINE_PREFIXES:{webkit:"AppleWebKit/",gecko:"Gecko/",presto:"Presto/",trident:"Trident/"},isMobile:function(){return g.getInstance().deviceType===g.DEVICE_TYPES.mobile},isTablet:function(h){return g.getInstance().deviceType===g.DEVICE_TYPES.tablet}}).Members({}).$();var f=function(h){return function(){return this.name===g.BROWSERS[h]}};for(var e in g.BROWSERS){g.prototype[e]=f(e)}for(var e in g.ENGINES){if(e==="other"){g.prototype.otherEngine=f(e)}else{g.prototype[e]=f(e)}}});define("Indigox.Web.JsLib.Utils.Callback",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Core"],function(b){var a=Namespace("Indigox.Web.JsLib.Utils").Class("Callback").Constructor(function(f,e,d){if(arguments.length===1&&isObject(arguments[0])){var c=arguments[0];this.handler=c.handler;this.scope=c.scope;this.args=c.args}else{this.handler=f;this.scope=e;this.args=d}}).Static({createInstance:function(c){if(isFunction(c)){c=new a({handler:c})}else{if((c)&&(!(c instanceof a))){c=new a(c)}}return c}}).Members({getHandler:function(){return this.handler},getScope:function(){return this.scope},getArgs:function(){return this.args},invoke:function(){var d=this.scope;if(this.args){var c=this.args.slice(0);c.unshift.apply(c,arguments);return this.handler.apply(d,c)}else{return this.handler.apply(d,arguments)}}}).$()});define("Indigox.Web.JsLib.Utils.Callbacks",["Indigox.Web.JsLib.Collection.List","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Core"],function(c,b){var a=Namespace("Indigox.Web.JsLib.Utils").Class("Callbacks").Constructor(function(){this.callbacks=new c()}).Members({add:function(d){this.callbacks.add(d)},addRange:function(d){this.callbacks.addRange(d)},remove:function(d){this.callbacks.remove(d)},invoke:function(){var f=this.callbacks.toArray();for(var d=0,e=f.length;d<e;d++){var g=f[d];g.invoke.apply(g,arguments)}}}).$()});define("Indigox.Web.JsLib.Utils.CompositePromise",["Indigox.Web.JsLib.Utils.Promise","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Core"],function(d,a){var c=d.prototype;var b=Namespace("Indigox.Web.JsLib.Utils").Class("CompositePromise").Extend(c).Constructor(function(g){c.constructor.apply(this,[]);this.parts=[];this.returnValue=[];this.message=[];this.appendRange(g);if(this.parts.length===0){this.setResolved()}for(var e=0,f=this.parts.length;e<f;e++){var h=this.parts[e];h.progress(new a(this.onPartProgress,this,[e,h]));h.always(new a(this.onPartStateChanged,this,[e,h]))}if(this.parts.length===0){this.setResolved()}}).Members({append:function(e){if(e&&e instanceof d){this.parts.push(e)}else{this.parts.push(new d(e))}},appendRange:function(g){for(var e=0,f=g.length;e<f;e++){this.append(g[e])}},onPartProgress:function(e,h){e=arguments[arguments.length-2];h=arguments[arguments.length-1];this.message[e]=h.message;for(var f=0,g=this.progressCallbacks.length;f<g;f++){var j=this.progressCallbacks[f];j.invoke.apply(j,this.message)}},onPartStateChanged:function(e,h){e=arguments[arguments.length-2];h=arguments[arguments.length-1];this.returnValue[e]=h.returnValue;if(h.isRejected()){this.setRejected()}else{if(h.isResolved()){for(var f=0,g=this.parts.length;f<g;f++){var j=this.parts[f];if(!j.isResolved()){return}}this.setResolved()}}},onStateChanged:function(){if(this.isResolved()){for(var g=0,h=this.doneCallbacks.length;g<h;g++){var e=this.doneCallbacks[g];e.invoke.apply(e,this.returnValue)}}if(this.isRejected()){for(var f=0,l=this.failCallbacks.length;f<l;f++){var k=this.failCallbacks[f];k.invoke.apply(k,this.returnValue)}}}}).$()});define("Indigox.Web.JsLib.Utils.ConditionalConfig",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.Utils").Class("ConditionalConfig").Constructor(function(){this.configs=[];this.defaultConfig=null}).Static({}).Members({addConfig:function(f,b){if((arguments.length<2)||(isNullOrUndefined(b))){b=arguments[0];f=null}if(isNullOrUndefined(f)){this.defaultConfig=b}else{var d=false;var c,e;for(c=0,e=this.configs.length;c<e;c++){if(this.configs[c].condition===f){this.configs[c].config=b;d=true}}if(!d){this.configs.push({condition:f,config:b})}}},getConfig:function(){var b,c;for(b=0,c=this.configs.length;b<c;b++){if(this.configs[b].condition()){return this.configs[b].config}}return this.defaultConfig}}).$()});define("Indigox.Web.JsLib.Utils.Configurable",["Indigox.Web.JsLib.Utils.StringUtil","Indigox.Web.JsLib.Utils.Deferred","Indigox.Web.JsLib.Utils.Promise","Indigox.Web.JsLib.Core"],function(b,a,d){var c=Namespace("Indigox.Web.JsLib.Utils").Class("Configurable").Members({hasField:function(e){return(e in this)},hasGetter:function(f){var e=this.getGetter(f);return(e in this)},hasSetter:function(e){var f=this.getSetter(e);return(f in this)},getGetter:function(e){return("get"+b.toPascalCase(e))},getSetter:function(e){return("set"+b.toPascalCase(e))},getFieldOrProperty:function(e){if(this.hasGetter(e)){return this[this.getGetter(e)]()}else{if(this.hasField(e)){return this[e]}}},setFieldOrProperty:function(e,f){if(f instanceof d){f.done({handler:function(g){this.setFieldOrProperty(e,g)},scope:this})}else{if(this.hasSetter(e)){this[this.getSetter(e)](f)}else{if(this.hasField(e)){this[e]=f}}}},isConfigurableValue:function(e){return(e instanceof c)},configureFieldOrProperty:function(f,g){if(!(this.hasField(f)||this.hasGetter(f))){return}var e=this.getFieldOrProperty(f);if(!this.isConfigurableValue(g)&&this.isConfigurableValue(e)){e.configure(g)}else{this.setFieldOrProperty(f,g)}},configure:function(e){for(var f in e){if(f===undefined){continue}this.configureFieldOrProperty(f,e[f])}}}).$()});define("Indigox.Web.JsLib.Utils.ControlUtil",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.Utils").Class("ControlUtil").Static({findControlFromNearestParent:function(d,b){var c=d.parent;while(c!=null){if(c.find){var e=c.find(b);if(e!=null){return e}}c=c.parent}return null}}).$()});define("Indigox.Web.JsLib.Utils.CookieUtil",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.Utils").Class("CookieUtil").Static({get:function(b){var h=document.cookie.split(";");var d="";var f="";var g="";var e=false;var c="";for(c=0;c<h.length;c++){d=h[c].split("=");f=d[0].replace(/^\s+|\s+$/g,"");if(f==b){e=true;if(d.length>1){g=unescape(d[1].replace(/^\s+|\s+$/g,""))}return g}d=null;f=""}if(!e){return null}},set:function(d,f,e,j,b,h){var c=new Date();c.setTime(c.getTime());if(b){b=b*1000*60*60}var g=new Date(c.getTime()+(b));document.cookie=d+"="+escape(f)+((b)?";expires="+g.toGMTString():"")+((j)?";path="+j:"")+((e)?";domain="+e:"")+((h)?";secure":"")},remove:function(b,c,d){document.cookie=b+"="+((d)?";path="+d:"")+((c)?";domain="+c:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}}).$()});define("Indigox.Web.JsLib.Utils.DateTimeUtil",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.Utils").Class("DateTimeUtil").Static({parse:function(g){if(isNullOrUndefined(g)||g===""){return null}var b=g.replace(/-/g,"/"),f=null;try{f=new Date(b)}catch(c){throw ("Can't parse datetime: "+g)}return f},toShortString:function(f,e,c){if(f instanceof Date){var b=f;f=b.getFullYear()+"";e=(b.getMonth()+1)+"";c=b.getDate()+""}else{e=e?e:"0";c=c?c:"0"}return[f,"-",((e.length==1)?"0":""),e,"-",((c.length==1)?"0":""),c].join("")},toLongString:function(j,h,g,e,b,f){if(j instanceof Date){var c=j;j=c.getFullYear();h=c.getMonth()+1;g=c.getDate();e=c.getHours();b=c.getMinutes();f=c.getSeconds()}else{j=parseInt(j);h=parseInt(h);g=parseInt(g);e=parseInt(e);b=parseInt(b);f=parseInt(f)}return[j,"-",((h<10)?"0":""),h,"-",((g<10)?"0":""),g," ",((e<10)?"0":""),e,":",((b<10)?"0":""),b,":",((f<10)?"0":""),f].join("")},dateToString:function(c){var f=c.getFullYear(),b=c.getMonth()+1,e=c.getDate();return[f,"年",b,"月",e,"日"].join("")},getPreWeekEndDate:function(e){var c=e;c=new Date(c.getTime()-7*1000*60*60*24);var b=c.getDay();b=b==0?7:b;c.setDate(c.getDate()+(7-b));return c},getWeeksNum:function(h,b){var e=new Date(h,b,1);var d=e.getDay();d=d==0?7:d;if(d!=1){e=new Date(e.getTime()+(7-d+1)*24*60*60*1000)}var f=new Date(e.getFullYear(),e.getMonth()+1,1);var c=f.getDay();c=c==0?7:c;if(c!=1){f=new Date(f.getTime()+(7-c+1)*24*60*60*1000)}var g=(f.getTime()-e.getTime())/(1000*24*60*60);return Math.ceil(g/7)},getMonthWeek:function(d){var h=new Date(d.getFullYear(),d.getMonth(),1);var c=h.getDay();c=c==0?7:c;if(c!=1){h=new Date(d.getFullYear(),d.getMonth(),h.getDate()+(7-c+1))}var f=d.getFullYear(),g=d.getMonth(),e;if(d.getTime()<h.getTime()){g-=1;if(g<0){g=11;f-=1}e=getWeeksNum(f,g)}else{var b=Math.ceil((d.getDate()-h.getDate())/6);e=b==0?1:b}return{year:f,month:g+1,week:e}},getQuarterDateRange:function(e,d){var f=new Date(e,(d-1)*3,1);var c=new Date(e,d*3,1);var b=new Date(c.setDate(0));return[f,b]},getCurrentQuarter:function(c){var f=c.getFullYear(),e=c.getTime();for(var d=1;d<=4;d++){var b=this.getQuarterDateRange(f,d);if(e>=b[0].getTime()&&e<=b[1].getTime()){return d}}},getNextQuarter:function(e,d){var b=d+1;var c=e;if(b>4){c+=1;b=1}return{year:c,quarter:b}},getPreQuarter:function(e,d){var b=d-1;var c=e;if(b<1){c-=1;b=4}return{year:c,quarter:b}},getWeekDateRange:function(j,b,d){var e=new Date(j,b,1);var f=e.getDay();f=f==0?7:f;var g=1000*60*60*24;if(f!=1){e=new Date(e.getTime()+(7-f+1)*g)}var h=new Date(e.getTime()+g*(d-1)*7);var c=new Date(h.getTime()+g*6);return[h,c]},getShortDate:function(c){var f=c.getFullYear(),b=c.getMonth()+1,e=c.getDate();return[f,"-",b,"-",e].join("")},getPreWeek:function(g,b,c){var e=this.getWeekDateRange(g,b,c);var f=new Date(e[0].getTime()-1000*60*60*24*7);return this.getMonthWeek(f)},getNextWeek:function(g,b,c){var e=this.getWeekDateRange(g,b,c);var f=new Date(e[0].getTime()+1000*60*60*24*7);return this.getMonthWeek(f)}}).$()});define("Indigox.Web.JsLib.Utils.Deferred",["Indigox.Web.JsLib.Utils.Promise","Indigox.Web.JsLib.Utils.CompositePromise","Indigox.Web.JsLib.Core"],function(d,c){var b=d.prototype;var a=Namespace("Indigox.Web.JsLib.Utils").Class("Deferred").Extend(b).Constructor(function(){b.constructor.apply(this,[])}).Static({when:function(e){if(!isArray(e)){e=[].slice.call(arguments)}return new c(e)}}).Members({promise:function(){return new d(this)},resolve:function(e){this.returnValue=e;this.setResolved()},reject:function(e){this.returnValue=e;this.setRejected()},notify:function(e){this.message=e;this.onProgress()}}).$()});define("Indigox.Web.JsLib.Utils.DelayedTask",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Core"],function(b){var a=Namespace("Indigox.Web.JsLib.Utils").Class("DelayedTask").Constructor(function(e,d,c){this.id=null;this.handler=e;this.scope=d;this.args=c||[]}).Members({call:function(){clearTimeout(this.id);this.id=null;this.handler.apply(this.scope,this.args)},delay:function(e,c,g,d){this.cancel();this.handler=c||this.handler;this.scope=g||this.scope;this.args=d||this.args;var f=this;this.id=setTimeout(function(){f.call()},e)},cancel:function(){if(this.id){clearTimeout(this.id);this.id=null}}}).$()});define("Indigox.Web.JsLib.Utils.Delegate",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Core"],function(b){var a=Namespace("Indigox.Web.JsLib.Utils").Class("Delegate").Static({create:function(d,c){return function(){d.apply(c,arguments)}}}).$()});define("Indigox.Web.JsLib.Utils.DOMUtil",["jquery","Indigox.Web.JsLib.Core"],function(c){var b=/^\s*$/;var a=Namespace("Indigox.Web.JsLib.Utils").Class("DOMUtil").Static({createElement:function(e,d){c(e).appendTo(d||document.body)},buildElement:function(e){var d=c(e).get(0);d.parentNode.removeChild(d);return d},createScriptNode:function(f){var e=document.getElementsByTagName("HEAD").item(0);var d=document.createElement("script");d.language="javascript";d.type="text/javascript";d.src=f;e.appendChild(d);return d},isEmptyTextNode:function(d){return d&&d.nodeType==3&&b.test(d.nodeValue)},element:function(e,d){return c(e,d).get(0)},elements:function(e,d){return c(e,d).get()},attachEvent:function(d,f,e){c(d).bind(f,e)},detachEvent:function(d,f,e){if(isNullOrUndefined(e)){c(d).unbind(f)}else{c(d).unbind(f,e)}},setAttribute:function(e,d,f){if((d==="innerText")||(d==="textContent")){if(c.browser.msie){d="innerText"}else{d="textContent"}}c(e).prop(d,f)},getAttribute:function(e,d){if((d==="innerText")||(d==="textContent")){if(c.browser.msie){d="innerText"}else{d="textContent"}}return c(e).prop(d)},setStyle:function(e,d,f){if(isNullOrUndefined(f)||(isNumber(f)&&isNaN(f))){return}c(e).css(d,f)},getStyle:function(e,d){return c(e).css(d)},getScreenHeight:function(){if(document.documentElement){return document.documentElement.clientHeight}else{return document.body.clientHeight}},getScreenWidth:function(){if(document.documentElement){return document.documentElement.clientWidth}else{return document.body.clientWidth}},getScrollTop:function(){if(document.documentElement){return document.documentElement.scrollTop}else{return document.body.scrollTop}},getScrollLeft:function(){if(document.documentElement){return document.documentElement.scrollLeft}else{return document.body.scrollLeft}},addClass:function(d,e){c(d).addClass(e)},removeClass:function(d,e){c(d).removeClass(e)},toggleClass:function(d,e){c(d).toggleClass(e)},getClassList:function(d){var e=this.getAttribute(d,"className");return e.split(/\s+/)},hasClass:function(d,e){return c(d).hasClass(e)},getFirstchild:function(d){return c(d).children(":first").get(0)},getLastchild:function(d){return c(d).children(":last").get(0)},getPrevious:function(d){return c(d).prev().get(0)},getNext:function(d){return c(d).next().get(0)},getPosition:function(g){if((!g)||(!g.nodeName)){return{left:0,top:0}}var m=0,e=0;if("getBoundingClientRect" in document.documentElement){var o=g;var h=g.getBoundingClientRect();var n=g.ownerDocument;var j=n.body;var d=n.documentElement;var f=d.clientTop||j.clientTop||0;var l=d.clientLeft||j.clientLeft||0;m=h.top+(o.pageYOffset||d&&d.scrollTop||j.scrollTop)-f;e=h.left+(o.pageXOffset||d&&d.scrollLeft||j.scrollLeft)-l}else{var k=g;do{m+=k.offsetTop||0;e+=k.offsetLeft||0;k=k.offsetParent}while(k)}return{X:e,Y:m}},getRelativePosition:function(d){if((!d)||(!d.nodeName)){return{left:0,top:0}}var g=0,f=0,e=d;do{g+=e.offsetTop||0;f+=e.offsetLeft||0;if((e.offsetParent)&&(this.getComputedStyle(e.offsetParent,"position")!="relative")){e=e.offsetParent}else{e=null}}while(e);return{X:f,Y:g}},getComputedStyle:function(e,f){var d;if(typeof e.currentStyle!="undefined"){d=e.currentStyle}else{d=document.defaultView.getComputedStyle(e,null)}return d[f]},getSize:function(d){},hasEvent:(function(){var e={onsubmit:"form",onreset:"form",onselect:"input",onchange:"input",onerror:"img",onload:"img",onabort:"img"},d={};return function(j,h){if(arguments.length==1){h=arguments[0];j=null}h=h.indexOf("on")?"on"+h:h;if(!j&&h in d){return d[h]}j=j||document.createElement(e[h]||"div");var k=j.__proto__||{},f=h in j,g;if(f&&(g=k[h])&&delete k[h]){f=h in j;k[h]=g}d[h]=f;return f}}())}).$();window.get=a.element;window.getAll=a.elements});define("Indigox.Web.JsLib.Utils.EncodeUtil",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.Utils").Class("EncodeUtil").Static({markupHTML:function(c){if(c==null||typeof c==="undefined"||c===""){return c}var d=document.createElement("div");d.appendChild(document.createTextNode(c));var b=d.innerHTML;return b},clearHTML:function(c){if(c==null||typeof c==="undefined"||c===""){return c}c=c.replace(/(<script(\s[^>]*)?>)([\s\S]*?)(<\/script\s*>)/g,"");c=c.replace(/<link [^>]*>/g,"");c=c.replace(/<img [^>]*>/g,"");var d=document.createElement("div");d.innerHTML=c;var b=d.innerText||d.textContent;return b},encodeHTML:function(c){if(c==null||typeof c==="undefined"||c===""){return c}var b=c+"";b=b.replace(/&/g,"&gt;");b=b.replace(/</g,"&lt;");b=b.replace(/>/g,"&gt;");b=b.replace(/[ ]/g,"&nbsp;");b=b.replace(/\'/g,"'");b=b.replace(/\"/g,"&quot;");b=b.replace(/\n/g,"<br>");return b},decodeHTML:function(c){if(c==null||typeof c==="undefined"||c===""){return c}var b=c+"";b=b.replace(/&gt;/g,"&");b=b.replace(/&lt;/g,"<");b=b.replace(/&gt;/g,">");b=b.replace(/&nbsp;/g,"    ");b=b.replace(/\'/g,"'");b=b.replace(/&quot;/g,'"');b=b.replace(/<br>/g,"\n");return b}}).$()});define("Indigox.Web.JsLib.Utils.ErrorHandler",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Core"],function(b){var a=Namespace("Indigox.Web.JsLib.Utils").Class("ErrorHandler").Static({alert:function(c){},log:function(c){if(typeof(c.Message)!=="undefined"){debug.error(c.Message+"\r\n"+c.StackTrace)}else{if(typeof(c.message)!=="undefined"){if(typeof(c.stack)!=="undefined"){debug.error(c.stack)}else{debug.error(c)}}else{debug.error(c)}}},logAlert:function(c){a.log(c);a.alert(c)}}).$()});define("Indigox.Web.JsLib.Utils.Event",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Core"],function(b){var a=Namespace("Indigox.Web.JsLib.Utils").Class("Event").Constructor(function(d,c){if(arguments.length==1&&isObject(arguments[0])){b.copy(this,arguments[0])}else{if(arguments.length==2){this.target=d;this.handler=c}}}).Members({getTarget:function(){return this.target},getHandler:function(){return this.handler},invoke:function(c){this.handler.apply(this.target,c)}}).$()});define("Indigox.Web.JsLib.Utils.EventsSupport",["Indigox.Web.JsLib.Utils.Event","Indigox.Web.JsLib.Utils.ErrorHandler","Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Core"],function(b,c,d){var a=Namespace("Indigox.Web.JsLib.Utils").Class("EventsSupport").Constructor(function(e){this.events={};this.source=e}).Members({registerEvents:function(){var e=null,f=null;for(e=0,f=arguments.length;e<f;e++){this.events[arguments[e]]=[]}},attachEvent:function(k,f){if(arguments.length==1){f=arguments[0];k=null}else{if(arguments.length==2&&isString(arguments[0])&&isFunction(arguments[1])){var h=arguments[0],g=arguments[1];k=null;f={};f[h]=g}else{if(arguments.length==3){var h=arguments[1],g=arguments[2];f={};f[h]=g}}}for(var j in f){if(!this.events[j]){throw new Error(['there is no event "',j,'" exist! Please check the program. If you are control developer, please register the event before using it.'].join(""))}if(this.events[j]){this.events[j].push(new b(k,f[j]))}}},detachEvent:function(f){if(arguments.length==2&&isString(arguments[0])&&isFunction(arguments[1])){var l=arguments[0],j=arguments[1];f={};f[l]=j}for(var m in f){if(!this.events[m]){throw new Error(['there is no event "',m,'" exist! Please check the program. If you are control developer, please register the event before using it.'].join(""))}var h=this.events[m];var g=null,k=null;for(g=h.length-1;g>=0;g--){if(h[g].handler==f[m]){h.splice(g,1)}}}},clearEvents:function(){for(var e in this.events){this.events[e]=[]}},hasEvent:function(e){return e in this.events},fire:function(k,f){var l=k;if(!(l in this.events)){throw new Error(['there is no event "',l,'" exist! Please check the program. If you are control developer, please register the event before using it.'].join(""))}f=f||[];f.unshift(this.source);var j=this.events[l];var h=null;for(h=j.length-1;h>=0;h--){try{j[h].invoke(f)}catch(g){debug.error("fire event ["+k+"] failed.");debug.error(f);c.log(g)}}}}).$()});define("Indigox.Web.JsLib.Utils.JoinStringBuilder",["Indigox.Web.JsLib.Utils.StringBuilder","Indigox.Web.JsLib.Core"],function(a){var c=a.prototype;var b=Namespace("Indigox.Web.JsLib.Utils").Class("JoinStringBuilder").Extend(c).Constructor(function(){this.array=[]}).Members({append:function(d){this.array.push(d)},toString:function(){return this.array.join(" ")}}).$()});define("Indigox.Web.JsLib.Utils.Listener",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Core"],function(b){var a=Namespace("Indigox.Web.JsLib.Utils").Class("Listener").Constructor(function(c,d){this.target=c;this.method=d;if(!(d in c)||!isFunction(c[d])){throw new Error('There is no method "'+d+'" in the target Object.')}}).Members({invoke:function(c){this.target[this.method].apply(this.target,c)}}).$()});define("Indigox.Web.JsLib.Utils.ListenersSupport",["Indigox.Web.JsLib.Utils.ArrayUtil","Indigox.Web.JsLib.Utils.ErrorHandler","Indigox.Web.JsLib.Utils.Event","Indigox.Web.JsLib.Core"],function(e,c,a){var d="on";var b=Namespace("Indigox.Web.JsLib.Utils").Class("ListenersSupport").Constructor(function(f){this.events={};this.source=f}).Members({registerListeners:function(){var f=null,g=null;for(f=0,g=arguments.length;f<g;f++){this.events[d+arguments[f]]=[]}},addListener:function(h,f){if(this.hasListener(h)){return}f=f||h;for(var g in this.events){if(g in f&&isFunction(f[g])){this.events[g].push(new a(h,f[g]))}}},removeListener:function(k){var g;var f=null,j=null;for(var h in this.events){g=this.events[h],j=g.length;for(f=j-1;f>=0;f--){if(g[f].getTarget()===k){g.splice(f,1)}}}},clearListeners:function(){for(var f in this.events){this.events[f]=[]}},getListeners:function(){var h=[];var g=null;var f=null,k=null;for(var j in this.events){g=this.events[j];for(f=0,k=g.length;f<k;f++){if(!e.contains(h,g[f].getTarget())){h.push(g[f].getTarget())}}}return h},hasListener:function(k){var g=null;var f=null,j=null;for(var h in this.events){g=this.events[h];for(f=0,j=g.length;f<j;f++){if(g[f].getTarget()===k){return true}}}return false},fire:function(l,f){l=d+l;if(!(l in this.events)){throw new Error(['the listener "',l,'" not exist. Please check the program. If you are control developer, please register the event before using it.'].join(""))}f=f||[];f.unshift(this.source);var j=this.events[l].slice(0);var h=null,k=null;for(h=0;h<j.length;h++){try{j[h].invoke(f)}catch(g){debug.error("fire listener ["+l+"] failed.");debug.error(f);c.log(g)}}}}).$()});define("Indigox.Web.JsLib.Utils.LyncUtil",["Indigox.Web.JsLib.Utils.ListenersSupport","Indigox.Web.JsLib.Utils.Browser","Indigox.Web.JsLib.Core"],function(a,g){var g=g.getInstance();var f=null;if(g.name==="IE"){try{f=new ActiveXObject("Name.NameCtrl.1");f.onStatusChange=function(j,h,k){console.log(j+" "+h);c.onStatusChanged(j,h,k)}}catch(d){}}var e=new a({});e.registerListeners("LyncStatusChange");var b={"0":"online","1":"offline","2":"away","3":"busy","4":"away","9":"notdisturb","-1":"unknown"};var c=Namespace("Indigox.Web.JsLib.Utils").Class("LyncUtil").Static({onStatusChanged:function(k,h,l){var j="";j=b[h];if(!j){j=b["-1"]}e.fire("LyncStatusChange",[k,j])},addListener:function(j){if(j!=null){var h=j.getControl().getValue();if(!h){return}if(f){f.GetStatus(h.Email,"")}e.addListener(j)}},removeListener:function(h){if(h!=null){e.removeListener(h)}},getPresence:function(l){if(g.name!=="IE"||isNullOrUndefined(f)){return b["-1"]}var h=null;try{h=f.GetStatus(l,"")}catch(k){}var j="";j=b[h];if(!j){j=b["-1"]}return j},showCard:function(l,k,j){if(g.name==="IE"&&f){try{f.ShowOOUI(l,0,k,j)}catch(h){}}},hideCard:function(j){if(g.name==="IE"&&f){try{f.HideOOUI()}catch(h){}}}}).$()});define("Indigox.Web.JsLib.Utils.NumberUtil",["Indigox.Web.JsLib.Core"],function(){(function(){var a=Namespace("Indigox.Web.JsLib.Utils").Class("NumberUtil").Static({add:function(g,f){var d,c,b;try{d=g.toString().split(".")[1].length}catch(h){d=0}try{c=f.toString().split(".")[1].length}catch(h){c=0}b=Math.pow(10,Math.max(d,c));return(g*b+f*b)/b},sub:function(g,f){var d,c,b,j;try{d=g.toString().split(".")[1].length}catch(h){d=0}try{c=f.toString().split(".")[1].length}catch(h){c=0}b=Math.pow(10,Math.max(d,c));j=(d>=c)?d:c;return((g*b-f*b)/b).toFixed(j)},mul:function(f,c){var b=0,g=f.toString(),d=c.toString();try{b+=g.split(".")[1].length}catch(h){}try{b+=d.split(".")[1].length}catch(h){}return Number(g.replace(".",""))*Number(d.replace(".",""))/Math.pow(10,b)}}).$()}())});define("Indigox.Web.JsLib.Utils.ObjectUtil",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.Utils").Class("ObjectUtil").Static({getKey:function(d,c){for(var b in d){if(d.hasOwnProperty(b)&&d[b]===c){return b}}return null},getKeys:function(d){var c=[];for(var b in d){if(d.hasOwnProperty(b)){c.push(b)}}return c},getValue:function(c,b){return c[b]},getValues:function(d){var b=[];for(var c in d){if(d.hasOwnProperty(c)){b.push(d[c])}}return b}}).$()});define("Indigox.Web.JsLib.Utils.PlusStringBuilder",["Indigox.Web.JsLib.Utils.StringBuilder","Indigox.Web.JsLib.Core"],function(a){var b=a.prototype;var c=Namespace("Indigox.Web.JsLib.Utils").Class("PlusStringBuilder").Extend(b).Constructor(function(){this.str=""}).Members({append:function(d){this.str+=d},toString:function(){return this.str}}).$()});define("Indigox.Web.JsLib.Utils.Promise",["Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Core"],function(b){var a="pending",e="resolved",c="rejected";var d=Namespace("Indigox.Web.JsLib.Utils").Class("Promise").Constructor(function(g){this.state=a;this.doneCallbacks=[];this.failCallbacks=[];this.progressCallbacks=[];this.returnValue=undefined;this.message=undefined;if(arguments.length===1){if(g instanceof d){var f=this;g.done(function(h){f.returnValue=h;f.setResolved()}).fail(function(h){f.returnValue=h;f.setRejected()}).progress(function(h){f.message=h;f.onProgress()})}else{this.state=e;this.returnValue=g}}}).Members({isResolved:function(){return this.state===e},isRejected:function(){return this.state===c},then:function(h,k,j){h=b.createInstance(h);k=b.createInstance(k);j=b.createInstance(j);var g=Type.forFullName("Indigox.Web.JsLib.Utils.Deferred").getClass();var f=new g();if(h){this.done(function(){var l=h.invoke.apply(h,arguments);if(l instanceof d){l.done(function(m){f.resolve(m)}).fail(function(m){f.reject(m)}).progress(function(m){f.notify(m)})}else{f.resolve(l)}})}if(k){this.fail(function(){var l=k.invoke.apply(k,arguments);if(l instanceof d){l.done(function(m){f.resolve(m)}).fail(function(m){f.reject(m)}).progress(function(m){f.notify(m)})}else{f.reject(l)}})}if(j){this.progress(function(){var l=j.invoke.apply(j,arguments);if(l instanceof d){l.done(function(m){f.resolve(m)}).fail(function(m){f.reject(m)}).progress(function(m){f.notify(m)})}else{f.notify(l)}})}return f.promise()},done:function(f){f=b.createInstance(f);this.doneCallbacks.push(f);if(this.isResolved()){f.invoke.apply(f,[this.returnValue])}return this},fail:function(f){f=b.createInstance(f);this.failCallbacks.push(f);if(this.isRejected()){f.invoke.apply(f,[this.returnValue])}return this},progress:function(f){f=b.createInstance(f);this.progressCallbacks.push(f);return this},always:function(f){f=b.createInstance(f);this.doneCallbacks.push(f);this.failCallbacks.push(f);if(this.isResolved()||this.isRejected()){f.invoke()}return this},setState:function(f){if(this.state!==f){this.state=f;this.onStateChanged()}},setResolved:function(){this.setState(e)},setRejected:function(){this.setState(c)},onStateChanged:function(){if(this.isResolved()){for(var h=0,k=this.doneCallbacks.length;h<k;h++){var f=this.doneCallbacks[h];f.invoke.apply(f,[this.returnValue])}}if(this.isRejected()){for(var g=0,m=this.failCallbacks.length;g<m;g++){var l=this.failCallbacks[g];l.invoke.apply(l,[this.returnValue])}}},onProgress:function(){for(var f=0,g=this.progressCallbacks.length;f<g;f++){var h=this.progressCallbacks[f];h.invoke.apply(h,[this.message])}}}).$()});define("Indigox.Web.JsLib.Utils.PropertyListenersSupport",["Indigox.Web.JsLib.Utils.ListenersSupport","Indigox.Web.JsLib.Core"],function(b){var a=Namespace("Indigox.Web.JsLib.Utils").Class("PropertyListenersSupport").Constructor(function(c){this.propertyListeners={};this.source=c}).Members({registerListeners:function(){for(var c=0,d;d=arguments[c];c++){this.propertyListeners[d]=new b(this.source)}},addListener:function(d,c){if(d in this.propertyListeners){this.propertyListeners[d].addListener(c)}else{throw new Error(['there is no the property "',d,'" exist! Please check the program.'].join(""))}},removeListener:function(d,c){if(d in this.propertyListeners){this.propertyListeners[d].removeListener(c)}else{throw new Error(['there is no the property "',d,'" exist! Please check the program.'].join(""))}},findProperty:function(c){},fire:function(e,d,c){if(e in this.propertyListeners){this.propertyListeners[e].fire(d,c)}else{throw new Error(['there is no the property "',e,'" exist! Please check the program.'].join(""))}}}).$()});define("Indigox.Web.JsLib.Utils.StringBuilder",["Indigox.Web.JsLib.Utils.Util","Indigox.Web.JsLib.Core"],function(b){var a=Namespace("Indigox.Web.JsLib.Utils").Class("StringBuilder").Constructor(function(){}).Members({append:function(c){},toString:function(){}}).$()});define("Indigox.Web.JsLib.Utils.StringUtil",["Indigox.Web.JsLib.Core"],function(){(function(){var c=/(px|em|%|en|ex|pt|in|cm|mm|pc)$/i;var b="";var a=Namespace("Indigox.Web.JsLib.Utils").Class("StringUtil").Static({format:function(e){var d=Array.prototype.slice.call(arguments,1);return e.replace(/\{(\d+)\}/g,function(f,g){return d[g]})},isNullOrEmpty:function(d){if(isNullOrUndefined(d)){return true}else{return(/^\s*$/g).test(d)}},empty:function(){return b},trim:function(d){return d.replace(/(^\s*)|(\s*$)/g,"")},trimStart:function(e){var d=/^\s+/g;return e.replace(d,"")},trimEnd:function(e){var d=/\s+$/g;return e.replace(d,"")},parseInt:function(d){d=d.replace(c,"");return parseInt(d,10)},parseFloat:function(d){d=d.replace(c,"");return parseFloat(d)},newGuid:function(){var d="";for(var e=1;e<=32;e++){var f=Math.floor(Math.random()*16).toString(16);d+=f;if((e==8)||(e==12)||(e==16)||(e==20)){d+="-"}}return d},toPascalCase:function(d){if(!d){return d}if(d.length<1){return d}return(d.substring(0,1).toUpperCase()+d.substring(1))},toCamalCase:function(d){if(!d){return d}if(d.length<1){return d}return(d.substring(0,1).toLowerCase()+d.substring(1))}}).$()}())});define("Indigox.Web.JsLib.Utils.UrlAdapter",["Indigox.Web.JsLib.Utils.UrlUtil","Indigox.Web.JsLib.Utils.Browser"],function(b,d){var c=!!window.addEventListener;function a(f,e,g){if(c){f.addEventListener(e,g)}else{f.attachEvent("on"+e,g)}}if(d.name==="IE"&&((d.version==="6.0")||(d.version==="7.0")||(d.version==="8.0"))){a(document,"mouseover",function(){var e=event.srcElement;if(typeof(e.tagName)==="string"&&e.tagName.toLowerCase()==="a"){var f=e.getAttribute("href");if(!!f&&f.indexOf("#")>-1){e.setAttribute("href",b.join(f))}}})}});define("Indigox.Web.JsLib.Utils.UrlUtil",["jquery","jquery-history","Indigox.Web.JsLib.DOM.Element","Indigox.Web.JsLib.Utils.Browser","Indigox.Web.JsLib.Utils.Callback","Indigox.Web.JsLib.Utils.Callbacks","Indigox.Web.JsLib.Utils.DelayedTask","Indigox.Web.JsLib.Core"],function(m,d,b,l,h,k,g){var l=l.getInstance(),c=b.el;var j=""+document.referrer;var a=new k();var f=new g(function(){a.invoke()});m.History.bind(function(n){debug.log(n);f.delay(100)});var e=Namespace("Indigox.Web.JsLib.Utils").Class("UrlUtil").Static({get:function(o,n){var t=null;var p=new RegExp("(^|&)"+o+"=([^&#]*)(&|#|$)");var s=this.getQueryString(n);var q=s.match(p);if(q!=null){t=q[2];t=decodeURIComponent(t.replace(/\+/g," "))}return t},getPath:function(o){if(typeof(o)!=="string"){o=window.location.href}var p=o.indexOf("?"),n=o.indexOf("#");if(p>=0){o=o.substring(0,p)}else{if(n>=0){o=o.substring(0,n)}}return o.replace(/(http(s)?:)?\/\/[^\/]*\//g,"/")},getParams:function(o){var r=this.getQueryString(o);var t={};var u=r.split("&");for(var p=0,q=u.length;p<q;p++){var s=u[p];var n=s.indexOf("=");if(n>0){t[s.substring(0,n)]=s.substring(n+1)}else{t[s]=null}}return t},getQueryString:function(o){if(typeof(o)!=="string"){o=window.location.href}var p=o.indexOf("?"),n=o.indexOf("#");if(p>=0){if(n>=0){if(n<p){return""}return o.substring(p+1,n)}return o.substring(p+1)}return""},concate:function(n,o){if(arguments.length===1){o=n;n=window.location}return o},join:function(r,q){if(isNullOrUndefined(q)){if(l.name==="IE"&&((l.version==="6.0")||(l.version==="7.0")||(l.version==="8.0"))){if(!!r&&r.indexOf("#")>-1){r=r.replace("#","?page=");var o=r.substring(r.indexOf("=")+1);r=r.replace(o,encodeURIComponent(o))}}return r}else{var n=[r];n.push((r.indexOf("?")>=0)?"&":"?");for(var s in q){if((s!=null)&&(q[s]!=null)){n.push(s);n.push("=");n.push(encodeURIComponent(q[s]));n.push("&")}}n=n.slice(0,n.length-1);r=n.join("");if(l.name==="IE"&&((l.version==="6.0")||(l.version==="7.0")||(l.version==="8.0"))){if(r.indexOf("#")>-1){r=r.replace("#","?page=");var o=r.substring(r.indexOf("=")+1);r=r.replace(o,encodeURIComponent(o))}}return r}},goBack:function(){if(window.history.length>1){window.history.go(-1)}else{window.location.assign("/")}},goTo:function(p,o){p=e.join(p,o);if(l.name==="IE"&&((l.version==="6.0")||(l.version==="7.0")||(l.version==="8.0"))){var n=document.createElement("a");n.href=p;document.body.appendChild(n);n.click()}else{window.location.assign(p)}},reload:function(){window.location.reload()},open:function(o,n){o=e.join(o,n);window.open(o)},redirect:function(o,n){o=e.join(o,n);window.location.replace(o)},onHashChanged:function(n){n=h.createInstance(n);a.add(n)}}).$()});define("Indigox.Web.JsLib.Utils.Util",["Indigox.Web.JsLib.Core"],function(){var a=Namespace("Indigox.Web.JsLib.Utils").Class("Util").Static({copy:function(h,g){if(!isNullOrUndefined(h)){var b=null,c=null;for(b=1,c=arguments.length;b<c;b++){var d=arguments[b];for(var e in d){if(e){h[e]=d[e]}}}}return h},copyExist:function(h,g){if(!isNullOrUndefined(h)){var b=null,c=null;for(b=1,c=arguments.length;b<c;b++){var d=arguments[b];for(var e in d){if(e in h){h[e]=d[e]}}}}return h},copyNotExist:function(h,g){if(!isNullOrUndefined(h)){var b=null,c=null;for(b=1,c=arguments.length;b<c;b++){var d=arguments[b];for(var e in d){if(e&&!(e in h)){h[e]=d[e]}}}}return h},clone:function(d){var b=[];var c=function(f){var e=null,g=null;for(e=0,g=b.length;e<g;e++){if(b[e].from===f){return b[e].to}}return null};return(function(j){if(!j||typeof(j)!="object"){return j}var h=c(j);if(h!==null){return h}h=new j.constructor();b.push({from:j,to:h});if(j instanceof Array){var f=null,g=null;for(f=0,g=j.length;f<g;f++){h[f]=arguments.callee(j[f])}}else{for(var e in j){if(typeof(h[e])!=="function"){h[e]=arguments.callee(j[e])}}}return h}(d))},equals:function(e,d){var b=[];var c=function(j,h){for(var f=0,g=b.length;f<g;f++){if((b[f].obj1===j&&b[f].obj2===h)||(b[f].obj1===h&&b[f].obj2===j)){return true}}return false};return function(l,j){if(l==j||c(l,j)){return true}else{if(!(l instanceof Object&&j instanceof Object)){return false}}b.push({obj1:l,obj2:j});if(l instanceof Array&&j instanceof Array&&l.length===j.length){var g=null,h=null;for(g=0,h=l.length;g<h;g++){if(!arguments.callee(l[g],j[g])){return false}}}else{if(l instanceof Object&&j instanceof Object){var f;var m=0;for(f in l){m++}var k=0;for(f in j){k++}if(m!==k){return false}for(f in l){if(!arguments.callee(l[f],j[f])){return false}}}else{return false}}return true}(e,d)}}).$()});define("Indigox.Web.JsLib.WebContexts.Context",["/_remoting/ContextQuery/Single/jsonp?!callback=define","Indigox.Web.JsLib.Utils.ErrorHandler","Indigox.Web.JsLib.Core"],function(d,c){var a=null;var b=Namespace("Indigox.Web.JsLib.WebContexts").Class("Context").Constructor(function(){this.settings={};this.navigation={};this.user={}}).Static({getInstance:function(){if(!a){a=new b();if(d.Status===0){var e=d.Result;a.settings=e.Settings;a.navigation=e.Navigation;a.user=e.User}else{c.log(d.Error)}}return a}}).Members({getSettings:function(){return this.settings},getSetting:function(e){return this.settings[e]},getNavigation:function(f){var e="Default";if(f){e=f}return this.navigation[e]},getUser:function(){return this.user}}).$()});